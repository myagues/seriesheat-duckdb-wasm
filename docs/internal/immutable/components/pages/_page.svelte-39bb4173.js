import{S as wi,i as vi,s as Ii,k as P,l as x,m as L,h as g,n as p,b as K,A as _t,H as _e,I as At,g as Yt,t as rt,d as Gt,f as tt,J as xn,K as Hs,o as Yr,L as Ja,M as ji,e as Et,N as On,v as qt,w as li,x as Jt,y as Qt,q as ct,r as ut,F as w,u as oi,z as tr,a as Dt,c as Lt,O as Rt,P as Mt,p as Ie,Q as Es,R as Qa,T as Nu,U as Ka,V as Bu,B as ku,C as Du,D as Lu,E as Ru,W as Ws,X as ko,Y as Do,Z as Ys,_ as Za,$ as Mu,a0 as Lo,a1 as Uu,a2 as Cu,a3 as Pu,a4 as qn,a5 as Ro,a6 as xu}from"../../chunks/index-c21c382a.js";function z(i,t,e,n){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):r(h.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}function Mo(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function it(i){return this instanceof it?(this.v=i,this):new it(i)}function We(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(d){n[d]&&(r[d]=function(y){return new Promise(function(S,A){s.push([d,y,S,A])>1||a(d,y)})})}function a(d,y){try{l(n[d](y))}catch(S){u(s[0][3],S)}}function l(d){d.value instanceof it?Promise.resolve(d.value.v).then(c,h):u(s[0][2],d)}function c(d){a("next",d)}function h(d){a("throw",d)}function u(d,y){d(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function er(i){var t,e;return t={},n("next"),n("throw",function(r){throw r}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(r,s){t[r]=i[r]?function(o){return(e=!e)?{value:it(i[r](o)),done:r==="return"}:s?s(o):o}:s}}function Pi(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof Mo=="function"?Mo(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){o=i[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}const Vu=new TextDecoder("utf-8"),As=i=>Vu.decode(i),ju=new TextEncoder,Gs=i=>ju.encode(i),[ap,zu]=(()=>{const i=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw i()}return t.asIntN=()=>{throw i()},t.asUintN=()=>{throw i()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Xa,lp]=(()=>{const i=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw i()}static from(){throw i()}constructor(){throw i()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[qs,cp]=(()=>{const i=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw i()}static from(){throw i()}constructor(){throw i()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),Hu=i=>typeof i=="number",$a=i=>typeof i=="boolean",xt=i=>typeof i=="function",ae=i=>i!=null&&Object(i)===i,zi=i=>ae(i)&&xt(i.then),Vn=i=>ae(i)&&xt(i[Symbol.iterator]),yn=i=>ae(i)&&xt(i[Symbol.asyncIterator]),Ts=i=>ae(i)&&ae(i.schema),tl=i=>ae(i)&&"done"in i&&"value"in i,el=i=>ae(i)&&xt(i.stat)&&Hu(i.fd),il=i=>ae(i)&&Js(i.body),Gr=i=>"_getDOMStream"in i&&"_getNodeStream"in i,Wu=i=>ae(i)&&xt(i.abort)&&xt(i.getWriter)&&!Gr(i),Js=i=>ae(i)&&xt(i.cancel)&&xt(i.getReader)&&!Gr(i),Yu=i=>ae(i)&&xt(i.end)&&xt(i.write)&&$a(i.writable)&&!Gr(i),nl=i=>ae(i)&&xt(i.read)&&xt(i.pipe)&&$a(i.readable)&&!Gr(i),Gu=i=>ae(i)&&xt(i.clear)&&xt(i.bytes)&&xt(i.position)&&xt(i.setPosition)&&xt(i.capacity)&&xt(i.getBufferIdentifier)&&xt(i.createLong),Qs=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function qu(i){const t=i[0]?[i[0]]:[];let e,n,r,s;for(let o,a,l=0,c=0,h=i.length;++l<h;){if(o=t[c],a=i[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:e,byteLength:r}=o,{byteOffset:n,byteLength:s}=a,e+r<n||n+s<e){a&&(t[++c]=a);continue}t[c]=new Uint8Array(o.buffer,e,n-e+s)}return t}function Uo(i,t,e=0,n=t.byteLength){const r=i.byteLength,s=new Uint8Array(i.buffer,i.byteOffset,r),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,r));return s.set(o,e),i}function Je(i,t){const e=qu(i),n=e.reduce((h,u)=>h+u.byteLength,0);let r,s,o,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,n);for(const h=e.length;++l<h;){if(r=e[l],s=r.subarray(0,Math.min(r.length,c-a)),c<=a+s.length){s.length<r.length?e[l]=r.subarray(s.length):s.length===r.length&&l++,o?Uo(o,s,a):o=s;break}Uo(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),e.slice(l),n-(o?o.byteLength:0)]}function wt(i,t){let e=tl(t)?t.value:t;return e instanceof i?i===Uint8Array?new i(e.buffer,e.byteOffset,e.byteLength):e:e?(typeof e=="string"&&(e=Gs(e)),e instanceof ArrayBuffer?new i(e):e instanceof Qs?new i(e):Gu(e)?wt(i,e.bytes()):ArrayBuffer.isView(e)?e.byteLength<=0?new i(0):new i(e.buffer,e.byteOffset,e.byteLength/i.BYTES_PER_ELEMENT):i.from(e)):new i(0)}const Tn=i=>wt(Int32Array,i),ht=i=>wt(Uint8Array,i),Fs=i=>(i.next(),i);function*Ju(i,t){const e=function*(r){yield r},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Qs?e(t):Vn(t)?t:e(t);return yield*Fs(function*(r){let s=null;do s=r.next(yield wt(i,s));while(!s.done)}(n[Symbol.iterator]())),new i}const Qu=i=>Ju(Uint8Array,i);function rl(i,t){return We(this,arguments,function*(){if(zi(t))return yield it(yield it(yield*er(Pi(rl(i,yield it(t))))));const n=function(o){return We(this,arguments,function*(){yield yield it(yield it(o))})},r=function(o){return We(this,arguments,function*(){yield it(yield*er(Pi(Fs(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Qs?n(t):Vn(t)?r(t):yn(t)?t:n(t);return yield it(yield*er(Pi(Fs(function(o){return We(this,arguments,function*(){let a=null;do a=yield it(o.next(yield yield it(wt(i,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield it(new i)})}const Ku=i=>rl(Uint8Array,i);function Ks(i,t,e){if(i!==0){e=e.slice(0,t+1);for(let n=-1;++n<=t;)e[n]+=i}return e}function Zu(i,t){let e=0;const n=i.length;if(n!==t.length)return!1;if(n>0)do if(i[e]!==t[e])return!1;while(++e<n);return!0}const we={fromIterable(i){return Jn(Xu(i))},fromAsyncIterable(i){return Jn($u(i))},fromDOMStream(i){return Jn(th(i))},fromNodeStream(i){return Jn(ih(i))},toDOMStream(i,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(i,t){throw new Error('"toNodeStream" not available in this environment')}},Jn=i=>(i.next(),i);function*Xu(i){let t,e=!1,n=[],r,s,o,a=0;function l(){return s==="peek"?Je(n,o)[0]:([r,n,a]=Je(n,o),r)}({cmd:s,size:o}=yield null);const c=Qu(i)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(o-a)?c.next():c.next(o-a),!t&&r.byteLength>0&&(n.push(r),a+=r.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(h){(e=!0)&&typeof c.throw=="function"&&c.throw(h)}finally{e===!1&&typeof c.return=="function"&&c.return(null)}return null}function $u(i){return We(this,arguments,function*(){let e,n=!1,r=[],s,o,a,l=0;function c(){return o==="peek"?Je(r,a)[0]:([s,r,l]=Je(r,a),s)}({cmd:o,size:a}=yield yield it(null));const h=Ku(i)[Symbol.asyncIterator]();try{do if({done:e,value:s}=Number.isNaN(a-l)?yield it(h.next()):yield it(h.next(a-l)),!e&&s.byteLength>0&&(r.push(s),l+=s.byteLength),e||a<=l)do({cmd:o,size:a}=yield yield it(c()));while(a<l);while(!e)}catch(u){(n=!0)&&typeof h.throw=="function"&&(yield it(h.throw(u)))}finally{n===!1&&typeof h.return=="function"&&(yield it(h.return(new Uint8Array(0))))}return yield it(null)})}function th(i){return We(this,arguments,function*(){let e=!1,n=!1,r=[],s,o,a,l=0;function c(){return o==="peek"?Je(r,a)[0]:([s,r,l]=Je(r,a),s)}({cmd:o,size:a}=yield yield it(null));const h=new eh(i);try{do if({done:e,value:s}=Number.isNaN(a-l)?yield it(h.read()):yield it(h.read(a-l)),!e&&s.byteLength>0&&(r.push(ht(s)),l+=s.byteLength),e||a<=l)do({cmd:o,size:a}=yield yield it(c()));while(a<l);while(!e)}catch(u){(n=!0)&&(yield it(h.cancel(u)))}finally{n===!1?yield it(h.cancel()):i.locked&&h.releaseLock()}return yield it(null)})}class eh{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return z(this,void 0,void 0,function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return z(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=ht(e)),e})}}const as=(i,t)=>{const e=r=>n([t,r]);let n;return[t,e,new Promise(r=>(n=r)&&i.once(t,e))]};function ih(i){return We(this,arguments,function*(){const e=[];let n="error",r=!1,s=null,o,a,l=0,c=[],h;function u(){return o==="peek"?Je(c,a)[0]:([h,c,l]=Je(c,a),h)}if({cmd:o,size:a}=yield yield it(null),i.isTTY)return yield yield it(new Uint8Array(0)),yield it(null);try{e[0]=as(i,"end"),e[1]=as(i,"error");do{if(e[2]=as(i,"readable"),[n,s]=yield it(Promise.race(e.map(y=>y[2]))),n==="error")break;if((r=n==="end")||(Number.isFinite(a-l)?(h=ht(i.read(a-l)),h.byteLength<a-l&&(h=ht(i.read()))):h=ht(i.read()),h.byteLength>0&&(c.push(h),l+=h.byteLength)),r||a<=l)do({cmd:o,size:a}=yield yield it(u()));while(a<l)}while(!r)}finally{yield it(d(e,n==="error"?s:null))}return yield it(null);function d(y,S){return h=c=null,new Promise((A,M)=>{for(const[D,V]of y)i.off(D,V);try{const D=i.destroy;D&&D.call(i,S),S=void 0}catch(D){S=D||S}finally{S!=null?M(S):A()}})}})}var fe;(function(i){i[i.V1=0]="V1",i[i.V2=1]="V2",i[i.V3=2]="V3",i[i.V4=3]="V4",i[i.V5=4]="V5"})(fe||(fe={}));var me;(function(i){i[i.Sparse=0]="Sparse",i[i.Dense=1]="Dense"})(me||(me={}));var oe;(function(i){i[i.HALF=0]="HALF",i[i.SINGLE=1]="SINGLE",i[i.DOUBLE=2]="DOUBLE"})(oe||(oe={}));var ai;(function(i){i[i.DAY=0]="DAY",i[i.MILLISECOND=1]="MILLISECOND"})(ai||(ai={}));var dt;(function(i){i[i.SECOND=0]="SECOND",i[i.MILLISECOND=1]="MILLISECOND",i[i.MICROSECOND=2]="MICROSECOND",i[i.NANOSECOND=3]="NANOSECOND"})(dt||(dt={}));var mi;(function(i){i[i.YEAR_MONTH=0]="YEAR_MONTH",i[i.DAY_TIME=1]="DAY_TIME",i[i.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(mi||(mi={}));var ft;(function(i){i[i.NONE=0]="NONE",i[i.Schema=1]="Schema",i[i.DictionaryBatch=2]="DictionaryBatch",i[i.RecordBatch=3]="RecordBatch",i[i.Tensor=4]="Tensor",i[i.SparseTensor=5]="SparseTensor"})(ft||(ft={}));var m;(function(i){i[i.NONE=0]="NONE",i[i.Null=1]="Null",i[i.Int=2]="Int",i[i.Float=3]="Float",i[i.Binary=4]="Binary",i[i.Utf8=5]="Utf8",i[i.Bool=6]="Bool",i[i.Decimal=7]="Decimal",i[i.Date=8]="Date",i[i.Time=9]="Time",i[i.Timestamp=10]="Timestamp",i[i.Interval=11]="Interval",i[i.List=12]="List",i[i.Struct=13]="Struct",i[i.Union=14]="Union",i[i.FixedSizeBinary=15]="FixedSizeBinary",i[i.FixedSizeList=16]="FixedSizeList",i[i.Map=17]="Map",i[i.Dictionary=-1]="Dictionary",i[i.Int8=-2]="Int8",i[i.Int16=-3]="Int16",i[i.Int32=-4]="Int32",i[i.Int64=-5]="Int64",i[i.Uint8=-6]="Uint8",i[i.Uint16=-7]="Uint16",i[i.Uint32=-8]="Uint32",i[i.Uint64=-9]="Uint64",i[i.Float16=-10]="Float16",i[i.Float32=-11]="Float32",i[i.Float64=-12]="Float64",i[i.DateDay=-13]="DateDay",i[i.DateMillisecond=-14]="DateMillisecond",i[i.TimestampSecond=-15]="TimestampSecond",i[i.TimestampMillisecond=-16]="TimestampMillisecond",i[i.TimestampMicrosecond=-17]="TimestampMicrosecond",i[i.TimestampNanosecond=-18]="TimestampNanosecond",i[i.TimeSecond=-19]="TimeSecond",i[i.TimeMillisecond=-20]="TimeMillisecond",i[i.TimeMicrosecond=-21]="TimeMicrosecond",i[i.TimeNanosecond=-22]="TimeNanosecond",i[i.DenseUnion=-23]="DenseUnion",i[i.SparseUnion=-24]="SparseUnion",i[i.IntervalDayTime=-25]="IntervalDayTime",i[i.IntervalYearMonth=-26]="IntervalYearMonth"})(m||(m={}));var ti;(function(i){i[i.OFFSET=0]="OFFSET",i[i.DATA=1]="DATA",i[i.VALIDITY=2]="VALIDITY",i[i.TYPE=3]="TYPE"})(ti||(ti={}));const nh=void 0;function Nn(i){if(i===null)return"null";if(i===nh)return"undefined";switch(typeof i){case"number":return`${i}`;case"bigint":return`${i}`;case"string":return`"${i}"`}return typeof i[Symbol.toPrimitive]=="function"?i[Symbol.toPrimitive]("string"):ArrayBuffer.isView(i)?i instanceof BigInt64Array||i instanceof BigUint64Array?`[${[...i].map(t=>Nn(t))}]`:`[${i}]`:ArrayBuffer.isView(i)?`[${i}]`:JSON.stringify(i,(t,e)=>typeof e=="bigint"?`${e}`:e)}const rh=Symbol.for("isArrowBigNum");function Le(i,...t){return t.length===0?Object.setPrototypeOf(wt(this.TypedArray,i),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(i,...t),this.constructor.prototype)}Le.prototype[rh]=!0;Le.prototype.toJSON=function(){return`"${xi(this)}"`};Le.prototype.valueOf=function(){return sl(this)};Le.prototype.toString=function(){return xi(this)};Le.prototype[Symbol.toPrimitive]=function(i="default"){switch(i){case"number":return sl(this);case"string":return xi(this);case"default":return Os(this)}return xi(this)};function en(...i){return Le.apply(this,i)}function nn(...i){return Le.apply(this,i)}function Bn(...i){return Le.apply(this,i)}Object.setPrototypeOf(en.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(nn.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Bn.prototype,Object.create(Uint32Array.prototype));Object.assign(en.prototype,Le.prototype,{constructor:en,signed:!0,TypedArray:Int32Array,BigIntArray:Xa});Object.assign(nn.prototype,Le.prototype,{constructor:nn,signed:!1,TypedArray:Uint32Array,BigIntArray:qs});Object.assign(Bn.prototype,Le.prototype,{constructor:Bn,signed:!0,TypedArray:Uint32Array,BigIntArray:qs});function sl(i){const{buffer:t,byteOffset:e,length:n,signed:r}=i,s=new qs(t,e,n),o=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const c of s)a+=~c*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of s)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let xi,Os;zu?(Os=i=>i.byteLength===8?new i.BigIntArray(i.buffer,i.byteOffset,1)[0]:ls(i),xi=i=>i.byteLength===8?`${new i.BigIntArray(i.buffer,i.byteOffset,1)[0]}`:ls(i)):(xi=ls,Os=xi);function ls(i){let t="";const e=new Uint32Array(2);let n=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2);const r=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let s=-1;const o=n.length-1;do{for(e[0]=n[s=0];s<o;)n[s++]=e[1]=e[0]/10,e[0]=(e[0]-e[1]*10<<16)+n[s];n[s]=e[1]=e[0]/10,e[0]=e[0]-e[1]*10,t=`${e[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t||"0"}class Zs{static new(t,e){switch(e){case!0:return new en(t);case!1:return new nn(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Xa:return new en(t)}return t.byteLength===16?new Bn(t):new nn(t)}static signed(t){return new en(t)}static unsigned(t){return new nn(t)}static decimal(t){return new Bn(t)}constructor(t,e){return Zs.new(t,e)}}var ol,al,ll,cl,ul,hl,dl,fl,ml,pl,yl,bl,gl,_l,wl,vl,Il,Sl,El;class Y{static isNull(t){return(t==null?void 0:t.typeId)===m.Null}static isInt(t){return(t==null?void 0:t.typeId)===m.Int}static isFloat(t){return(t==null?void 0:t.typeId)===m.Float}static isBinary(t){return(t==null?void 0:t.typeId)===m.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===m.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===m.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===m.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===m.Date}static isTime(t){return(t==null?void 0:t.typeId)===m.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===m.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===m.Interval}static isList(t){return(t==null?void 0:t.typeId)===m.List}static isStruct(t){return(t==null?void 0:t.typeId)===m.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===m.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===m.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===m.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===m.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===m.Dictionary}static isDenseUnion(t){return Y.isUnion(t)&&t.mode===me.Dense}static isSparseUnion(t){return Y.isUnion(t)&&t.mode===me.Sparse}get typeId(){return m.NONE}}ol=Symbol.toStringTag;Y[ol]=(i=>(i.children=null,i.ArrayType=Array,i[Symbol.toStringTag]="DataType"))(Y.prototype);class pi extends Y{toString(){return"Null"}get typeId(){return m.Null}}al=Symbol.toStringTag;pi[al]=(i=>i[Symbol.toStringTag]="Null")(pi.prototype);class yi extends Y{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return m.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ll=Symbol.toStringTag;yi[ll]=(i=>(i.isSigned=null,i.bitWidth=null,i[Symbol.toStringTag]="Int"))(yi.prototype);class kn extends yi{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(kn.prototype,"ArrayType",{value:Int32Array});class Dn extends Y{constructor(t){super(),this.precision=t}get typeId(){return m.Float}get ArrayType(){switch(this.precision){case oe.HALF:return Uint16Array;case oe.SINGLE:return Float32Array;case oe.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}cl=Symbol.toStringTag;Dn[cl]=(i=>(i.precision=null,i[Symbol.toStringTag]="Float"))(Dn.prototype);class ar extends Y{constructor(){super()}get typeId(){return m.Binary}toString(){return"Binary"}}ul=Symbol.toStringTag;ar[ul]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Binary"))(ar.prototype);class lr extends Y{constructor(){super()}get typeId(){return m.Utf8}toString(){return"Utf8"}}hl=Symbol.toStringTag;lr[hl]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Utf8"))(lr.prototype);class cr extends Y{constructor(){super()}get typeId(){return m.Bool}toString(){return"Bool"}}dl=Symbol.toStringTag;cr[dl]=(i=>(i.ArrayType=Uint8Array,i[Symbol.toStringTag]="Bool"))(cr.prototype);class ur extends Y{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return m.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}fl=Symbol.toStringTag;ur[fl]=(i=>(i.scale=null,i.precision=null,i.ArrayType=Uint32Array,i[Symbol.toStringTag]="Decimal"))(ur.prototype);class hr extends Y{constructor(t){super(),this.unit=t}get typeId(){return m.Date}toString(){return`Date${(this.unit+1)*32}<${ai[this.unit]}>`}}ml=Symbol.toStringTag;hr[ml]=(i=>(i.unit=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Date"))(hr.prototype);class Ln extends Y{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return m.Time}toString(){return`Time${this.bitWidth}<${dt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}pl=Symbol.toStringTag;Ln[pl]=(i=>(i.unit=null,i.bitWidth=null,i[Symbol.toStringTag]="Time"))(Ln.prototype);class dr extends Y{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return m.Timestamp}toString(){return`Timestamp<${dt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}yl=Symbol.toStringTag;dr[yl]=(i=>(i.unit=null,i.timezone=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Timestamp"))(dr.prototype);class fr extends Y{constructor(t){super(),this.unit=t}get typeId(){return m.Interval}toString(){return`Interval<${mi[this.unit]}>`}}bl=Symbol.toStringTag;fr[bl]=(i=>(i.unit=null,i.ArrayType=Int32Array,i[Symbol.toStringTag]="Interval"))(fr.prototype);class mr extends Y{constructor(t){super(),this.children=[t]}get typeId(){return m.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}gl=Symbol.toStringTag;mr[gl]=(i=>(i.children=null,i[Symbol.toStringTag]="List"))(mr.prototype);class ee extends Y{constructor(t){super(),this.children=t}get typeId(){return m.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}_l=Symbol.toStringTag;ee[_l]=(i=>(i.children=null,i[Symbol.toStringTag]="Struct"))(ee.prototype);class pr extends Y{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((r,s,o)=>(r[s]=o)&&r||r,Object.create(null))}get typeId(){return m.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}wl=Symbol.toStringTag;pr[wl]=(i=>(i.mode=null,i.typeIds=null,i.children=null,i.typeIdToChildIndex=null,i.ArrayType=Int8Array,i[Symbol.toStringTag]="Union"))(pr.prototype);class yr extends Y{constructor(t){super(),this.byteWidth=t}get typeId(){return m.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}vl=Symbol.toStringTag;yr[vl]=(i=>(i.byteWidth=null,i.ArrayType=Uint8Array,i[Symbol.toStringTag]="FixedSizeBinary"))(yr.prototype);class br extends Y{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return m.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Il=Symbol.toStringTag;br[Il]=(i=>(i.children=null,i.listSize=null,i[Symbol.toStringTag]="FixedSizeList"))(br.prototype);class gr extends Y{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return m.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Sl=Symbol.toStringTag;gr[Sl]=(i=>(i.children=null,i.keysSorted=null,i[Symbol.toStringTag]="Map_"))(gr.prototype);const sh=(i=>()=>++i)(-1);class cn extends Y{constructor(t,e,n,r){super(),this.indices=e,this.dictionary=t,this.isOrdered=r||!1,this.id=n==null?sh():typeof n=="number"?n:n.low}get typeId(){return m.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}El=Symbol.toStringTag;cn[El]=(i=>(i.id=null,i.indices=null,i.isOrdered=null,i.dictionary=null,i[Symbol.toStringTag]="Dictionary"))(cn.prototype);function ei(i){const t=i;switch(i.typeId){case m.Decimal:return i.bitWidth/32;case m.Timestamp:return 2;case m.Date:return 1+t.unit;case m.Interval:return 1+t.unit;case m.FixedSizeList:return t.listSize;case m.FixedSizeBinary:return t.byteWidth;default:return 1}}class ot{visitMany(t,...e){return t.map((n,r)=>this.visit(n,...e.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return oh(this,t,e)}getVisitFnByTypeId(t,e=!0){return $i(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function oh(i,t,e=!0){return typeof t=="number"?$i(i,t,e):typeof t=="string"&&t in m?$i(i,m[t],e):t&&t instanceof Y?$i(i,Co(t),e):(t==null?void 0:t.type)&&t.type instanceof Y?$i(i,Co(t.type),e):$i(i,m.NONE,e)}function $i(i,t,e=!0){let n=null;switch(t){case m.Null:n=i.visitNull;break;case m.Bool:n=i.visitBool;break;case m.Int:n=i.visitInt;break;case m.Int8:n=i.visitInt8||i.visitInt;break;case m.Int16:n=i.visitInt16||i.visitInt;break;case m.Int32:n=i.visitInt32||i.visitInt;break;case m.Int64:n=i.visitInt64||i.visitInt;break;case m.Uint8:n=i.visitUint8||i.visitInt;break;case m.Uint16:n=i.visitUint16||i.visitInt;break;case m.Uint32:n=i.visitUint32||i.visitInt;break;case m.Uint64:n=i.visitUint64||i.visitInt;break;case m.Float:n=i.visitFloat;break;case m.Float16:n=i.visitFloat16||i.visitFloat;break;case m.Float32:n=i.visitFloat32||i.visitFloat;break;case m.Float64:n=i.visitFloat64||i.visitFloat;break;case m.Utf8:n=i.visitUtf8;break;case m.Binary:n=i.visitBinary;break;case m.FixedSizeBinary:n=i.visitFixedSizeBinary;break;case m.Date:n=i.visitDate;break;case m.DateDay:n=i.visitDateDay||i.visitDate;break;case m.DateMillisecond:n=i.visitDateMillisecond||i.visitDate;break;case m.Timestamp:n=i.visitTimestamp;break;case m.TimestampSecond:n=i.visitTimestampSecond||i.visitTimestamp;break;case m.TimestampMillisecond:n=i.visitTimestampMillisecond||i.visitTimestamp;break;case m.TimestampMicrosecond:n=i.visitTimestampMicrosecond||i.visitTimestamp;break;case m.TimestampNanosecond:n=i.visitTimestampNanosecond||i.visitTimestamp;break;case m.Time:n=i.visitTime;break;case m.TimeSecond:n=i.visitTimeSecond||i.visitTime;break;case m.TimeMillisecond:n=i.visitTimeMillisecond||i.visitTime;break;case m.TimeMicrosecond:n=i.visitTimeMicrosecond||i.visitTime;break;case m.TimeNanosecond:n=i.visitTimeNanosecond||i.visitTime;break;case m.Decimal:n=i.visitDecimal;break;case m.List:n=i.visitList;break;case m.Struct:n=i.visitStruct;break;case m.Union:n=i.visitUnion;break;case m.DenseUnion:n=i.visitDenseUnion||i.visitUnion;break;case m.SparseUnion:n=i.visitSparseUnion||i.visitUnion;break;case m.Dictionary:n=i.visitDictionary;break;case m.Interval:n=i.visitInterval;break;case m.IntervalDayTime:n=i.visitIntervalDayTime||i.visitInterval;break;case m.IntervalYearMonth:n=i.visitIntervalYearMonth||i.visitInterval;break;case m.FixedSizeList:n=i.visitFixedSizeList;break;case m.Map:n=i.visitMap;break}if(typeof n=="function")return n;if(!e)return()=>null;throw new Error(`Unrecognized type '${m[t]}'`)}function Co(i){switch(i.typeId){case m.Null:return m.Null;case m.Int:{const{bitWidth:t,isSigned:e}=i;switch(t){case 8:return e?m.Int8:m.Uint8;case 16:return e?m.Int16:m.Uint16;case 32:return e?m.Int32:m.Uint32;case 64:return e?m.Int64:m.Uint64}return m.Int}case m.Float:switch(i.precision){case oe.HALF:return m.Float16;case oe.SINGLE:return m.Float32;case oe.DOUBLE:return m.Float64}return m.Float;case m.Binary:return m.Binary;case m.Utf8:return m.Utf8;case m.Bool:return m.Bool;case m.Decimal:return m.Decimal;case m.Time:switch(i.unit){case dt.SECOND:return m.TimeSecond;case dt.MILLISECOND:return m.TimeMillisecond;case dt.MICROSECOND:return m.TimeMicrosecond;case dt.NANOSECOND:return m.TimeNanosecond}return m.Time;case m.Timestamp:switch(i.unit){case dt.SECOND:return m.TimestampSecond;case dt.MILLISECOND:return m.TimestampMillisecond;case dt.MICROSECOND:return m.TimestampMicrosecond;case dt.NANOSECOND:return m.TimestampNanosecond}return m.Timestamp;case m.Date:switch(i.unit){case ai.DAY:return m.DateDay;case ai.MILLISECOND:return m.DateMillisecond}return m.Date;case m.Interval:switch(i.unit){case mi.DAY_TIME:return m.IntervalDayTime;case mi.YEAR_MONTH:return m.IntervalYearMonth}return m.Interval;case m.Map:return m.Map;case m.List:return m.List;case m.Struct:return m.Struct;case m.Union:switch(i.mode){case me.Dense:return m.DenseUnion;case me.Sparse:return m.SparseUnion}return m.Union;case m.FixedSizeBinary:return m.FixedSizeBinary;case m.FixedSizeList:return m.FixedSizeList;case m.Dictionary:return m.Dictionary}throw new Error(`Unrecognized type '${m[i.typeId]}'`)}ot.prototype.visitInt8=null;ot.prototype.visitInt16=null;ot.prototype.visitInt32=null;ot.prototype.visitInt64=null;ot.prototype.visitUint8=null;ot.prototype.visitUint16=null;ot.prototype.visitUint32=null;ot.prototype.visitUint64=null;ot.prototype.visitFloat16=null;ot.prototype.visitFloat32=null;ot.prototype.visitFloat64=null;ot.prototype.visitDateDay=null;ot.prototype.visitDateMillisecond=null;ot.prototype.visitTimestampSecond=null;ot.prototype.visitTimestampMillisecond=null;ot.prototype.visitTimestampMicrosecond=null;ot.prototype.visitTimestampNanosecond=null;ot.prototype.visitTimeSecond=null;ot.prototype.visitTimeMillisecond=null;ot.prototype.visitTimeMicrosecond=null;ot.prototype.visitTimeNanosecond=null;ot.prototype.visitDenseUnion=null;ot.prototype.visitSparseUnion=null;ot.prototype.visitIntervalDayTime=null;ot.prototype.visitIntervalYearMonth=null;const Al=new Float64Array(1),Zi=new Uint32Array(Al.buffer);function Tl(i){const t=(i&31744)>>10,e=(i&1023)/1024,n=Math.pow(-1,(i&32768)>>15);switch(t){case 31:return n*(e?Number.NaN:1/0);case 0:return n*(e?6103515625e-14*e:0)}return n*Math.pow(2,t-15)*(1+e)}function ah(i){if(i!==i)return 32256;Al[0]=i;const t=(Zi[1]&2147483648)>>16&65535;let e=Zi[1]&2146435072,n=0;return e>=1089470464?Zi[0]>0?e=31744:(e=(e&2080374784)>>16,n=(Zi[1]&1048575)>>10):e<=1056964608?(n=1048576+(Zi[1]&1048575),n=1048576+(n<<(e>>20)-998)>>21,e=0):(e=e-1056964608>>10,n=(Zi[1]&1048575)+512>>10),t|e|n&65535}class Z extends ot{}function et(i){return(t,e,n)=>{if(t.setValid(e,n!=null))return i(t,e,n)}}const lh=(i,t,e)=>{i[t]=Math.trunc(e/864e5)},Xs=(i,t,e)=>{i[t]=Math.trunc(e%4294967296),i[t+1]=Math.trunc(e/4294967296)},ch=(i,t,e)=>{i[t]=Math.trunc(e*1e3%4294967296),i[t+1]=Math.trunc(e*1e3/4294967296)},uh=(i,t,e)=>{i[t]=Math.trunc(e*1e6%4294967296),i[t+1]=Math.trunc(e*1e6/4294967296)},Fl=(i,t,e,n)=>{if(e+1<t.length){const{[e]:r,[e+1]:s}=t;i.set(n.subarray(0,s-r),r)}},hh=({offset:i,values:t},e,n)=>{const r=i+e;n?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},ci=({values:i},t,e)=>{i[t]=e},$s=({values:i},t,e)=>{i[t]=e},Ol=({values:i},t,e)=>{i[t]=ah(e)},dh=(i,t,e)=>{switch(i.type.precision){case oe.HALF:return Ol(i,t,e);case oe.SINGLE:case oe.DOUBLE:return $s(i,t,e)}},Nl=({values:i},t,e)=>{lh(i,t,e.valueOf())},Bl=({values:i},t,e)=>{Xs(i,t*2,e.valueOf())},fh=({stride:i,values:t},e,n)=>{t.set(n.subarray(0,i),i*e)},mh=({values:i,valueOffsets:t},e,n)=>Fl(i,t,e,n),ph=({values:i,valueOffsets:t},e,n)=>{Fl(i,t,e,Gs(n))},yh=(i,t,e)=>{i.type.unit===ai.DAY?Nl(i,t,e):Bl(i,t,e)},kl=({values:i},t,e)=>Xs(i,t*2,e/1e3),Dl=({values:i},t,e)=>Xs(i,t*2,e),Ll=({values:i},t,e)=>ch(i,t*2,e),Rl=({values:i},t,e)=>uh(i,t*2,e),bh=(i,t,e)=>{switch(i.type.unit){case dt.SECOND:return kl(i,t,e);case dt.MILLISECOND:return Dl(i,t,e);case dt.MICROSECOND:return Ll(i,t,e);case dt.NANOSECOND:return Rl(i,t,e)}},Ml=({values:i},t,e)=>{i[t]=e},Ul=({values:i},t,e)=>{i[t]=e},Cl=({values:i},t,e)=>{i[t]=e},Pl=({values:i},t,e)=>{i[t]=e},gh=(i,t,e)=>{switch(i.type.unit){case dt.SECOND:return Ml(i,t,e);case dt.MILLISECOND:return Ul(i,t,e);case dt.MICROSECOND:return Cl(i,t,e);case dt.NANOSECOND:return Pl(i,t,e)}},_h=({values:i,stride:t},e,n)=>{i.set(n.subarray(0,t),t*e)},wh=(i,t,e)=>{const n=i.children[0],r=i.valueOffsets,s=Fe.getVisitFn(n);if(Array.isArray(e))for(let o=-1,a=r[t],l=r[t+1];a<l;)s(n,a++,e[++o]);else for(let o=-1,a=r[t],l=r[t+1];a<l;)s(n,a++,e.get(++o))},vh=(i,t,e)=>{const n=i.children[0],{valueOffsets:r}=i,s=Fe.getVisitFn(n);let{[t]:o,[t+1]:a}=r;const l=e instanceof Map?e.entries():Object.entries(e);for(const c of l)if(s(n,o,c),++o>=a)break},Ih=(i,t)=>(e,n,r,s)=>n&&e(n,i,t[s]),Sh=(i,t)=>(e,n,r,s)=>n&&e(n,i,t.get(s)),Eh=(i,t)=>(e,n,r,s)=>n&&e(n,i,t.get(r.name)),Ah=(i,t)=>(e,n,r,s)=>n&&e(n,i,t[r.name]),Th=(i,t,e)=>{const n=i.type.children.map(s=>Fe.getVisitFn(s.type)),r=e instanceof Map?Eh(t,e):e instanceof mt?Sh(t,e):Array.isArray(e)?Ih(t,e):Ah(t,e);i.type.children.forEach((s,o)=>r(n[o],i.children[o],s,o))},Fh=(i,t,e)=>{i.type.mode===me.Dense?xl(i,t,e):Vl(i,t,e)},xl=(i,t,e)=>{const n=i.type.typeIdToChildIndex[i.typeIds[t]],r=i.children[n];Fe.visit(r,i.valueOffsets[t],e)},Vl=(i,t,e)=>{const n=i.type.typeIdToChildIndex[i.typeIds[t]],r=i.children[n];Fe.visit(r,t,e)},Oh=(i,t,e)=>{var n;(n=i.dictionary)===null||n===void 0||n.set(i.values[t],e)},Nh=(i,t,e)=>{i.type.unit===mi.DAY_TIME?jl(i,t,e):zl(i,t,e)},jl=({values:i},t,e)=>{i.set(e.subarray(0,2),2*t)},zl=({values:i},t,e)=>{i[t]=e[0]*12+e[1]%12},Bh=(i,t,e)=>{const{stride:n}=i,r=i.children[0],s=Fe.getVisitFn(r);if(Array.isArray(e))for(let o=-1,a=t*n;++o<n;)s(r,a+o,e[o]);else for(let o=-1,a=t*n;++o<n;)s(r,a+o,e.get(o))};Z.prototype.visitBool=et(hh);Z.prototype.visitInt=et(ci);Z.prototype.visitInt8=et(ci);Z.prototype.visitInt16=et(ci);Z.prototype.visitInt32=et(ci);Z.prototype.visitInt64=et(ci);Z.prototype.visitUint8=et(ci);Z.prototype.visitUint16=et(ci);Z.prototype.visitUint32=et(ci);Z.prototype.visitUint64=et(ci);Z.prototype.visitFloat=et(dh);Z.prototype.visitFloat16=et(Ol);Z.prototype.visitFloat32=et($s);Z.prototype.visitFloat64=et($s);Z.prototype.visitUtf8=et(ph);Z.prototype.visitBinary=et(mh);Z.prototype.visitFixedSizeBinary=et(fh);Z.prototype.visitDate=et(yh);Z.prototype.visitDateDay=et(Nl);Z.prototype.visitDateMillisecond=et(Bl);Z.prototype.visitTimestamp=et(bh);Z.prototype.visitTimestampSecond=et(kl);Z.prototype.visitTimestampMillisecond=et(Dl);Z.prototype.visitTimestampMicrosecond=et(Ll);Z.prototype.visitTimestampNanosecond=et(Rl);Z.prototype.visitTime=et(gh);Z.prototype.visitTimeSecond=et(Ml);Z.prototype.visitTimeMillisecond=et(Ul);Z.prototype.visitTimeMicrosecond=et(Cl);Z.prototype.visitTimeNanosecond=et(Pl);Z.prototype.visitDecimal=et(_h);Z.prototype.visitList=et(wh);Z.prototype.visitStruct=et(Th);Z.prototype.visitUnion=et(Fh);Z.prototype.visitDenseUnion=et(xl);Z.prototype.visitSparseUnion=et(Vl);Z.prototype.visitDictionary=et(Oh);Z.prototype.visitInterval=et(Nh);Z.prototype.visitIntervalDayTime=et(jl);Z.prototype.visitIntervalYearMonth=et(zl);Z.prototype.visitFixedSizeList=et(Bh);Z.prototype.visitMap=et(vh);const Fe=new Z,Be=Symbol.for("parent"),rn=Symbol.for("rowIndex");class to{constructor(t,e){return this[Be]=t,this[rn]=e,new Proxy(this,new Dh)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[rn],e=this[Be],n=e.type.children,r={};for(let s=-1,o=n.length;++s<o;)r[n[s].name]=le.visit(e.children[s],t);return r}toString(){return`{${[...this].map(([t,e])=>`${Nn(t)}: ${Nn(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new kh(this[Be],this[rn])}}class kh{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,le.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(to.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Be]:{writable:!0,enumerable:!1,configurable:!1,value:null},[rn]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Dh{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Be].type.children.map(e=>e.name)}has(t,e){return t[Be].type.children.findIndex(n=>n.name===e)!==-1}getOwnPropertyDescriptor(t,e){if(t[Be].type.children.findIndex(n=>n.name===e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[Be].type.children.findIndex(r=>r.name===e);if(n!==-1){const r=le.visit(t[Be].children[n],t[rn]);return Reflect.set(t,e,r),r}}set(t,e,n){const r=t[Be].type.children.findIndex(s=>s.name===e);return r!==-1?(Fe.visit(t[Be].children[r],t[rn],n),Reflect.set(t,e,n)):Reflect.has(t,e)||typeof e=="symbol"?Reflect.set(t,e,n):!1}}class G extends ot{}function X(i){return(t,e)=>t.getValid(e)?i(t,e):null}const Lh=(i,t)=>864e5*i[t],eo=(i,t)=>4294967296*i[t+1]+(i[t]>>>0),Rh=(i,t)=>4294967296*(i[t+1]/1e3)+(i[t]>>>0)/1e3,Mh=(i,t)=>4294967296*(i[t+1]/1e6)+(i[t]>>>0)/1e6,Hl=i=>new Date(i),Uh=(i,t)=>Hl(Lh(i,t)),Ch=(i,t)=>Hl(eo(i,t)),Ph=(i,t)=>null,Wl=(i,t,e)=>{if(e+1>=t.length)return null;const n=t[e],r=t[e+1];return i.subarray(n,r)},xh=({offset:i,values:t},e)=>{const n=i+e;return(t[n>>3]&1<<n%8)!==0},Yl=({values:i},t)=>Uh(i,t),Gl=({values:i},t)=>Ch(i,t*2),Si=({stride:i,values:t},e)=>t[i*e],Vh=({stride:i,values:t},e)=>Tl(t[i*e]),ql=({values:i},t)=>i[t],jh=({stride:i,values:t},e)=>t.subarray(i*e,i*(e+1)),zh=({values:i,valueOffsets:t},e)=>Wl(i,t,e),Hh=({values:i,valueOffsets:t},e)=>{const n=Wl(i,t,e);return n!==null?As(n):null},Wh=({values:i},t)=>i[t],Yh=({type:i,values:t},e)=>i.precision!==oe.HALF?t[e]:Tl(t[e]),Gh=(i,t)=>i.type.unit===ai.DAY?Yl(i,t):Gl(i,t),Jl=({values:i},t)=>1e3*eo(i,t*2),Ql=({values:i},t)=>eo(i,t*2),Kl=({values:i},t)=>Rh(i,t*2),Zl=({values:i},t)=>Mh(i,t*2),qh=(i,t)=>{switch(i.type.unit){case dt.SECOND:return Jl(i,t);case dt.MILLISECOND:return Ql(i,t);case dt.MICROSECOND:return Kl(i,t);case dt.NANOSECOND:return Zl(i,t)}},Xl=({values:i},t)=>i[t],$l=({values:i},t)=>i[t],tc=({values:i},t)=>i[t],ec=({values:i},t)=>i[t],Jh=(i,t)=>{switch(i.type.unit){case dt.SECOND:return Xl(i,t);case dt.MILLISECOND:return $l(i,t);case dt.MICROSECOND:return tc(i,t);case dt.NANOSECOND:return ec(i,t)}},Qh=({values:i,stride:t},e)=>Zs.decimal(i.subarray(t*e,t*(e+1))),Kh=(i,t)=>{const{valueOffsets:e,stride:n,children:r}=i,{[t*n]:s,[t*n+1]:o}=e,l=r[0].slice(s,o-s);return new mt([l])},Zh=(i,t)=>{const{valueOffsets:e,children:n}=i,{[t]:r,[t+1]:s}=e,o=n[0];return new io(o.slice(r,s-r))},Xh=(i,t)=>new to(i,t),$h=(i,t)=>i.type.mode===me.Dense?ic(i,t):nc(i,t),ic=(i,t)=>{const e=i.type.typeIdToChildIndex[i.typeIds[t]],n=i.children[e];return le.visit(n,i.valueOffsets[t])},nc=(i,t)=>{const e=i.type.typeIdToChildIndex[i.typeIds[t]],n=i.children[e];return le.visit(n,t)},td=(i,t)=>{var e;return(e=i.dictionary)===null||e===void 0?void 0:e.get(i.values[t])},ed=(i,t)=>i.type.unit===mi.DAY_TIME?rc(i,t):sc(i,t),rc=({values:i},t)=>i.subarray(2*t,2*(t+1)),sc=({values:i},t)=>{const e=i[t],n=new Int32Array(2);return n[0]=Math.trunc(e/12),n[1]=Math.trunc(e%12),n},id=(i,t)=>{const{stride:e,children:n}=i,s=n[0].slice(t*e,e);return new mt([s])};G.prototype.visitNull=X(Ph);G.prototype.visitBool=X(xh);G.prototype.visitInt=X(Wh);G.prototype.visitInt8=X(Si);G.prototype.visitInt16=X(Si);G.prototype.visitInt32=X(Si);G.prototype.visitInt64=X(ql);G.prototype.visitUint8=X(Si);G.prototype.visitUint16=X(Si);G.prototype.visitUint32=X(Si);G.prototype.visitUint64=X(ql);G.prototype.visitFloat=X(Yh);G.prototype.visitFloat16=X(Vh);G.prototype.visitFloat32=X(Si);G.prototype.visitFloat64=X(Si);G.prototype.visitUtf8=X(Hh);G.prototype.visitBinary=X(zh);G.prototype.visitFixedSizeBinary=X(jh);G.prototype.visitDate=X(Gh);G.prototype.visitDateDay=X(Yl);G.prototype.visitDateMillisecond=X(Gl);G.prototype.visitTimestamp=X(qh);G.prototype.visitTimestampSecond=X(Jl);G.prototype.visitTimestampMillisecond=X(Ql);G.prototype.visitTimestampMicrosecond=X(Kl);G.prototype.visitTimestampNanosecond=X(Zl);G.prototype.visitTime=X(Jh);G.prototype.visitTimeSecond=X(Xl);G.prototype.visitTimeMillisecond=X($l);G.prototype.visitTimeMicrosecond=X(tc);G.prototype.visitTimeNanosecond=X(ec);G.prototype.visitDecimal=X(Qh);G.prototype.visitList=X(Kh);G.prototype.visitStruct=X(Xh);G.prototype.visitUnion=X($h);G.prototype.visitDenseUnion=X(ic);G.prototype.visitSparseUnion=X(nc);G.prototype.visitDictionary=X(td);G.prototype.visitInterval=X(ed);G.prototype.visitIntervalDayTime=X(rc);G.prototype.visitIntervalYearMonth=X(sc);G.prototype.visitFixedSizeList=X(id);G.prototype.visitMap=X(Zh);const le=new G,Ue=Symbol.for("keys"),sn=Symbol.for("vals");class io{constructor(t){return this[Ue]=new mt([t.children[0]]).memoize(),this[sn]=t.children[1],new Proxy(this,new rd)}[Symbol.iterator](){return new nd(this[Ue],this[sn])}get size(){return this[Ue].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Ue],e=this[sn],n={};for(let r=-1,s=t.length;++r<s;)n[t.get(r)]=le.visit(e,r);return n}toString(){return`{${[...this].map(([t,e])=>`${Nn(t)}: ${Nn(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class nd{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),le.visit(this.vals,t)]})}}class rd{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ue].toArray().map(String)}has(t,e){return t[Ue].includes(e)}getOwnPropertyDescriptor(t,e){if(t[Ue].indexOf(e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[Ue].indexOf(e);if(n!==-1){const r=le.visit(Reflect.get(t,sn),n);return Reflect.set(t,e,r),r}}set(t,e,n){const r=t[Ue].indexOf(e);return r!==-1?(Fe.visit(Reflect.get(t,sn),r,n),Reflect.set(t,e,n)):Reflect.has(t,e)?Reflect.set(t,e,n):!1}}Object.defineProperties(io.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ue]:{writable:!0,enumerable:!1,configurable:!1,value:null},[sn]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Po;function oc(i,t,e,n){const{length:r=0}=i;let s=typeof t!="number"?0:t,o=typeof e!="number"?r:e;return s<0&&(s=(s%r+r)%r),o<0&&(o=(o%r+r)%r),o<s&&(Po=s,s=o,o=Po),o>r&&(o=r),n?n(i,s,o):[s,o]}const xo=i=>i!==i;function bn(i){if(typeof i!=="object"||i===null)return xo(i)?xo:e=>e===i;if(i instanceof Date){const e=i.valueOf();return n=>n instanceof Date?n.valueOf()===e:!1}return ArrayBuffer.isView(i)?e=>e?Zu(i,e):!1:i instanceof Map?od(i):Array.isArray(i)?sd(i):i instanceof mt?ad(i):ld(i,!0)}function sd(i){const t=[];for(let e=-1,n=i.length;++e<n;)t[e]=bn(i[e]);return qr(t)}function od(i){let t=-1;const e=[];for(const n of i.values())e[++t]=bn(n);return qr(e)}function ad(i){const t=[];for(let e=-1,n=i.length;++e<n;)t[e]=bn(i.get(e));return qr(t)}function ld(i,t=!1){const e=Object.keys(i);if(!t&&e.length===0)return()=>!1;const n=[];for(let r=-1,s=e.length;++r<s;)n[r]=bn(i[e[r]]);return qr(n,e)}function qr(i,t){return e=>{if(!e||typeof e!="object")return!1;switch(e.constructor){case Array:return cd(i,e);case Map:return Vo(i,e,e.keys());case io:case to:case Object:case void 0:return Vo(i,e,t||Object.keys(e))}return e instanceof mt?ud(i,e):!1}}function cd(i,t){const e=i.length;if(t.length!==e)return!1;for(let n=-1;++n<e;)if(!i[n](t[n]))return!1;return!0}function ud(i,t){const e=i.length;if(t.length!==e)return!1;for(let n=-1;++n<e;)if(!i[n](t.get(n)))return!1;return!0}function Vo(i,t,e){const n=e[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=i.length;let l=s.next(),c=n.next(),h=r.next();for(;o<a&&!c.done&&!h.done&&!l.done&&!(c.value!==h.value||!i[o](l.value));++o,c=n.next(),h=r.next(),l=s.next());return o===a&&c.done&&h.done&&l.done?!0:(n.return&&n.return(),r.return&&r.return(),s.return&&s.return(),!1)}function ac(i,t,e,n){return(e&1<<n)!==0}function hd(i,t,e,n){return(e&1<<n)>>n}function no(i,t,e){const n=e.byteLength+7&-8;if(i>0||e.byteLength<n){const r=new Uint8Array(n);return r.set(i%8===0?e.subarray(i>>3):_r(new ro(e,i,t,null,ac)).subarray(0,n)),r}return e}function _r(i){const t=[];let e=0,n=0,r=0;for(const o of i)o&&(r|=1<<n),++n===8&&(t[e++]=r,r=n=0);(e===0||n>0)&&(t[e++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class ro{constructor(t,e,n,r,s){this.bytes=t,this.length=n,this.context=r,this.get=s,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ns(i,t,e){if(e-t<=0)return 0;if(e-t<8){let s=0;for(const o of new ro(i,t,e-t,i,hd))s+=o;return s}const n=e>>3<<3,r=t+(t%8===0?0:8-t%8);return Ns(i,t,r)+Ns(i,n,e)+dd(i,r>>3,n-r>>3)}function dd(i,t,e){let n=0,r=Math.trunc(t);const s=new DataView(i.buffer,i.byteOffset,i.byteLength),o=e===void 0?i.byteLength:r+e;for(;o-r>=4;)n+=cs(s.getUint32(r)),r+=4;for(;o-r>=2;)n+=cs(s.getUint16(r)),r+=2;for(;o-r>=1;)n+=cs(s.getUint8(r)),r+=1;return n}function cs(i){let t=Math.trunc(i);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const fd=-1;class It{constructor(t,e,n,r,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let l;s instanceof It?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=ei(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:r,typeIds:s}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,e;return t<=fd&&(e=this.nullBitmap)&&(this._nullCount=t=this.length-Ns(e,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return(this.nullBitmap[e>>3]&1<<e%8)!==0}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:n,offset:r}=this,s=r+t>>3,o=(r+t)%8,a=n[s]>>o&1;return e?a===0&&(n[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(n[s]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,r=this._nullCount,s=this,o=this.children){return new It(t,e,n,r,s,o,this.dictionary)}slice(t,e){const{stride:n,typeId:r,children:s}=this,o=+(this._nullCount===0)-1,a=r===16?n:1,l=this._sliceBuffers(t,e,n,r);return this.clone(this.type,this.offset+t,e,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===m.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);r[e>>3]=(1<<e-(e&-8))-1,n>0&&r.set(no(this.offset,e,this.nullBitmap),0);const s=this.buffers;return s[ti.VALIDITY]=r,this.clone(this.type,0,t,n+(t-e),s)}_sliceBuffers(t,e,n,r){let s;const{buffers:o}=this;return(s=o[ti.TYPE])&&(o[ti.TYPE]=s.subarray(t,t+e)),(s=o[ti.OFFSET])&&(o[ti.OFFSET]=s.subarray(t,t+e+1))||(s=o[ti.DATA])&&(o[ti.DATA]=r===6?s:s.subarray(n*t,n*(t+e))),o}_sliceChildren(t,e,n){return t.map(r=>r.slice(e,n))}}It.prototype.children=Object.freeze([]);class Fn extends ot{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:e,["offset"]:n=0,["length"]:r=0}=t;return new It(e,n,r,0)}visitBool(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitInt(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitFloat(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitUtf8(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.data),s=ht(t.nullBitmap),o=Tn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new It(e,n,a,l,[o,r,s])}visitBinary(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.data),s=ht(t.nullBitmap),o=Tn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new It(e,n,a,l,[o,r,s])}visitFixedSizeBinary(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length/ei(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitDate(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length/ei(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitTimestamp(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length/ei(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitTime(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length/ei(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitDecimal(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length/ei(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitList(t){const{["type"]:e,["offset"]:n=0,["child"]:r}=t,s=ht(t.nullBitmap),o=Tn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new It(e,n,a,l,[o,void 0,s],[r])}visitStruct(t){const{["type"]:e,["offset"]:n=0,["children"]:r=[]}=t,s=ht(t.nullBitmap),{length:o=r.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:e,["offset"]:n=0,["children"]:r=[]}=t,s=ht(t.nullBitmap),o=wt(e.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;if(Y.isSparseUnion(e))return new It(e,n,a,l,[void 0,void 0,s,o],r);const c=Tn(t.valueOffsets);return new It(e,n,a,l,[c,void 0,s,o],r)}visitDictionary(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.indices.ArrayType,t.data),{["dictionary"]:o=new mt([new Fn().visit({type:e.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new It(e,n,a,l,[void 0,s,r],[],o)}visitInterval(t){const{["type"]:e,["offset"]:n=0}=t,r=ht(t.nullBitmap),s=wt(e.ArrayType,t.data),{["length"]:o=s.length/ei(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:e,["offset"]:n=0,["child"]:r=new Fn().visit({type:e.valueType})}=t,s=ht(t.nullBitmap),{["length"]:o=r.length/ei(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new It(e,n,o,a,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:e,["offset"]:n=0,["child"]:r=new Fn().visit({type:e.childType})}=t,s=ht(t.nullBitmap),o=Tn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new It(e,n,a,l,[o,void 0,s],[r])}}function st(i){return new Fn().visit(i)}class jo{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function lc(i){return i.reduce((t,e)=>t+e.nullCount,0)}function cc(i){return i.reduce((t,e,n)=>(t[n+1]=t[n]+e.length,t),new Uint32Array(i.length+1))}function uc(i,t,e,n){const r=[];for(let s=-1,o=i.length;++s<o;){const a=i[s],l=t[s],{length:c}=a;if(l>=n)break;if(e>=l+c)continue;if(l>=e&&l+c<=n){r.push(a);continue}const h=Math.max(0,e-l),u=Math.min(n-l,c);r.push(a.slice(h,u-h))}return r.length===0&&r.push(i[0].slice(0,0)),r}function so(i,t,e,n){let r=0,s=0,o=t.length-1;do{if(r>=o-1)return e<t[o]?n(i,r,e-t[r]):null;s=r+Math.trunc((o-r)*.5),e<t[s]?o=s:r=s}while(r<o)}function oo(i,t){return i.getValid(t)}function on(i){function t(e,n,r){return i(e[n],r)}return function(e){const n=this.data;return so(n,this._offsets,e,t)}}function hc(i){let t;function e(n,r,s){return i(n[r],s,t)}return function(n,r){const s=this.data;t=r;const o=so(s,this._offsets,n,e);return t=void 0,o}}function dc(i){let t;function e(n,r,s){let o=s,a=0,l=0;for(let c=r-1,h=n.length;++c<h;){const u=n[c];if(~(a=i(u,t,o)))return l+a;o=0,l+=u.length}return-1}return function(n,r){t=n;const s=this.data,o=typeof r!="number"?e(s,0,0):so(s,this._offsets,r,e);return t=void 0,o}}class q extends ot{}function md(i,t){return t===null&&i.length>0?0:-1}function pd(i,t){const{nullBitmap:e}=i;if(!e||i.nullCount<=0)return-1;let n=0;for(const r of new ro(e,i.offset+(t||0),i.length,e,ac)){if(!r)return n;++n}return-1}function nt(i,t,e){if(t===void 0)return-1;if(t===null)return pd(i,e);const n=le.getVisitFn(i),r=bn(t);for(let s=(e||0)-1,o=i.length;++s<o;)if(r(n(i,s)))return s;return-1}function fc(i,t,e){const n=le.getVisitFn(i),r=bn(t);for(let s=(e||0)-1,o=i.length;++s<o;)if(r(n(i,s)))return s;return-1}q.prototype.visitNull=md;q.prototype.visitBool=nt;q.prototype.visitInt=nt;q.prototype.visitInt8=nt;q.prototype.visitInt16=nt;q.prototype.visitInt32=nt;q.prototype.visitInt64=nt;q.prototype.visitUint8=nt;q.prototype.visitUint16=nt;q.prototype.visitUint32=nt;q.prototype.visitUint64=nt;q.prototype.visitFloat=nt;q.prototype.visitFloat16=nt;q.prototype.visitFloat32=nt;q.prototype.visitFloat64=nt;q.prototype.visitUtf8=nt;q.prototype.visitBinary=nt;q.prototype.visitFixedSizeBinary=nt;q.prototype.visitDate=nt;q.prototype.visitDateDay=nt;q.prototype.visitDateMillisecond=nt;q.prototype.visitTimestamp=nt;q.prototype.visitTimestampSecond=nt;q.prototype.visitTimestampMillisecond=nt;q.prototype.visitTimestampMicrosecond=nt;q.prototype.visitTimestampNanosecond=nt;q.prototype.visitTime=nt;q.prototype.visitTimeSecond=nt;q.prototype.visitTimeMillisecond=nt;q.prototype.visitTimeMicrosecond=nt;q.prototype.visitTimeNanosecond=nt;q.prototype.visitDecimal=nt;q.prototype.visitList=nt;q.prototype.visitStruct=nt;q.prototype.visitUnion=nt;q.prototype.visitDenseUnion=fc;q.prototype.visitSparseUnion=fc;q.prototype.visitDictionary=nt;q.prototype.visitInterval=nt;q.prototype.visitIntervalDayTime=nt;q.prototype.visitIntervalYearMonth=nt;q.prototype.visitFixedSizeList=nt;q.prototype.visitMap=nt;const wr=new q;class J extends ot{}function $(i){const{type:t}=i;if(i.nullCount===0&&i.stride===1&&(t.typeId===m.Timestamp||t instanceof yi&&t.bitWidth!==64||t instanceof Ln&&t.bitWidth!==64||t instanceof Dn&&t.precision!==oe.HALF))return new jo(i.data.length,n=>{const r=i.data[n];return r.values.subarray(0,r.length)[Symbol.iterator]()});let e=0;return new jo(i.data.length,n=>{const s=i.data[n].length,o=i.slice(e,e+s);return e+=s,new yd(o)})}class yd{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}J.prototype.visitNull=$;J.prototype.visitBool=$;J.prototype.visitInt=$;J.prototype.visitInt8=$;J.prototype.visitInt16=$;J.prototype.visitInt32=$;J.prototype.visitInt64=$;J.prototype.visitUint8=$;J.prototype.visitUint16=$;J.prototype.visitUint32=$;J.prototype.visitUint64=$;J.prototype.visitFloat=$;J.prototype.visitFloat16=$;J.prototype.visitFloat32=$;J.prototype.visitFloat64=$;J.prototype.visitUtf8=$;J.prototype.visitBinary=$;J.prototype.visitFixedSizeBinary=$;J.prototype.visitDate=$;J.prototype.visitDateDay=$;J.prototype.visitDateMillisecond=$;J.prototype.visitTimestamp=$;J.prototype.visitTimestampSecond=$;J.prototype.visitTimestampMillisecond=$;J.prototype.visitTimestampMicrosecond=$;J.prototype.visitTimestampNanosecond=$;J.prototype.visitTime=$;J.prototype.visitTimeSecond=$;J.prototype.visitTimeMillisecond=$;J.prototype.visitTimeMicrosecond=$;J.prototype.visitTimeNanosecond=$;J.prototype.visitDecimal=$;J.prototype.visitList=$;J.prototype.visitStruct=$;J.prototype.visitUnion=$;J.prototype.visitDenseUnion=$;J.prototype.visitSparseUnion=$;J.prototype.visitDictionary=$;J.prototype.visitInterval=$;J.prototype.visitIntervalDayTime=$;J.prototype.visitIntervalYearMonth=$;J.prototype.visitFixedSizeList=$;J.prototype.visitMap=$;const ao=new J,bd=(i,t)=>i+t;class Ei extends ot{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return(t.type.unit+1)*4}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===dt.SECOND?4:8}visitInterval(t,e){return(t.type.unit+1)*4}visitStruct(t,e){return t.children.reduce((n,r)=>n+Qe.visit(r,e),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce((n,r)=>n+Qe.visit(r,e),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+(((n=t.dictionary)===null||n===void 0?void 0:n.getByteLength(t.values[e]))||0)}}const gd=({valueOffsets:i},t)=>8+(i[t+1]-i[t]),_d=({valueOffsets:i},t)=>8+(i[t+1]-i[t]),wd=({valueOffsets:i,stride:t,children:e},n)=>{const r=e[0],{[n*t]:s}=i,{[n*t+1]:o}=i,a=Qe.getVisitFn(r.type),l=r.slice(s,o-s);let c=8;for(let h=-1,u=o-s;++h<u;)c+=a(l,h);return c},vd=({stride:i,children:t},e)=>{const n=t[0],r=n.slice(e*i,i),s=Qe.getVisitFn(n.type);let o=0;for(let a=-1,l=r.length;++a<l;)o+=s(r,a);return o},Id=(i,t)=>i.type.mode===me.Dense?mc(i,t):pc(i,t),mc=({type:i,children:t,typeIds:e,valueOffsets:n},r)=>{const s=i.typeIdToChildIndex[e[r]];return 8+Qe.visit(t[s],n[r])},pc=({children:i},t)=>4+Qe.visitMany(i,i.map(()=>t)).reduce(bd,0);Ei.prototype.visitUtf8=gd;Ei.prototype.visitBinary=_d;Ei.prototype.visitList=wd;Ei.prototype.visitFixedSizeList=vd;Ei.prototype.visitUnion=Id;Ei.prototype.visitDenseUnion=mc;Ei.prototype.visitSparseUnion=pc;const Qe=new Ei;var yc;const bc={},gc={};class mt{constructor(t){var e,n,r;const s=t[0]instanceof mt?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof It)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(e=s[0])===null||e===void 0?void 0:e.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c,byteLength:h}=bc[o.typeId],u=s[0];this.isValid=d=>oo(u,d),this.get=d=>a(u,d),this.set=(d,y)=>l(u,d,y),this.indexOf=d=>c(u,d),this.getByteLength=d=>h(u,d),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,gc[o.typeId]),this._offsets=cc(s);break}this.data=s,this.type=o,this.stride=ei(o),this.numChildren=(r=(n=o.children)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,e)=>t+e.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=lc(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${m[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return ao.visit(this)}concat(...t){return new mt(this.data.concat(t.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new mt(oc(this,t,e,({data:n,_offsets:r},s,o)=>uc(n,r,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:r,ArrayType:s}=this;switch(t.typeId){case m.Int:case m.Float:case m.Decimal:case m.Time:case m.Timestamp:switch(e.length){case 0:return new s;case 1:return e[0].values.subarray(0,n*r);default:return e.reduce((o,{values:a})=>(o.array.set(a,o.offset),o.offset+=a.length,o),{array:new s(n*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt((e=this.type.children)===null||e===void 0?void 0:e.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mt(this.data.map(({children:e})=>e[t])):null}get isMemoized(){return Y.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Y.isDictionary(this.type)){const t=new vr(this.data[0].dictionary),e=this.data.map(n=>{const r=n.clone();return r.dictionary=t,r});return new mt(e)}return new vr(this)}unmemoize(){if(Y.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map(n=>{const r=n.clone();return r.dictionary=t,r});return new mt(e)}return this}}yc=Symbol.toStringTag;mt[yc]=(i=>{i.type=Y.prototype,i.data=[],i.length=0,i.stride=1,i.numChildren=0,i._nullCount=-1,i._byteLength=-1,i._offsets=new Uint32Array([0]),i[Symbol.isConcatSpreadable]=!0;const t=Object.keys(m).map(e=>m[e]).filter(e=>typeof e=="number"&&e!==m.NONE);for(const e of t){const n=le.getVisitFnByTypeId(e),r=Fe.getVisitFnByTypeId(e),s=wr.getVisitFnByTypeId(e),o=Qe.getVisitFnByTypeId(e);bc[e]={get:n,set:r,indexOf:s,byteLength:o},gc[e]=Object.create(i,{isValid:{value:on(oo)},get:{value:on(le.getVisitFnByTypeId(e))},set:{value:hc(Fe.getVisitFnByTypeId(e))},indexOf:{value:dc(wr.getVisitFnByTypeId(e))},getByteLength:{value:on(Qe.getVisitFnByTypeId(e))}})}return"Vector"})(mt.prototype);class vr extends mt{constructor(t){super(t.data);const e=this.get,n=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=e.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){n.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new vr(r.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Bs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const us=2,Ce=4,ii=4,vt=4,hi=new Int32Array(2),zo=new Float32Array(hi.buffer),Ho=new Float64Array(hi.buffer),Qn=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;class Ae{constructor(t,e){this.low=t|0,this.high=e|0}static create(t,e){return t==0&&e==0?Ae.ZERO:new Ae(t,e)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}}Ae.ZERO=new Ae(0,0);var ks;(function(i){i[i.UTF8_BYTES=1]="UTF8_BYTES",i[i.UTF16_STRING=2]="UTF16_STRING"})(ks||(ks={}));class bi{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new bi(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Ae(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Ae(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return hi[0]=this.readInt32(t),zo[0]}readFloat64(t){return hi[Qn?0:1]=this.readInt32(t),hi[Qn?1:0]=this.readInt32(t+4),Ho[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){zo[0]=e,this.writeInt32(t,hi[0])}writeFloat64(t,e){Ho[0]=e,this.writeInt32(t,hi[Qn?0:1]),this.writeInt32(t+4,hi[Qn?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ce+ii)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<ii;e++)t+=String.fromCharCode(this.readInt8(this.position_+Ce+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let r="",s=0;if(t+=Ce,e===ks.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;s<n;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const l=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|l&63;else{const c=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|c&63;else{const h=this.readUint8(t+s++);o=(a&7)<<18|(l&63)<<12|(c&63)<<6|h&63}}}o<65536?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode((o>>10)+55296,(o&(1<<10)-1)+56320))}return r}__union_with_string(t,e){return typeof t=="string"?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Ce}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=ii)throw new Error("FlatBuffers: file identifier must be length "+ii);for(let e=0;e<ii;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+Ce+e))return!1;return!0}createLong(t,e){return Ae.create(t,e)}createScalarList(t,e){const n=[];for(let r=0;r<e;++r)t(r)!==null&&n.push(t(r));return n}createObjList(t,e){const n=[];for(let r=0;r<e;++r){const s=t(r);s!==null&&n.push(s.unpack())}return n}}class Jr{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let e;t?e=t:e=1024,this.bb=bi.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const n=~(this.bb.capacity()-this.space+e)+1&t-1;for(;this.space<n+t+e;){const r=this.bb.capacity();this.bb=Jr.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){(this.force_defaults||!e.equals(n))&&(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,r=bi.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r}addOffset(t){this.prep(Ce,0),this.writeInt32(this.offset()-t+Ce)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&this.vtable[e]==0;e--);const n=e+1;for(;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);const r=2;this.addInt16(t-this.object_start);const s=(n+r)*us;this.addInt16(s);let o=0;const a=this.space;t:for(e=0;e<this.vtables.length;e++){const l=this.bb.capacity()-this.vtables[e];if(s==this.bb.readInt16(l)){for(let c=us;c<s;c+=us)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;o=this.vtables[e];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const r=n?vt:0;if(e){const s=e;if(this.prep(this.minalign,Ce+ii+r),s.length!=ii)throw new Error("FlatBuffers: file identifier must be length "+ii);for(let o=ii-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Ce+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(!(this.bb.readInt16(r+e)!=0))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(Ce,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let r;const s=t.charCodeAt(n++);if(s<55296||s>=56320)r=s;else{const o=t.charCodeAt(n++);r=(s<<10)+o+(65536-(55296<<10)-56320)}r<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(r&63|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let n=0,r=this.space,s=this.bb.bytes();n<e.length;n++)s[r++]=e[n];return this.endVector()}createLong(t,e){return Ae.create(t,e)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(r!==null)e.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class Vt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new Vt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+vt),(e||new Vt).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return Vt.startKeyValue(t),Vt.addKey(t,e),Vt.addValue(t,n),Vt.endKeyValue(t)}}var un;(function(i){i[i.V1=0]="V1",i[i.V2=1]="V2",i[i.V3=2]="V3",i[i.V4=3]="V4",i[i.V5=4]="V5"})(un||(un={}));var hn;(function(i){i[i.Little=0]="Little",i[i.Big=1]="Big"})(hn||(hn={}));var Ir;(function(i){i[i.DenseArray=0]="DenseArray"})(Ir||(Ir={}));class de{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new de).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+vt),(e||new de).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return de.startInt(t),de.addBitWidth(t,e),de.addIsSigned(t,n),de.endInt(t)}}class ni{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new ni).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+vt),(e||new ni).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new de).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Ir.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,Ir.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class ki{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new ki).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+vt),(e||new ki).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return ki.startBinary(t),ki.endBinary(t)}}class Di{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new Di).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+vt),(e||new Di).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Di.startBool(t),Di.endBool(t)}}var Sr;(function(i){i[i.DAY=0]="DAY",i[i.MILLISECOND=1]="MILLISECOND"})(Sr||(Sr={}));class Pe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new Pe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+vt),(e||new Pe).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Sr.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Sr.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return Pe.startDate(t),Pe.addUnit(t,e),Pe.endDate(t)}}class re{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new re).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+vt),(e||new re).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,r){return re.startDecimal(t),re.addPrecision(t,e),re.addScale(t,n),re.addBitWidth(t,r),re.endDecimal(t)}}var dn;(function(i){i[i.SECOND=0]="SECOND",i[i.MILLISECOND=1]="MILLISECOND",i[i.MICROSECOND=2]="MICROSECOND",i[i.NANOSECOND=3]="NANOSECOND"})(dn||(dn={}));class xe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new xe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+vt),(e||new xe).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return xe.startFixedSizeBinary(t),xe.addByteWidth(t,e),xe.endFixedSizeBinary(t)}}class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new Ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+vt),(e||new Ve).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return Ve.startFixedSizeList(t),Ve.addListSize(t,e),Ve.endFixedSizeList(t)}}var Er;(function(i){i[i.HALF=0]="HALF",i[i.SINGLE=1]="SINGLE",i[i.DOUBLE=2]="DOUBLE"})(Er||(Er={}));class je{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new je).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+vt),(e||new je).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Er.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Er.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return je.startFloatingPoint(t),je.addPrecision(t,e),je.endFloatingPoint(t)}}var Ar;(function(i){i[i.YEAR_MONTH=0]="YEAR_MONTH",i[i.DAY_TIME=1]="DAY_TIME",i[i.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ar||(Ar={}));class ze{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new ze).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+vt),(e||new ze).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ar.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Ar.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return ze.startInterval(t),ze.addUnit(t,e),ze.endInterval(t)}}class Li{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new Li).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+vt),(e||new Li).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Li.startList(t),Li.endList(t)}}class He{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new He).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+vt),(e||new He).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return He.startMap(t),He.addKeysSorted(t,e),He.endMap(t)}}class Ri{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new Ri).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+vt),(e||new Ri).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Ri.startNull(t),Ri.endNull(t)}}class Mi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new Mi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+vt),(e||new Mi).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Mi.startStruct_(t),Mi.endStruct_(t)}}class Se{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new Se).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+vt),(e||new Se).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dn.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,dn.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return Se.startTime(t),Se.addUnit(t,e),Se.addBitWidth(t,n),Se.endTime(t)}}class Ee{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new Ee).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+vt),(e||new Ee).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dn.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,dn.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return Ee.startTimestamp(t),Ee.addUnit(t,e),Ee.addTimezone(t,n),Ee.endTimestamp(t)}}var Tr;(function(i){i[i.Sparse=0]="Sparse",i[i.Dense=1]="Dense"})(Tr||(Tr={}));class se{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new se).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+vt),(e||new se).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Tr.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Tr.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return se.startUnion(t),se.addMode(t,e),se.addTypeIds(t,n),se.endUnion(t)}}class Ui{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Ui).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+vt),(e||new Ui).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Ui.startUtf8(t),Ui.endUtf8(t)}}var Bt;(function(i){i[i.NONE=0]="NONE",i[i.Null=1]="Null",i[i.Int=2]="Int",i[i.FloatingPoint=3]="FloatingPoint",i[i.Binary=4]="Binary",i[i.Utf8=5]="Utf8",i[i.Bool=6]="Bool",i[i.Decimal=7]="Decimal",i[i.Date=8]="Date",i[i.Time=9]="Time",i[i.Timestamp=10]="Timestamp",i[i.Interval=11]="Interval",i[i.List=12]="List",i[i.Struct_=13]="Struct_",i[i.Union=14]="Union",i[i.FixedSizeBinary=15]="FixedSizeBinary",i[i.FixedSizeList=16]="FixedSizeList",i[i.Map=17]="Map",i[i.Duration=18]="Duration",i[i.LargeBinary=19]="LargeBinary",i[i.LargeUtf8=20]="LargeUtf8",i[i.LargeList=21]="LargeList"})(Bt||(Bt={}));class Kt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new Kt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+vt),(e||new Kt).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Bt.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new ni).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new Kt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new Vt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,Bt.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class Pt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new Pt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+vt),(e||new Pt).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hn.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Kt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Vt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,hn.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,r,s){return Pt.startSchema(t),Pt.addEndianness(t,e),Pt.addFields(t,n),Pt.addCustomMetadata(t,r),Pt.addFeatures(t,s),Pt.endSchema(t)}}class he{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new he).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+vt),(e||new he).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):un.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Pt).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Bs).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Bs).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Vt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,un.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}class pt{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=Ds(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter(r=>e.has(r.name));return new pt(n,this.metadata)}selectAt(t){const e=t.map(n=>this.fields[n]).filter(Boolean);return new pt(e,this.metadata)}assign(...t){const e=t[0]instanceof pt?t[0]:Array.isArray(t[0])?new pt(t[0]):new pt(t),n=[...this.fields],r=Kn(Kn(new Map,this.metadata),e.metadata),s=e.fields.filter(a=>{const l=n.findIndex(c=>c.name===a.name);return~l?(n[l]=a.clone({metadata:Kn(Kn(new Map,n[l].metadata),a.metadata)}))&&!1:!0}),o=Ds(s,new Map);return new pt([...n,...s],r,new Map([...this.dictionaries,...o]))}}pt.prototype.fields=null;pt.prototype.metadata=null;pt.prototype.dictionaries=null;class Tt{constructor(t,e,n=!1,r){this.name=t,this.type=e,this.nullable=n,this.metadata=r||new Map}static new(...t){let[e,n,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:e}=t[0],n===void 0&&(n=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Tt(`${e}`,n,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,r,s]=t;return!t[0]||typeof t[0]!="object"?[e=this.name,n=this.type,r=this.nullable,s=this.metadata]=t:{name:e=this.name,type:n=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],Tt.new(e,n,r,s)}}Tt.prototype.type=null;Tt.prototype.name=null;Tt.prototype.nullable=null;Tt.prototype.metadata=null;function Kn(i,t){return new Map([...i||new Map,...t||new Map])}function Ds(i,t=new Map){for(let e=-1,n=i.length;++e<n;){const s=i[e].type;if(Y.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Ds(s.children,t)}return t}var Wo=Ae,Sd=Jr,Ed=bi;class Rn{constructor(t,e=fe.V4,n,r){this.schema=t,this.version=e,n&&(this._recordBatches=n),r&&(this._dictionaryBatches=r)}static decode(t){t=new Ed(ht(t));const e=he.getRootAsFooter(t),n=pt.decode(e.schema());return new Ad(n,e)}static encode(t){const e=new Sd,n=pt.encode(e,t.schema);he.startRecordBatchesVector(e,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())gi.encode(e,o);const r=e.endVector();he.startDictionariesVector(e,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())gi.encode(e,o);const s=e.endVector();return he.startFooter(e),he.addSchema(e,n),he.addVersion(e,fe.V4),he.addRecordBatches(e,r),he.addDictionaries(e,s),he.finishFooterBuffer(e,he.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Ad extends Rn{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return gi.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return gi.decode(e)}return null}}class gi{constructor(t,e,n){this.metaDataLength=t,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof e=="number"?e:e.low}static decode(t){return new gi(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,r=new Wo(e.offset,0),s=new Wo(e.bodyLength,0);return Bs.createBlock(t,r,n,s)}}const kt=Object.freeze({done:!0,value:void 0});class Yo{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class lo{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Td extends lo{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return z(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(kt);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return we.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return we.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return z(this,void 0,void 0,function*(){return yield this.abort(t),kt})}return(t){return z(this,void 0,void 0,function*(){return yield this.close(),kt})}read(t){return z(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return z(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,n)=>{this.resolvers.push({resolve:e,reject:n})}):Promise.resolve(kt)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ir extends Td{write(t){if((t=ht(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?As(this.toUint8Array(!0)):this.toUint8Array(!1).then(As)}toUint8Array(t=!1){return t?Je(this._values)[0]:(()=>z(this,void 0,void 0,function*(){var e,n;const r=[];let s=0;try{for(var o=Pi(this),a;a=yield o.next(),!a.done;){const l=a.value;r.push(l),s+=l.byteLength}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&(yield n.call(o))}finally{if(e)throw e.error}}return Je(r,s)[0]}))()}}class Fr{constructor(t){t&&(this.source=new Fd(we.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class fn{constructor(t){t instanceof fn?this.source=t.source:t instanceof ir?this.source=new Bi(we.fromAsyncIterable(t)):nl(t)?this.source=new Bi(we.fromNodeStream(t)):Js(t)?this.source=new Bi(we.fromDOMStream(t)):il(t)?this.source=new Bi(we.fromDOMStream(t.body)):Vn(t)?this.source=new Bi(we.fromIterable(t)):zi(t)?this.source=new Bi(we.fromAsyncIterable(t)):yn(t)&&(this.source=new Bi(we.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Fd{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||kt)}return(t){return Object.create(this.source.return&&this.source.return(t)||kt)}}class Bi{constructor(t){this.source=t,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(t){return z(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return z(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return z(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,e="read"){return z(this,void 0,void 0,function*(){return yield this.source.next({cmd:e,size:t})})}throw(t){return z(this,void 0,void 0,function*(){const e=this.source.throw&&(yield this.source.throw(t))||kt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}return(t){return z(this,void 0,void 0,function*(){const e=this.source.return&&(yield this.source.return(t))||kt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}}class Go extends Fr{constructor(t,e){super(),this.position=0,this.buffer=ht(t),this.size=typeof e>"u"?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:r}=this;return e&&r<n?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,r+Math.min(n-r,t)),e.subarray(r,this.position)):null}readAt(t,e){const n=this.buffer,r=Math.min(this.size,t+e);return n?n.subarray(t,r):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Or extends fn{constructor(t,e){super(),this.position=0,this._handle=t,typeof e=="number"?this.size=e:this._pending=(()=>z(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return z(this,void 0,void 0,function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)})}seek(t){return z(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return z(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:r}=this;if(e&&r<n){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,o=0,a=0;const l=Math.min(n,s+Math.min(n-s,t)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield e.read(c,o,c.byteLength-o,s));return c}return null})}readAt(t,e){return z(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r}=this;if(n&&t+e<r){const s=Math.min(r,t+e),o=new Uint8Array(s-t);return(yield n.read(o,0,e,t)).buffer}return new Uint8Array(e)})}close(){return z(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return z(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return z(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Od=1<<16;function tn(i){return i<0&&(i=4294967295+i+1),`0x${i.toString(16)}`}const mn=8,co=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class _c{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=e[3]*n[3];this.buffer[0]=r&65535;let s=r>>>16;return r=e[2]*n[3],s+=r,r=e[3]*n[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?Od:0,this.buffer[1]+=s>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${tn(this.buffer[1])} ${tn(this.buffer[0])}`}}class bt extends _c{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return bt.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return bt.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.length,r=new bt(e);for(let s=0;s<n;){const o=mn<n-s?mn:n-s,a=new bt(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),l=new bt(new Uint32Array([co[o],0]));r.times(l),r.plus(a),s+=o}return r}static convertArray(t){const e=new Uint32Array(t.length*2);for(let n=-1,r=t.length;++n<r;)bt.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new bt(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new bt(new Uint32Array(t.buffer)).plus(e)}}class ne extends _c{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return ne.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return ne.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.startsWith("-"),r=t.length,s=new ne(e);for(let o=n?1:0;o<r;){const a=mn<r-o?mn:r-o,l=new ne(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),c=new ne(new Uint32Array([co[a],0]));s.times(c),s.plus(l),o+=a}return n?s.negate():s}static convertArray(t){const e=new Uint32Array(t.length*2);for(let n=-1,r=t.length;++n<r;)ne.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new ne(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ne(new Uint32Array(t.buffer)).plus(e)}}class Me{constructor(t){this.buffer=t}high(){return new ne(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ne(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const e=new bt(new Uint32Array([this.buffer[3],0])),n=new bt(new Uint32Array([this.buffer[2],0])),r=new bt(new Uint32Array([this.buffer[1],0])),s=new bt(new Uint32Array([this.buffer[0],0])),o=new bt(new Uint32Array([t.buffer[3],0])),a=new bt(new Uint32Array([t.buffer[2],0])),l=new bt(new Uint32Array([t.buffer[1],0])),c=new bt(new Uint32Array([t.buffer[0],0]));let h=bt.multiply(s,c);this.buffer[0]=h.low();const u=new bt(new Uint32Array([h.high(),0]));return h=bt.multiply(r,c),u.plus(h),h=bt.multiply(s,l),u.plus(h),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(h)?1:0,this.buffer[2]=u.high(),new bt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(bt.multiply(n,c)).plus(bt.multiply(r,l)).plus(bt.multiply(s,a)),this.buffer[3]+=bt.multiply(e,c).plus(bt.multiply(n,l)).plus(bt.multiply(r,a)).plus(bt.multiply(s,o)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${tn(this.buffer[3])} ${tn(this.buffer[2])} ${tn(this.buffer[1])} ${tn(this.buffer[0])}`}static multiply(t,e){return new Me(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Me(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return Me.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return Me.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const n=t.startsWith("-"),r=t.length,s=new Me(e);for(let o=n?1:0;o<r;){const a=mn<r-o?mn:r-o,l=new Me(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),c=new Me(new Uint32Array([co[a],0,0,0]));s.times(c),s.plus(l),o+=a}return n?s.negate():s}static convertArray(t){const e=new Uint32Array(t.length*4);for(let n=-1,r=t.length;++n<r;)Me.from(t[n],new Uint32Array(e.buffer,e.byteOffset+4*4*n,4));return e}}class wc extends ot{constructor(t,e,n,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=r}visit(t){return super.visit(t instanceof Tt?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return st({type:t,length:e})}visitBool(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===me.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:e,nullCount:n}=this.nextFieldNode()){return st({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,n=this.nextBufferRange()){return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Nd extends wc{constructor(t,e,n,r){super(new Uint8Array(0),e,n,r),this.sources=t}readNullBitmap(t,e,{offset:n}=this.nextBufferRange()){return e<=0?new Uint8Array(0):_r(this.sources[n])}readOffsets(t,{offset:e}=this.nextBufferRange()){return wt(Uint8Array,wt(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return wt(Uint8Array,wt(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:n}=this;return Y.isTimestamp(t)||(Y.isInt(t)||Y.isTime(t))&&t.bitWidth===64||Y.isDate(t)&&t.unit===ai.MILLISECOND?wt(Uint8Array,ne.convertArray(n[e])):Y.isDecimal(t)?wt(Uint8Array,Me.convertArray(n[e])):Y.isBinary(t)||Y.isFixedSizeBinary(t)?Bd(n[e]):Y.isBool(t)?_r(n[e]):Y.isUtf8(t)?Gs(n[e].join("")):wt(Uint8Array,wt(t.ArrayType,n[e].map(r=>+r)))}}function Bd(i){const t=i.join(""),e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n>>1]=Number.parseInt(t.slice(n,n+2),16);return e}class Q extends ot{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((n,r)=>this.compareFields(n,e[r]))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function ce(i,t){return t instanceof i.constructor}function jn(i,t){return i===t||ce(i,t)}function ui(i,t){return i===t||ce(i,t)&&i.bitWidth===t.bitWidth&&i.isSigned===t.isSigned}function Qr(i,t){return i===t||ce(i,t)&&i.precision===t.precision}function kd(i,t){return i===t||ce(i,t)&&i.byteWidth===t.byteWidth}function uo(i,t){return i===t||ce(i,t)&&i.unit===t.unit}function zn(i,t){return i===t||ce(i,t)&&i.unit===t.unit&&i.timezone===t.timezone}function Hn(i,t){return i===t||ce(i,t)&&i.unit===t.unit&&i.bitWidth===t.bitWidth}function Dd(i,t){return i===t||ce(i,t)&&i.children.length===t.children.length&&_i.compareManyFields(i.children,t.children)}function Ld(i,t){return i===t||ce(i,t)&&i.children.length===t.children.length&&_i.compareManyFields(i.children,t.children)}function ho(i,t){return i===t||ce(i,t)&&i.mode===t.mode&&i.typeIds.every((e,n)=>e===t.typeIds[n])&&_i.compareManyFields(i.children,t.children)}function Rd(i,t){return i===t||ce(i,t)&&i.id===t.id&&i.isOrdered===t.isOrdered&&_i.visit(i.indices,t.indices)&&_i.visit(i.dictionary,t.dictionary)}function fo(i,t){return i===t||ce(i,t)&&i.unit===t.unit}function Md(i,t){return i===t||ce(i,t)&&i.listSize===t.listSize&&i.children.length===t.children.length&&_i.compareManyFields(i.children,t.children)}function Ud(i,t){return i===t||ce(i,t)&&i.keysSorted===t.keysSorted&&i.children.length===t.children.length&&_i.compareManyFields(i.children,t.children)}Q.prototype.visitNull=jn;Q.prototype.visitBool=jn;Q.prototype.visitInt=ui;Q.prototype.visitInt8=ui;Q.prototype.visitInt16=ui;Q.prototype.visitInt32=ui;Q.prototype.visitInt64=ui;Q.prototype.visitUint8=ui;Q.prototype.visitUint16=ui;Q.prototype.visitUint32=ui;Q.prototype.visitUint64=ui;Q.prototype.visitFloat=Qr;Q.prototype.visitFloat16=Qr;Q.prototype.visitFloat32=Qr;Q.prototype.visitFloat64=Qr;Q.prototype.visitUtf8=jn;Q.prototype.visitBinary=jn;Q.prototype.visitFixedSizeBinary=kd;Q.prototype.visitDate=uo;Q.prototype.visitDateDay=uo;Q.prototype.visitDateMillisecond=uo;Q.prototype.visitTimestamp=zn;Q.prototype.visitTimestampSecond=zn;Q.prototype.visitTimestampMillisecond=zn;Q.prototype.visitTimestampMicrosecond=zn;Q.prototype.visitTimestampNanosecond=zn;Q.prototype.visitTime=Hn;Q.prototype.visitTimeSecond=Hn;Q.prototype.visitTimeMillisecond=Hn;Q.prototype.visitTimeMicrosecond=Hn;Q.prototype.visitTimeNanosecond=Hn;Q.prototype.visitDecimal=jn;Q.prototype.visitList=Dd;Q.prototype.visitStruct=Ld;Q.prototype.visitUnion=ho;Q.prototype.visitDenseUnion=ho;Q.prototype.visitSparseUnion=ho;Q.prototype.visitDictionary=Rd;Q.prototype.visitInterval=fo;Q.prototype.visitIntervalDayTime=fo;Q.prototype.visitIntervalYearMonth=fo;Q.prototype.visitFixedSizeList=Md;Q.prototype.visitMap=Ud;const _i=new Q;function Ls(i,t){return _i.compareSchemas(i,t)}function hs(i,t){return Cd(i,t.map(e=>e.data.concat()))}function Cd(i,t){const e=[...i.fields],n=[],r={numBatches:t.reduce((u,d)=>Math.max(u,d.length),0)};let s=0,o=0,a=-1;const l=t.length;let c,h=[];for(;r.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)h[a]=c=t[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(h=Pd(e,o,h,t,r),o>0&&(n[s++]=st({type:new ee(e),length:o,nullCount:0,children:h.slice()})))}return[i=i.assign(e),n.map(u=>new jt(i,u))]}function Pd(i,t,e,n,r){var s;const o=(t+63&-64)>>3;for(let a=-1,l=n.length;++a<l;){const c=e[a],h=c==null?void 0:c.length;if(h>=t)h===t?e[a]=c:(e[a]=c.slice(0,t),r.numBatches=Math.max(r.numBatches,n[a].unshift(c.slice(t,h-t))));else{const u=i[a];i[a]=u.clone({nullable:!0}),e[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:st({type:u.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return e}var vc;class te{constructor(...t){var e,n;if(t.length===0)return this.batches=[],this.schema=new pt([]),this._offsets=[0],this;let r,s;t[0]instanceof pt&&(r=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof jt)return[l];if(l instanceof te)return l.batches;if(l instanceof It){if(l.type instanceof ee)return[new jt(new pt(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),h=c.map(y=>new mt([l[y]])),u=new pt(c.map((y,S)=>new Tt(String(y),h[S].type))),[,d]=hs(u,h);return d.length===0?[new jt(l)]:d}}}return[]},a=t.flatMap(l=>o(l));if(r=(n=r!=null?r:(e=a[0])===null||e===void 0?void 0:e.schema)!==null&&n!==void 0?n:new pt([]),!(r instanceof pt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof jt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ls(r,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=a,this._offsets=s!=null?s:cc(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,e)=>t+e.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=lc(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?ao.visit(new mt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap(({data:r})=>r));return new te(e,n.map(r=>new jt(e,r)))}slice(t,e){const n=this.schema;[t,e]=oc({length:this.numRows},t,e);const r=uc(this.data,this._offsets,t,e);return new te(n,r.map(s=>new jt(n,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(e=>e.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map(n=>n.children[t]);if(e.length===0){const{type:n}=this.schema.fields[t],r=st({type:n,length:0,nullCount:0});e.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new mt(e)}return null}setChild(t,e){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t),e)}setChildAt(t,e){let n=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new mt([st({type:new pi,length:this.numRows})]));const s=n.fields.slice(),o=s[t].clone({type:e.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[t],a[t]]=[o,e],[n,r]=hs(n,a)}return new te(n,r)}select(t){const e=this.schema.fields.reduce((n,r,s)=>n.set(r.name,s),new Map);return this.selectAt(t.map(n=>e.get(n)).filter(n=>n>-1))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map(r=>r.selectAt(t));return new te(e,n)}assign(t){const e=this.schema.fields,[n,r]=t.schema.fields.reduce((a,l,c)=>{const[h,u]=a,d=e.findIndex(y=>y.name===l.name);return~d?u[d]=c:h.push(c),a},[[],[]]),s=this.schema.assign(t.schema),o=[...e.map((a,l)=>[l,r[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...n.map(a=>t.getChildAt(a))].filter(Boolean);return new te(...hs(s,o))}}vc=Symbol.toStringTag;te[vc]=(i=>(i.schema=null,i.batches=[],i._offsets=new Uint32Array([0]),i._nullCount=-1,i[Symbol.isConcatSpreadable]=!0,i.isValid=on(oo),i.get=on(le.getVisitFn(m.Struct)),i.set=hc(Fe.getVisitFn(m.Struct)),i.indexOf=dc(wr.getVisitFn(m.Struct)),i.getByteLength=on(Qe.getVisitFn(m.Struct)),"Table"))(te.prototype);var Ic;class jt{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof pt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=st({nullCount:0,type:new ee(this.schema.fields),children:this.schema.fields.map(e=>st({type:e.type,nullCount:0}))})]=t,!(this.data instanceof It))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=qo(this.schema,this.data.children);break}case 1:{const[e]=t,{fields:n,children:r,length:s}=Object.keys(e).reduce((l,c,h)=>(l.children[h]=e[c],l.length=Math.max(l.length,e[c].length),l.fields[h]=Tt.new({name:c,type:e[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new pt(n),a=st({type:new ee(n),length:s,children:r,nullCount:0});[this.schema,this.data]=qo(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Sc(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return le.visit(this.data,t)}set(t,e){return Fe.visit(this.data,t,e)}indexOf(t,e){return wr.visit(this.data,t,e)}getByteLength(t){return Qe.visit(this.data,t)}[Symbol.iterator](){return ao.visit(new mt([this.data]))}toArray(){return[...this]}concat(...t){return new te(this.schema,[this,...t])}slice(t,e){const[n]=new mt([this.data]).slice(t,e).data;return new jt(this.schema,n)}getChild(t){var e;return this.getChildAt((e=this.schema.fields)===null||e===void 0?void 0:e.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mt([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t),e)}setChildAt(t,e){let n=this.schema,r=this.data;if(t>-1&&t<this.numCols){e||(e=new mt([st({type:new pi,length:this.numRows})]));const s=n.fields.slice(),o=r.children.slice(),a=s[t].clone({type:e.type});[s[t],o[t]]=[a,e.data[0]],n=new pt(s,new Map(this.schema.metadata)),r=st({type:new ee(s),children:o})}return new jt(n,r)}select(t){const e=this.schema.select(t),n=new ee(e.fields),r=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(r[o]=this.data.children[o])}return new jt(e,st({type:n,length:this.numRows,children:r}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map(s=>this.data.children[s]).filter(Boolean),r=st({type:new ee(e.fields),length:this.numRows,children:n});return new jt(e,r)}}Ic=Symbol.toStringTag;jt[Ic]=(i=>(i._nullCount=-1,i[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(jt.prototype);function qo(i,t,e=t.reduce((n,r)=>Math.max(n,r.length),0)){var n;const r=[...i.fields],s=[...t],o=(e+63&-64)>>3;for(const[a,l]of i.fields.entries()){const c=t[a];(!c||c.length!==e)&&(r[a]=l.clone({nullable:!0}),s[a]=(n=c==null?void 0:c._changeLengthAndBackfillNullBitmap(e))!==null&&n!==void 0?n:st({type:l.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)}))}return[i.assign(r),st({type:new ee(r),length:e,children:s})]}function Sc(i,t,e=new Map){for(let n=-1,r=i.length;++n<r;){const o=i[n].type,a=t[n];if(Y.isDictionary(o)){if(!e.has(o.id))a.dictionary&&e.set(o.id,a.dictionary);else if(e.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&Sc(o.children,a.children,e)}return e}class mo extends jt{constructor(t){const e=t.fields.map(r=>st({type:r.type})),n=st({type:new ee(t.fields),nullCount:0,children:e});super(t,n)}}var Nr;(function(i){i[i.BUFFER=0]="BUFFER"})(Nr||(Nr={}));var Br;(function(i){i[i.LZ4_FRAME=0]="LZ4_FRAME",i[i.ZSTD=1]="ZSTD"})(Br||(Br={}));class di{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new di).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+vt),(e||new di).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Br.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Nr.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Br.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,Nr.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return di.startBodyCompression(t),di.addCodec(t,e),di.addMethod(t,n),di.endBodyCompression(t)}}class Ec{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class Ac{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+vt),(e||new ve).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Ac).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Ec).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new di).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class ri{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new ri).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+vt),(e||new ri).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new ve).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}var kr;(function(i){i[i.NONE=0]="NONE",i[i.Schema=1]="Schema",i[i.DictionaryBatch=2]="DictionaryBatch",i[i.RecordBatch=3]="RecordBatch",i[i.Tensor=4]="Tensor",i[i.SparseTensor=5]="SparseTensor"})(kr||(kr={}));class Ht{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new Ht).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+vt),(e||new Ht).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):un.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):kr.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Vt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,un.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,kr.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,r,s,o){return Ht.startMessage(t),Ht.addVersion(t,e),Ht.addHeaderType(t,n),Ht.addHeader(t,r),Ht.addBodyLength(t,s),Ht.addCustomMetadata(t,o),Ht.endMessage(t)}}var xd=Ae;class Vd extends ot{visit(t,e){return t==null||e==null?void 0:super.visit(t,e)}visitNull(t,e){return Ri.startNull(e),Ri.endNull(e)}visitInt(t,e){return de.startInt(e),de.addBitWidth(e,t.bitWidth),de.addIsSigned(e,t.isSigned),de.endInt(e)}visitFloat(t,e){return je.startFloatingPoint(e),je.addPrecision(e,t.precision),je.endFloatingPoint(e)}visitBinary(t,e){return ki.startBinary(e),ki.endBinary(e)}visitBool(t,e){return Di.startBool(e),Di.endBool(e)}visitUtf8(t,e){return Ui.startUtf8(e),Ui.endUtf8(e)}visitDecimal(t,e){return re.startDecimal(e),re.addScale(e,t.scale),re.addPrecision(e,t.precision),re.addBitWidth(e,t.bitWidth),re.endDecimal(e)}visitDate(t,e){return Pe.startDate(e),Pe.addUnit(e,t.unit),Pe.endDate(e)}visitTime(t,e){return Se.startTime(e),Se.addUnit(e,t.unit),Se.addBitWidth(e,t.bitWidth),Se.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return Ee.startTimestamp(e),Ee.addUnit(e,t.unit),n!==void 0&&Ee.addTimezone(e,n),Ee.endTimestamp(e)}visitInterval(t,e){return ze.startInterval(e),ze.addUnit(e,t.unit),ze.endInterval(e)}visitList(t,e){return Li.startList(e),Li.endList(e)}visitStruct(t,e){return Mi.startStruct_(e),Mi.endStruct_(e)}visitUnion(t,e){se.startTypeIdsVector(e,t.typeIds.length);const n=se.createTypeIdsVector(e,t.typeIds);return se.startUnion(e),se.addMode(e,t.mode),se.addTypeIds(e,n),se.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return ni.startDictionaryEncoding(e),ni.addId(e,new xd(t.id,0)),ni.addIsOrdered(e,t.isOrdered),n!==void 0&&ni.addIndexType(e,n),ni.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return xe.startFixedSizeBinary(e),xe.addByteWidth(e,t.byteWidth),xe.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return Ve.startFixedSizeList(e),Ve.addListSize(e,t.listSize),Ve.endFixedSizeList(e)}visitMap(t,e){return He.startMap(e),He.addKeysSorted(e,t.keysSorted),He.endMap(e)}}const ds=new Vd;function jd(i,t=new Map){return new pt(Hd(i,t),nr(i.customMetadata),t)}function Tc(i){return new pe(i.count,Fc(i.columns),Oc(i.columns))}function zd(i){return new Ke(Tc(i.data),i.id,i.isDelta)}function Hd(i,t){return(i.fields||[]).filter(Boolean).map(e=>Tt.fromJSON(e,t))}function Jo(i,t){return(i.children||[]).filter(Boolean).map(e=>Tt.fromJSON(e,t))}function Fc(i){return(i||[]).reduce((t,e)=>[...t,new Yi(e.count,Wd(e.VALIDITY)),...Fc(e.children)],[])}function Oc(i,t=[]){for(let e=-1,n=(i||[]).length;++e<n;){const r=i[e];r.VALIDITY&&t.push(new Ye(t.length,r.VALIDITY.length)),r.TYPE&&t.push(new Ye(t.length,r.TYPE.length)),r.OFFSET&&t.push(new Ye(t.length,r.OFFSET.length)),r.DATA&&t.push(new Ye(t.length,r.DATA.length)),t=Oc(r.children,t)}return t}function Wd(i){return(i||[]).reduce((t,e)=>t+ +(e===0),0)}function Yd(i,t){let e,n,r,s,o,a;return!t||!(s=i.dictionary)?(o=Ko(i,Jo(i,t)),r=new Tt(i.name,o,i.nullable,nr(i.customMetadata))):t.has(e=s.id)?(n=(n=s.indexType)?Qo(n):new kn,a=new cn(t.get(e),n,e,s.isOrdered),r=new Tt(i.name,a,i.nullable,nr(i.customMetadata))):(n=(n=s.indexType)?Qo(n):new kn,t.set(e,o=Ko(i,Jo(i,t))),a=new cn(o,n,e,s.isOrdered),r=new Tt(i.name,a,i.nullable,nr(i.customMetadata))),r||null}function nr(i){return new Map(Object.entries(i||{}))}function Qo(i){return new yi(i.isSigned,i.bitWidth)}function Ko(i,t){const e=i.type.name;switch(e){case"NONE":return new pi;case"null":return new pi;case"binary":return new ar;case"utf8":return new lr;case"bool":return new cr;case"list":return new mr((t||[])[0]);case"struct":return new ee(t||[]);case"struct_":return new ee(t||[])}switch(e){case"int":{const n=i.type;return new yi(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=i.type;return new Dn(oe[n.precision])}case"decimal":{const n=i.type;return new ur(n.scale,n.precision,n.bitWidth)}case"date":{const n=i.type;return new hr(ai[n.unit])}case"time":{const n=i.type;return new Ln(dt[n.unit],n.bitWidth)}case"timestamp":{const n=i.type;return new dr(dt[n.unit],n.timezone)}case"interval":{const n=i.type;return new fr(mi[n.unit])}case"union":{const n=i.type;return new pr(me[n.mode],n.typeIds||[],t||[])}case"fixedsizebinary":{const n=i.type;return new yr(n.byteWidth)}case"fixedsizelist":{const n=i.type;return new br(n.listSize,(t||[])[0])}case"map":{const n=i.type;return new gr((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${e}"`)}var Hi=Ae,Gd=Jr,qd=bi;class ie{constructor(t,e,n,r){this._version=e,this._headerType=n,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,e){const n=new ie(0,fe.V4,e);return n._createHeader=Jd(t,e),n}static decode(t){t=new qd(ht(t));const e=Ht.getRootAsMessage(t),n=e.bodyLength(),r=e.version(),s=e.headerType(),o=new ie(n,r,s);return o._createHeader=Qd(e,s),o}static encode(t){const e=new Gd;let n=-1;return t.isSchema()?n=pt.encode(e,t.header()):t.isRecordBatch()?n=pe.encode(e,t.header()):t.isDictionaryBatch()&&(n=Ke.encode(e,t.header())),Ht.startMessage(e),Ht.addVersion(e,fe.V4),Ht.addHeader(e,n),Ht.addHeaderType(e,t.headerType),Ht.addBodyLength(e,new Hi(t.bodyLength,0)),Ht.finishMessageBuffer(e,Ht.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof pt)return new ie(0,fe.V4,ft.Schema,t);if(t instanceof pe)return new ie(e,fe.V4,ft.RecordBatch,t);if(t instanceof Ke)return new ie(e,fe.V4,ft.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ft.Schema}isRecordBatch(){return this.headerType===ft.RecordBatch}isDictionaryBatch(){return this.headerType===ft.DictionaryBatch}}class pe{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Ke{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id=typeof e=="number"?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Ye{constructor(t,e){this.offset=typeof t=="number"?t:t.low,this.length=typeof e=="number"?e:e.low}}class Yi{constructor(t,e){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof e=="number"?e:e.low}}function Jd(i,t){return()=>{switch(t){case ft.Schema:return pt.fromJSON(i);case ft.RecordBatch:return pe.fromJSON(i);case ft.DictionaryBatch:return Ke.fromJSON(i)}throw new Error(`Unrecognized Message type: { name: ${ft[t]}, type: ${t} }`)}}function Qd(i,t){return()=>{switch(t){case ft.Schema:return pt.decode(i.header(new Pt));case ft.RecordBatch:return pe.decode(i.header(new ve),i.version());case ft.DictionaryBatch:return Ke.decode(i.header(new ri),i.version())}throw new Error(`Unrecognized Message type: { name: ${ft[t]}, type: ${t} }`)}}Tt.encode=af;Tt.decode=sf;Tt.fromJSON=Yd;pt.encode=of;pt.decode=Kd;pt.fromJSON=jd;pe.encode=lf;pe.decode=Zd;pe.fromJSON=Tc;Ke.encode=cf;Ke.decode=Xd;Ke.fromJSON=zd;Yi.encode=uf;Yi.decode=tf;Ye.encode=hf;Ye.decode=$d;function Kd(i,t=new Map){const e=rf(i,t);return new pt(e,rr(i),t)}function Zd(i,t=fe.V4){if(i.compression()!==null)throw new Error("Record batch compression not implemented");return new pe(i.length(),ef(i),nf(i,t))}function Xd(i,t=fe.V4){return new Ke(pe.decode(i.data(),t),i.id(),i.isDelta())}function $d(i){return new Ye(i.offset(),i.length())}function tf(i){return new Yi(i.length(),i.nullCount())}function ef(i){const t=[];for(let e,n=-1,r=-1,s=i.nodesLength();++n<s;)(e=i.nodes(n))&&(t[++r]=Yi.decode(e));return t}function nf(i,t){const e=[];for(let n,r=-1,s=-1,o=i.buffersLength();++r<o;)(n=i.buffers(r))&&(t<fe.V4&&(n.bb_pos+=8*(r+1)),e[++s]=Ye.decode(n));return e}function rf(i,t){const e=[];for(let n,r=-1,s=-1,o=i.fieldsLength();++r<o;)(n=i.fields(r))&&(e[++s]=Tt.decode(n,t));return e}function Zo(i,t){const e=[];for(let n,r=-1,s=-1,o=i.childrenLength();++r<o;)(n=i.children(r))&&(e[++s]=Tt.decode(n,t));return e}function sf(i,t){let e,n,r,s,o,a;return!t||!(a=i.dictionary())?(r=$o(i,Zo(i,t)),n=new Tt(i.name(),r,i.nullable(),rr(i))):t.has(e=a.id().low)?(s=(s=a.indexType())?Xo(s):new kn,o=new cn(t.get(e),s,e,a.isOrdered()),n=new Tt(i.name(),o,i.nullable(),rr(i))):(s=(s=a.indexType())?Xo(s):new kn,t.set(e,r=$o(i,Zo(i,t))),o=new cn(r,s,e,a.isOrdered()),n=new Tt(i.name(),o,i.nullable(),rr(i))),n||null}function rr(i){const t=new Map;if(i)for(let e,n,r=-1,s=Math.trunc(i.customMetadataLength());++r<s;)(e=i.customMetadata(r))&&(n=e.key())!=null&&t.set(n,e.value());return t}function Xo(i){return new yi(i.isSigned(),i.bitWidth())}function $o(i,t){const e=i.typeType();switch(e){case Bt.NONE:return new pi;case Bt.Null:return new pi;case Bt.Binary:return new ar;case Bt.Utf8:return new lr;case Bt.Bool:return new cr;case Bt.List:return new mr((t||[])[0]);case Bt.Struct_:return new ee(t||[])}switch(e){case Bt.Int:{const n=i.type(new de);return new yi(n.isSigned(),n.bitWidth())}case Bt.FloatingPoint:{const n=i.type(new je);return new Dn(n.precision())}case Bt.Decimal:{const n=i.type(new re);return new ur(n.scale(),n.precision(),n.bitWidth())}case Bt.Date:{const n=i.type(new Pe);return new hr(n.unit())}case Bt.Time:{const n=i.type(new Se);return new Ln(n.unit(),n.bitWidth())}case Bt.Timestamp:{const n=i.type(new Ee);return new dr(n.unit(),n.timezone())}case Bt.Interval:{const n=i.type(new ze);return new fr(n.unit())}case Bt.Union:{const n=i.type(new se);return new pr(n.mode(),n.typeIdsArray()||[],t||[])}case Bt.FixedSizeBinary:{const n=i.type(new xe);return new yr(n.byteWidth())}case Bt.FixedSizeList:{const n=i.type(new Ve);return new br(n.listSize(),(t||[])[0])}case Bt.Map:{const n=i.type(new He);return new gr((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Bt[e]}" (${e})`)}function of(i,t){const e=t.fields.map(s=>Tt.encode(i,s));Pt.startFieldsVector(i,e.length);const n=Pt.createFieldsVector(i,e),r=t.metadata&&t.metadata.size>0?Pt.createCustomMetadataVector(i,[...t.metadata].map(([s,o])=>{const a=i.createString(`${s}`),l=i.createString(`${o}`);return Vt.startKeyValue(i),Vt.addKey(i,a),Vt.addValue(i,l),Vt.endKeyValue(i)})):-1;return Pt.startSchema(i),Pt.addFields(i,n),Pt.addEndianness(i,df?hn.Little:hn.Big),r!==-1&&Pt.addCustomMetadata(i,r),Pt.endSchema(i)}function af(i,t){let e=-1,n=-1,r=-1;const s=t.type;let o=t.typeId;Y.isDictionary(s)?(o=s.dictionary.typeId,r=ds.visit(s,i),n=ds.visit(s.dictionary,i)):n=ds.visit(s,i);const a=(s.children||[]).map(h=>Tt.encode(i,h)),l=Kt.createChildrenVector(i,a),c=t.metadata&&t.metadata.size>0?Kt.createCustomMetadataVector(i,[...t.metadata].map(([h,u])=>{const d=i.createString(`${h}`),y=i.createString(`${u}`);return Vt.startKeyValue(i),Vt.addKey(i,d),Vt.addValue(i,y),Vt.endKeyValue(i)})):-1;return t.name&&(e=i.createString(t.name)),Kt.startField(i),Kt.addType(i,n),Kt.addTypeType(i,o),Kt.addChildren(i,l),Kt.addNullable(i,!!t.nullable),e!==-1&&Kt.addName(i,e),r!==-1&&Kt.addDictionary(i,r),c!==-1&&Kt.addCustomMetadata(i,c),Kt.endField(i)}function lf(i,t){const e=t.nodes||[],n=t.buffers||[];ve.startNodesVector(i,e.length);for(const o of e.slice().reverse())Yi.encode(i,o);const r=i.endVector();ve.startBuffersVector(i,n.length);for(const o of n.slice().reverse())Ye.encode(i,o);const s=i.endVector();return ve.startRecordBatch(i),ve.addLength(i,new Hi(t.length,0)),ve.addNodes(i,r),ve.addBuffers(i,s),ve.endRecordBatch(i)}function cf(i,t){const e=pe.encode(i,t.data);return ri.startDictionaryBatch(i),ri.addId(i,new Hi(t.id,0)),ri.addIsDelta(i,t.isDelta),ri.addData(i,e),ri.endDictionaryBatch(i)}function uf(i,t){return Ac.createFieldNode(i,new Hi(t.length,0),new Hi(t.nullCount,0))}function hf(i,t){return Ec.createBuffer(i,new Hi(t.offset,0),new Hi(t.length,0))}const df=(()=>{const i=new ArrayBuffer(2);return new DataView(i).setInt16(0,256,!0),new Int16Array(i)[0]===256})(),po=i=>`Expected ${ft[i]} Message in stream, but was null or length 0.`,yo=i=>`Header pointer of flatbuffer-encoded ${ft[i]} Message is null or length 0.`,Nc=(i,t)=>`Expected to read ${i} metadata bytes, but only read ${t}.`,Bc=(i,t)=>`Expected to read ${i} bytes for message body, but only read ${t}.`;class kc{constructor(t){this.source=t instanceof Fr?t:new Fr(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?kt:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(po(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=ht(this.source.read(t));if(e.byteLength<t)throw new Error(Bc(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=ft.Schema,n=this.readMessage(e),r=n==null?void 0:n.header();if(t&&!r)throw new Error(yo(e));return r}readMetadataLength(){const t=this.source.read(Kr),e=t&&new bi(t),n=(e==null?void 0:e.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return kt;if(e.byteLength<t)throw new Error(Nc(t,e.byteLength));return{done:!1,value:ie.decode(e)}}}class ff{constructor(t,e){this.source=t instanceof fn?t:el(t)?new Or(t,e):new fn(t)}[Symbol.asyncIterator](){return this}next(){return z(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?kt:t})}throw(t){return z(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return z(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return z(this,void 0,void 0,function*(){let e;if((e=yield this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(po(t));return e.value})}readMessageBody(t){return z(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const e=ht(yield this.source.read(t));if(e.byteLength<t)throw new Error(Bc(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()})}readSchema(t=!1){return z(this,void 0,void 0,function*(){const e=ft.Schema,n=yield this.readMessage(e),r=n==null?void 0:n.header();if(t&&!r)throw new Error(yo(e));return r})}readMetadataLength(){return z(this,void 0,void 0,function*(){const t=yield this.source.read(Kr),e=t&&new bi(t),n=(e==null?void 0:e.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(t){return z(this,void 0,void 0,function*(){const e=yield this.source.read(t);if(!e)return kt;if(e.byteLength<t)throw new Error(Nc(t,e.byteLength));return{done:!1,value:ie.decode(e)}})}}class mf extends kc{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Yo?t:new Yo(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;const e=ie.fromJSON(t.schema,ft.Schema);return{done:!1,value:e}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;const n=ie.fromJSON(e,ft.DictionaryBatch);return{done:!1,value:n}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;const n=ie.fromJSON(e,ft.RecordBatch);return{done:!1,value:n}}return this._body=[],kt}readMessageBody(t){return e(this._body);function e(n){return(n||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...e(s.children)],[])}}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(po(t));return e.value}readSchema(){const t=ft.Schema,e=this.readMessage(t),n=e==null?void 0:e.header();if(!e||!n)throw new Error(yo(t));return n}}const Kr=4,Rs="ARROW1",Mn=new Uint8Array(Rs.length);for(let i=0;i<Rs.length;i+=1)Mn[i]=Rs.codePointAt(i);function bo(i,t=0){for(let e=-1,n=Mn.length;++e<n;)if(Mn[e]!==i[t+e])return!1;return!0}const Wn=Mn.length,Dc=Wn+Kr,pf=Wn*2+Kr;class Te extends lo{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return zi(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return we.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return we.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Te?t:Ts(t)?_f(t):el(t)?If(t):zi(t)?(()=>z(this,void 0,void 0,function*(){return yield Te.from(yield t)}))():il(t)||Js(t)||nl(t)||yn(t)?vf(new fn(t)):wf(new Fr(t))}static readAll(t){return t instanceof Te?t.isSync()?ta(t):ea(t):Ts(t)||ArrayBuffer.isView(t)||Vn(t)||tl(t)?ta(t):ea(t)}}class Dr extends Te{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return We(this,arguments,function*(){yield it(yield*er(Pi(this[Symbol.iterator]())))})}}class Lr extends Te{constructor(t){super(t),this._impl=t}readAll(){var t,e;return z(this,void 0,void 0,function*(){const n=new Array;try{for(var r=Pi(this),s;s=yield r.next(),!s.done;){const o=s.value;n.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(e=r.return)&&(yield e.call(r))}finally{if(t)throw t.error}}return n})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Lc extends Dr{constructor(t){super(t),this._impl=t}}class yf extends Lr{constructor(t){super(t),this._impl=t}}class Rc{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const n=this._loadVectors(t,e,this.schema.fields),r=st({type:new ee(this.schema.fields),length:t.length,children:n});return new jt(this.schema,r)}_loadDictionaryBatch(t,e){const{id:n,isDelta:r}=t,{dictionaries:s,schema:o}=this,a=s.get(n);if(r||!a){const l=o.dictionaries.get(n),c=this._loadVectors(t.data,e,[l]);return(a&&r?a.concat(new mt(c)):new mt(c)).memoize()}return a.memoize()}_loadVectors(t,e,n){return new wc(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class Rr extends Rc{constructor(t,e){super(e),this._reader=Ts(t)?new mf(this._handle=t):new kc(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Uc(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):kt}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):kt}next(){if(this.closed)return kt;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=e.readMessageBody(t.bodyLength),s=this._loadRecordBatch(n,r);return{done:!1,value:s}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new mo(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Mr extends Rc{constructor(t,e){super(e),this._reader=new ff(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return z(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return z(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Uc(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return z(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):kt})}return(t){return z(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):kt})}next(){return z(this,void 0,void 0,function*(){if(this.closed)return kt;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=yield e.readMessageBody(t.bodyLength),s=this._loadRecordBatch(n,r);return{done:!1,value:s}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=yield e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new mo(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return z(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class Mc extends Rr{constructor(t,e){super(t instanceof Go?t:new Go(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const r=this._reader.readMessage(ft.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var e;const n=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const r=this._reader.readMessage(ft.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,e=t.size-Dc,n=t.readInt32(e),r=t.readAt(e-n,n);return Rn.decode(r)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class bf extends Mr{constructor(t,...e){const n=typeof e[0]!="number"?e.shift():void 0,r=e[0]instanceof Map?e.shift():void 0;super(t instanceof Or?t:new Or(t,n),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return z(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)})}readRecordBatch(t){var e;return z(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const r=yield this._reader.readMessage(ft.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),o=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var e;return z(this,void 0,void 0,function*(){const n=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const r=yield this._reader.readMessage(ft.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),o=yield this._reader.readMessageBody(r.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return z(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-Dc,n=yield t.readInt32(e),r=yield t.readAt(e-n,n);return Rn.decode(r)})}_readNextMessageAndValidate(t){return z(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null})}}class gf extends Rr{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new Nd(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function Uc(i,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:i.autoDestroy}function*ta(i){const t=Te.from(i);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function ea(i){return We(this,arguments,function*(){const e=yield it(Te.from(i));try{if(!(yield it(e.open({autoDestroy:!1}))).closed)do yield yield it(e);while(!(yield it(e.reset().open())).closed)}finally{yield it(e.cancel())}})}function _f(i){return new Dr(new gf(i))}function wf(i){const t=i.peek(Wn+7&-8);return t&&t.byteLength>=4?bo(t)?new Lc(new Mc(i.read())):new Dr(new Rr(i)):new Dr(new Rr(function*(){}()))}function vf(i){return z(this,void 0,void 0,function*(){const t=yield i.peek(Wn+7&-8);return t&&t.byteLength>=4?bo(t)?new Lc(new Mc(yield i.read())):new Lr(new Mr(i)):new Lr(new Mr(function(){return We(this,arguments,function*(){})}()))})}function If(i){return z(this,void 0,void 0,function*(){const{size:t}=yield i.stat(),e=new Or(i,t);return t>=pf&&bo(yield e.readAt(0,Wn+7&-8))?new yf(new bf(e)):new Lr(new Mr(e))})}class Ut extends ot{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=r=>r.flatMap(s=>Array.isArray(s)?e(s):s instanceof jt?s.data.children:s.data),n=new Ut;return n.visitMany(e(t)),n}visit(t){if(t instanceof mt)return this.visitMany(t.data),this;const{type:e}=t;if(!Y.isDictionary(e)){const{length:n,nullCount:r}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Y.isNull(e)||De.call(this,r<=0?new Uint8Array(0):no(t.offset,n,t.nullBitmap)),this.nodes.push(new Yi(n,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function De(i){const t=i.byteLength+7&-8;return this.buffers.push(i),this.bufferRegions.push(new Ye(this._byteLength,t)),this._byteLength+=t,this}function Sf(i){const{type:t,length:e,typeIds:n,valueOffsets:r}=i;if(De.call(this,n),t.mode===me.Sparse)return Ms.call(this,i);if(t.mode===me.Dense){if(i.offset<=0)return De.call(this,r),Ms.call(this,i);{const s=n.reduce((h,u)=>Math.max(h,u),n[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),l=new Int32Array(e),c=Ks(-r[0],e,r);for(let h,u,d=-1;++d<e;)(u=a[h=n[d]])===-1&&(u=a[h]=c[h]),l[d]=c[d]-u,++o[h];De.call(this,l);for(let h,u=-1,d=t.children.length;++u<d;)if(h=i.children[u]){const y=t.typeIds[u],S=Math.min(e,o[y]);this.visit(h.slice(a[y],S))}}}return this}function Ef(i){let t;return i.nullCount>=i.length?De.call(this,new Uint8Array(0)):(t=i.values)instanceof Uint8Array?De.call(this,no(i.offset,i.length,t)):De.call(this,_r(i.values))}function Ai(i){return De.call(this,i.values.subarray(0,i.length*i.stride))}function Cc(i){const{length:t,values:e,valueOffsets:n}=i,r=n[0],s=n[t],o=Math.min(s-r,e.byteLength-r);return De.call(this,Ks(-n[0],t,n)),De.call(this,e.subarray(r,r+o)),this}function go(i){const{length:t,valueOffsets:e}=i;return e&&De.call(this,Ks(e[0],t,e)),this.visit(i.children[0])}function Ms(i){return this.visitMany(i.type.children.map((t,e)=>i.children[e]).filter(Boolean))[0]}Ut.prototype.visitBool=Ef;Ut.prototype.visitInt=Ai;Ut.prototype.visitFloat=Ai;Ut.prototype.visitUtf8=Cc;Ut.prototype.visitBinary=Cc;Ut.prototype.visitFixedSizeBinary=Ai;Ut.prototype.visitDate=Ai;Ut.prototype.visitTimestamp=Ai;Ut.prototype.visitTime=Ai;Ut.prototype.visitDecimal=Ai;Ut.prototype.visitList=go;Ut.prototype.visitStruct=Ms;Ut.prototype.visitUnion=Sf;Ut.prototype.visitInterval=Ai;Ut.prototype.visitFixedSizeList=go;Ut.prototype.visitMap=go;class Pc extends lo{constructor(t){super(),this._position=0,this._started=!1,this._sink=new ir,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ae(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return zi(t)?t.then(e=>this.writeAll(e)):yn(t)?Io(this,t):vo(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){return t===this._sink||t instanceof ir?this._sink=t:(this._sink=new ir,t&&Wu(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Yu(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!e||!Ls(e,this._schema))&&(e==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof te&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof jt&&!(e=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(e&&!Ls(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof jt?t instanceof mo||this._writeRecordBatch(t):t instanceof te?this.writeAll(t.batches):Vn(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,r=ie.encode(t),s=r.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+n&~n,l=a-s-o;return t.headerType===ft.RecordBatch?this._recordBatchBlocks.push(new gi(a,t.bodyLength,this._position)):t.headerType===ft.DictionaryBatch&&this._dictionaryBlocks.push(new gi(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(r),this._writePadding(l)}_write(t){if(this._started){const e=ht(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(ie.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Mn)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:r,buffers:s}=Ut.assemble(t),o=new pe(t.numRows,n,r),a=ie.from(o,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:r,nodes:s,bufferRegions:o,buffers:a}=Ut.assemble(new mt([t])),l=new pe(t.length,s,o),c=new Ke(l,e,n),h=ie.from(c,r);return this._writeMessage(h)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,n,r;for(let s=-1,o=t.length;++s<o;)(e=t[s])&&(n=e.byteLength)>0&&(this._write(e),(r=(n+7&-8)-n)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(e)||0;if(r===0||(n=n==null?void 0:n.slice(r)).length>0)for(const s of n.data)this._writeDictionaryBatch(s,e,r>0),r+=s.length}return this}}class _o extends Pc{static writeAll(t,e){const n=new _o(e);return zi(t)?t.then(r=>n.writeAll(r)):yn(t)?Io(n,t):vo(n,t)}}class wo extends Pc{static writeAll(t){const e=new wo;return zi(t)?t.then(n=>e.writeAll(n)):yn(t)?Io(e,t):vo(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Rn.encode(new Rn(t,fe.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function vo(i,t){let e=t;t instanceof te&&(e=t.batches,i.reset(void 0,t.schema));for(const n of e)i.write(n);return i.finish()}function Io(i,t){var e,n,r,s;return z(this,void 0,void 0,function*(){try{for(e=Pi(t);n=yield e.next(),!n.done;){const o=n.value;i.write(o)}}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}return i.finish()})}function Af(i,t="stream"){return(t==="stream"?_o:wo).writeAll(i).toUint8Array(!0)}var Tf=Object.create,xc=Object.defineProperty,Ff=Object.getOwnPropertyDescriptor,Of=Object.getOwnPropertyNames,Nf=Object.getPrototypeOf,Bf=Object.prototype.hasOwnProperty,kf=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),Df=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Of(t))!Bf.call(i,r)&&r!==e&&xc(i,r,{get:()=>t[r],enumerable:!(n=Ff(t,r))||n.enumerable});return i},Lf=(i,t,e)=>(e=i!=null?Tf(Nf(i)):{},Df(t||!i||!i.__esModule?xc(e,"default",{value:i,enumerable:!0}):e,i)),Rf=kf((i,t)=>{t.exports=Worker}),Mf=(i=>(i[i.NONE=0]="NONE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARNING=3]="WARNING",i[i.ERROR=4]="ERROR",i))(Mf||{}),Uf=(i=>(i[i.NONE=0]="NONE",i[i.CONNECT=1]="CONNECT",i[i.DISCONNECT=2]="DISCONNECT",i[i.OPEN=3]="OPEN",i[i.QUERY=4]="QUERY",i[i.INSTANTIATE=5]="INSTANTIATE",i))(Uf||{}),Cf=(i=>(i[i.NONE=0]="NONE",i[i.OK=1]="OK",i[i.ERROR=2]="ERROR",i[i.START=3]="START",i[i.RUN=4]="RUN",i[i.CAPTURE=5]="CAPTURE",i))(Cf||{}),Pf=(i=>(i[i.NONE=0]="NONE",i[i.WEB_WORKER=1]="WEB_WORKER",i[i.NODE_WORKER=2]="NODE_WORKER",i[i.BINDINGS=3]="BINDINGS",i[i.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",i))(Pf||{}),xf=class{constructor(i=2){this.level=i}log(i){i.level>=this.level&&console.log(i)}},Vf=(i=>(i[i.SUCCESS=0]="SUCCESS",i))(Vf||{}),jf=class{constructor(i,t){this._bindings=i,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(i){return i(this._bindings,this._conn)}async query(i){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:i});let t=await this._bindings.runQuery(this._conn,i),e=Te.from(t);return console.assert(e.isSync()),console.assert(e.isFile()),new te(e)}async send(i){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:i});let t=await this._bindings.startPendingQuery(this._conn,i);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let e=new Vc(this._bindings,this._conn,t),n=await Te.from(e);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(i){return await this._bindings.getTableNames(this._conn,i)}async prepare(i){let t=await this._bindings.createPrepared(this._conn,i);return new zf(this._bindings,this._conn,t)}async insertArrowTable(i,t){let e=Af(i,"stream");await this.insertArrowFromIPCStream(e,t)}async insertArrowFromIPCStream(i,t){await this._bindings.insertArrowFromIPCStream(this._conn,i,t)}async insertCSVFromPath(i,t){await this._bindings.insertCSVFromPath(this._conn,i,t)}async insertJSONFromPath(i,t){await this._bindings.insertJSONFromPath(this._conn,i,t)}},Vc=class{constructor(i,t,e){this.db=i,this.conn=t,this.header=e,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let i;return this._inFlight!=null?(i=await this._inFlight,this._inFlight=null):i=await this.db.fetchQueryResults(this.conn),this._depleted=i.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:i}}[Symbol.asyncIterator](){return this}},zf=class{constructor(i,t,e){this.bindings=i,this.connectionId=t,this.statementId=e}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...i){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,i),e=Te.from(t);return console.assert(e.isSync()),console.assert(e.isFile()),new te(e)}async send(...i){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,i),e=new Vc(this.bindings,this.connectionId,t),n=await Te.from(e);return console.assert(n.isAsync()),console.assert(n.isStream()),n}},Hf=(i=>(i.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",i.CLOSE_PREPARED="CLOSE_PREPARED",i.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",i.CONNECT="CONNECT",i.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",i.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",i.CREATE_PREPARED="CREATE_PREPARED",i.DISCONNECT="DISCONNECT",i.DROP_FILE="DROP_FILE",i.DROP_FILES="DROP_FILES",i.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",i.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",i.FLUSH_FILES="FLUSH_FILES",i.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",i.GET_TABLE_NAMES="GET_TABLE_NAMES",i.GET_VERSION="GET_VERSION",i.GLOB_FILE_INFOS="GLOB_FILE_INFOS",i.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",i.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",i.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",i.INSTANTIATE="INSTANTIATE",i.OPEN="OPEN",i.PING="PING",i.POLL_PENDING_QUERY="POLL_PENDING_QUERY",i.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",i.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",i.REGISTER_FILE_URL="REGISTER_FILE_URL",i.RESET="RESET",i.RUN_PREPARED="RUN_PREPARED",i.RUN_QUERY="RUN_QUERY",i.SEND_PREPARED="SEND_PREPARED",i.START_PENDING_QUERY="START_PENDING_QUERY",i.TOKENIZE="TOKENIZE",i))(Hf||{}),Wf=(i=>(i.CONNECTION_INFO="CONNECTION_INFO",i.ERROR="ERROR",i.FEATURE_FLAGS="FEATURE_FLAGS",i.FILE_BUFFER="FILE_BUFFER",i.FILE_INFOS="FILE_INFOS",i.FILE_SIZE="FILE_SIZE",i.FILE_STATISTICS="FILE_STATISTICS",i.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",i.LOG="LOG",i.OK="OK",i.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",i.QUERY_PLAN="QUERY_PLAN",i.QUERY_RESULT="QUERY_RESULT",i.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",i.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",i.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",i.REGISTERED_FILE="REGISTERED_FILE",i.SCRIPT_TOKENS="SCRIPT_TOKENS",i.SUCCESS="SUCCESS",i.TABLE_NAMES="TABLE_NAMES",i.VERSION_STRING="VERSION_STRING",i))(Wf||{}),lt=class{constructor(i,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=i,this.data=t,this.promise=new Promise((e,n)=>{this.promiseResolver=e,this.promiseRejecter=n})}};function sr(i){switch(i.typeId){case m.Binary:return{sqlType:"binary"};case m.Bool:return{sqlType:"bool"};case m.Date:return{sqlType:"date"};case m.DateDay:return{sqlType:"date32[d]"};case m.DateMillisecond:return{sqlType:"date64[ms]"};case m.Decimal:{let t=i;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case m.Float:return{sqlType:"float"};case m.Float16:return{sqlType:"float16"};case m.Float32:return{sqlType:"float32"};case m.Float64:return{sqlType:"float64"};case m.Int:return{sqlType:"int32"};case m.Int16:return{sqlType:"int16"};case m.Int32:return{sqlType:"int32"};case m.Int64:return{sqlType:"int64"};case m.Uint16:return{sqlType:"uint16"};case m.Uint32:return{sqlType:"uint32"};case m.Uint64:return{sqlType:"uint64"};case m.Uint8:return{sqlType:"uint8"};case m.IntervalDayTime:return{sqlType:"interval[dt]"};case m.IntervalYearMonth:return{sqlType:"interval[m]"};case m.List:return{sqlType:"list",valueType:sr(i.valueType)};case m.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:i.byteWidth};case m.Null:return{sqlType:"null"};case m.Utf8:return{sqlType:"utf8"};case m.Struct:return{sqlType:"struct",fields:i.children.map(t=>Us(t.name,t.type))};case m.Map:{let t=i;return{sqlType:"map",keyType:sr(t.keyType),valueType:sr(t.valueType)}}case m.Time:return{sqlType:"time[s]"};case m.TimeMicrosecond:return{sqlType:"time[us]"};case m.TimeMillisecond:return{sqlType:"time[ms]"};case m.TimeNanosecond:return{sqlType:"time[ns]"};case m.TimeSecond:return{sqlType:"time[s]"};case m.Timestamp:return{sqlType:"timestamp",timezone:i.timezone||void 0};case m.TimestampSecond:return{sqlType:"timestamp[s]",timezone:i.timezone||void 0};case m.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:i.timezone||void 0};case m.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:i.timezone||void 0};case m.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:i.timezone||void 0}}throw new Error(`unsupported arrow type: ${i.toString()}`)}function Us(i,t){let e=sr(t);return e.name=i,e}var Yf=new TextEncoder,Gf=class{constructor(i,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=i,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(i){this._worker=i,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,e)=>{this._workerShutdownResolver=t})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(i,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let e=this._nextMessageId++;return this._pendingRequests.set(e,i),this._worker.postMessage({messageId:e,type:i.type,data:i.data},t),await i.promise}onMessage(i){let t=i.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let n of this._onInstantiationProgress)n(t.data);return}}let e=this._pendingRequests.get(t.requestId);if(!e){console.warn(`unassociated response: [${t.requestId}, ${t.type.toString()}]`);return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let n=new Error(t.data.message);n.name=t.data.name,n.stack=t.data.stack,e.promiseRejecter(n);return}switch(e.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){e.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){e.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){e.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){e.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){e.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){e.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){e.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){e.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){e.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){e.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){e.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){e.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){e.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){e.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){e.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){e.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){e.promiseResolver(t.data);return}break}e.promiseRejecter(new Error(`unexpected response type: ${t.type.toString()}`))}onError(i){console.error(i),console.error(`error in duckdb worker: ${i.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let i=new lt("RESET",null);return await this.postTask(i)}async ping(){let i=new lt("PING",null);await this.postTask(i)}async dropFile(i){let t=new lt("DROP_FILE",i);return await this.postTask(t)}async dropFiles(){let i=new lt("DROP_FILES",null);return await this.postTask(i)}async flushFiles(){let i=new lt("FLUSH_FILES",null);return await this.postTask(i)}async instantiate(i,t=null,e=n=>{}){this._onInstantiationProgress.push(e);let n=new lt("INSTANTIATE",[i,t]);return await this.postTask(n)}async getVersion(){let i=new lt("GET_VERSION",null);return await this.postTask(i)}async getFeatureFlags(){let i=new lt("GET_FEATURE_FLAGS",null);return await this.postTask(i)}async open(i){let t=new lt("OPEN",i);await this.postTask(t)}async tokenize(i){let t=new lt("TOKENIZE",i);return await this.postTask(t)}async connectInternal(){let i=new lt("CONNECT",null);return await this.postTask(i)}async connect(){let i=await this.connectInternal();return new jf(this,i)}async disconnect(i){let t=new lt("DISCONNECT",i);await this.postTask(t)}async runQuery(i,t){let e=new lt("RUN_QUERY",[i,t]);return await this.postTask(e)}async startPendingQuery(i,t){let e=new lt("START_PENDING_QUERY",[i,t]);return await this.postTask(e)}async pollPendingQuery(i){let t=new lt("POLL_PENDING_QUERY",i);return await this.postTask(t)}async cancelPendingQuery(i){let t=new lt("CANCEL_PENDING_QUERY",i);return await this.postTask(t)}async fetchQueryResults(i){let t=new lt("FETCH_QUERY_RESULTS",i);return await this.postTask(t)}async getTableNames(i,t){let e=new lt("GET_TABLE_NAMES",[i,t]);return await this.postTask(e)}async createPrepared(i,t){let e=new lt("CREATE_PREPARED",[i,t]);return await this.postTask(e)}async closePrepared(i,t){let e=new lt("CLOSE_PREPARED",[i,t]);await this.postTask(e)}async runPrepared(i,t,e){let n=new lt("RUN_PREPARED",[i,t,e]);return await this.postTask(n)}async sendPrepared(i,t,e){let n=new lt("SEND_PREPARED",[i,t,e]);return await this.postTask(n)}async globFiles(i){let t=new lt("GLOB_FILE_INFOS",i);return await this.postTask(t)}async registerFileText(i,t){let e=Yf.encode(t);await this.registerFileBuffer(i,e)}async registerFileURL(i,t){t===void 0&&(t=i);let e=new lt("REGISTER_FILE_URL",[i,t]);await this.postTask(e)}async registerEmptyFileBuffer(i){let t=new lt("REGISTER_FILE_BUFFER",[i,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(i,t){let e=new lt("REGISTER_FILE_BUFFER",[i,t]);await this.postTask(e,[t.buffer])}async registerFileHandle(i,t){let e=new lt("REGISTER_FILE_HANDLE",[i,t]);await this.postTask(e,[])}async collectFileStatistics(i,t){let e=new lt("COLLECT_FILE_STATISTICS",[i,t]);await this.postTask(e,[])}async exportFileStatistics(i){let t=new lt("EXPORT_FILE_STATISTICS",i);return await this.postTask(t,[])}async copyFileToBuffer(i){let t=new lt("COPY_FILE_TO_BUFFER",i);return await this.postTask(t)}async copyFileToPath(i,t){let e=new lt("COPY_FILE_TO_PATH",[i,t]);await this.postTask(e)}async insertArrowFromIPCStream(i,t,e){if(t.length==0)return;let n=new lt("INSERT_ARROW_FROM_IPC_STREAM",[i,t,e]);await this.postTask(n,[t.buffer])}async insertCSVFromPath(i,t,e){if(e.columns!==void 0){let r=[];for(let s in e.columns){let o=e.columns[s];r.push(Us(s,o))}e.columnsFlat=r,delete e.columns}let n=new lt("IMPORT_CSV_FROM_PATH",[i,t,e]);await this.postTask(n)}async insertJSONFromPath(i,t,e){if(e.columns!==void 0){let r=[];for(let s in e.columns){let o=e.columns[s];r.push(Us(s,o))}e.columnsFlat=r,delete e.columns}let n=new lt("IMPORT_JSON_FROM_PATH",[i,t,e]);await this.postTask(n)}},qf=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),Jf=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),Qf=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),Kf=()=>(async i=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(i)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),Zf={name:"@duckdb/duckdb-wasm",version:"1.17.0",description:"DuckDB powered by WebAssembly",license:"MPL-2.0",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^9.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.0","@typescript-eslint/eslint-plugin":"^5.36.1","@typescript-eslint/parser":"^5.36.1",esbuild:"^0.15.6",eslint:"^8.23.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.31.1","fast-glob":"^3.2.11",jasmine:"^4.4.0","jasmine-core":"^4.3.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.0","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.34","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.7.1",puppeteer:"^17.1.3",rimraf:"^3.0.2",s3rver:"^3.7.1",typedoc:"^0.23.14",typescript:"^4.7.4","wasm-feature-detect":"^1.2.11","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},So=Zf.version.split(".");So[0];So[1];So[2];var Xf=()=>typeof navigator>"u",fs=null,ms=null,ps=null,ys=null,bs=null;async function $f(){return fs==null&&(fs=typeof BigInt64Array<"u"),ms==null&&(ms=await Jf()),ps==null&&(ps=await Kf()),ys==null&&(ys=await Qf()),bs==null&&(bs=await qf()),{bigInt64Array:fs,crossOriginIsolated:Xf()||globalThis.crossOriginIsolated||!1,wasmExceptions:ms,wasmSIMD:ys,wasmThreads:ps,wasmBulkMemory:bs}}async function tm(i){let t=await $f();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&i.coi)return{mainModule:i.coi.mainModule,mainWorker:i.coi.mainWorker,pthreadWorker:i.coi.pthreadWorker};if(i.eh)return{mainModule:i.eh.mainModule,mainWorker:i.eh.mainWorker,pthreadWorker:null}}return{mainModule:i.mvp.mainModule,mainWorker:i.mvp.mainWorker,pthreadWorker:null}}Lf(Rf());const em=""+new URL("../../assets/duckdb-mvp-7929774d.wasm",import.meta.url).href,im=""+new URL("../../assets/duckdb-browser-mvp.worker-cf6d2f36.js",import.meta.url).href,nm=""+new URL("../../assets/duckdb-eh-b81a4d32.wasm",import.meta.url).href,rm=""+new URL("../../assets/duckdb-browser-eh.worker-9ac306d5.js",import.meta.url).href;var sm=Worker;const om={mvp:{mainModule:em,mainWorker:im},eh:{mainModule:nm,mainWorker:rm}};let Xi=null;const am=async()=>{if(Xi)return Xi;const i=await tm(om),t=new sm(i.mainWorker),e=new xf;return Xi=new Gf(e,t),await Xi.instantiate(i.mainModule,i.pthreadWorker),await Xi.registerFileURL("imdb.parquet","https://myagues.github.io/seriesheat-duckdb-wasm/episodes.parquet"),Xi};function or(i,t){return i==null||t==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function lm(i,t){return i==null||t==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function jc(i){let t,e,n;i.length!==2?(t=or,e=(a,l)=>or(i(a),l),n=(a,l)=>i(a)-l):(t=i===or||i===lm?i:cm,e=i,n=i);function r(a,l,c=0,h=a.length){if(c<h){if(t(l,l)!==0)return h;do{const u=c+h>>>1;e(a[u],l)<0?c=u+1:h=u}while(c<h)}return c}function s(a,l,c=0,h=a.length){if(c<h){if(t(l,l)!==0)return h;do{const u=c+h>>>1;e(a[u],l)<=0?c=u+1:h=u}while(c<h)}return c}function o(a,l,c=0,h=a.length){const u=r(a,l,c,h-1);return u>c&&n(a[u-1],l)>-n(a[u],l)?u-1:u}return{left:r,center:o,right:s}}function cm(){return 0}function um(i){return i===null?NaN:+i}const hm=jc(or),dm=hm.right;jc(um).center;const fm=dm;var Cs=Math.sqrt(50),Ps=Math.sqrt(10),xs=Math.sqrt(2);function mm(i,t,e){var n,r=-1,s,o,a;if(t=+t,i=+i,e=+e,i===t&&e>0)return[i];if((n=t<i)&&(s=i,i=t,t=s),(a=zc(i,t,e))===0||!isFinite(a))return[];if(a>0){let l=Math.round(i/a),c=Math.round(t/a);for(l*a<i&&++l,c*a>t&&--c,o=new Array(s=c-l+1);++r<s;)o[r]=(l+r)*a}else{a=-a;let l=Math.round(i*a),c=Math.round(t*a);for(l/a<i&&++l,c/a>t&&--c,o=new Array(s=c-l+1);++r<s;)o[r]=(l+r)/a}return n&&o.reverse(),o}function zc(i,t,e){var n=(t-i)/Math.max(0,e),r=Math.floor(Math.log(n)/Math.LN10),s=n/Math.pow(10,r);return r>=0?(s>=Cs?10:s>=Ps?5:s>=xs?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=Cs?10:s>=Ps?5:s>=xs?2:1)}function pm(i,t,e){var n=Math.abs(t-i)/Math.max(0,e),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),s=n/r;return s>=Cs?r*=10:s>=Ps?r*=5:s>=xs&&(r*=2),t<i?-r:r}function ym(i,t){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(t).domain(i);break}return this}function Yn(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function Zr(i,t){var e=Object.create(i.prototype);for(var n in t)e[n]=t[n];return e}function Gi(){}var Un=.7,Ur=1/Un,an="\\s*([+-]?\\d+)\\s*",Cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bm=/^#([0-9a-f]{3,8})$/,gm=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),_m=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),wm=new RegExp(`^rgba\\(${an},${an},${an},${Cn}\\)$`),vm=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${Cn}\\)$`),Im=new RegExp(`^hsl\\(${Cn},${Ge},${Ge}\\)$`),Sm=new RegExp(`^hsla\\(${Cn},${Ge},${Ge},${Cn}\\)$`),ia={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yn(Gi,Pn,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:na,formatHex:na,formatHex8:Em,formatHsl:Am,formatRgb:ra,toString:ra});function na(){return this.rgb().formatHex()}function Em(){return this.rgb().formatHex8()}function Am(){return Wc(this).formatHsl()}function ra(){return this.rgb().formatRgb()}function Pn(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=bm.exec(i))?(e=t[1].length,t=parseInt(t[1],16),e===6?sa(t):e===3?new Zt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Zn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Zn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gm.exec(i))?new Zt(t[1],t[2],t[3],1):(t=_m.exec(i))?new Zt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wm.exec(i))?Zn(t[1],t[2],t[3],t[4]):(t=vm.exec(i))?Zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Im.exec(i))?la(t[1],t[2]/100,t[3]/100,1):(t=Sm.exec(i))?la(t[1],t[2]/100,t[3]/100,t[4]):ia.hasOwnProperty(i)?sa(ia[i]):i==="transparent"?new Zt(NaN,NaN,NaN,0):null}function sa(i){return new Zt(i>>16&255,i>>8&255,i&255,1)}function Zn(i,t,e,n){return n<=0&&(i=t=e=NaN),new Zt(i,t,e,n)}function Hc(i){return i instanceof Gi||(i=Pn(i)),i?(i=i.rgb(),new Zt(i.r,i.g,i.b,i.opacity)):new Zt}function Cr(i,t,e,n){return arguments.length===1?Hc(i):new Zt(i,t,e,n==null?1:n)}function Zt(i,t,e,n){this.r=+i,this.g=+t,this.b=+e,this.opacity=+n}Yn(Zt,Cr,Zr(Gi,{brighter(i){return i=i==null?Ur:Math.pow(Ur,i),new Zt(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Un:Math.pow(Un,i),new Zt(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Zt(Vi(this.r),Vi(this.g),Vi(this.b),Pr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oa,formatHex:oa,formatHex8:Tm,formatRgb:aa,toString:aa}));function oa(){return`#${Ci(this.r)}${Ci(this.g)}${Ci(this.b)}`}function Tm(){return`#${Ci(this.r)}${Ci(this.g)}${Ci(this.b)}${Ci((isNaN(this.opacity)?1:this.opacity)*255)}`}function aa(){const i=Pr(this.opacity);return`${i===1?"rgb(":"rgba("}${Vi(this.r)}, ${Vi(this.g)}, ${Vi(this.b)}${i===1?")":`, ${i})`}`}function Pr(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Vi(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ci(i){return i=Vi(i),(i<16?"0":"")+i.toString(16)}function la(i,t,e,n){return n<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new ke(i,t,e,n)}function Wc(i){if(i instanceof ke)return new ke(i.h,i.s,i.l,i.opacity);if(i instanceof Gi||(i=Pn(i)),!i)return new ke;if(i instanceof ke)return i;i=i.rgb();var t=i.r/255,e=i.g/255,n=i.b/255,r=Math.min(t,e,n),s=Math.max(t,e,n),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(e-n)/a+(e<n)*6:e===s?o=(n-t)/a+2:o=(t-e)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new ke(o,a,l,i.opacity)}function Fm(i,t,e,n){return arguments.length===1?Wc(i):new ke(i,t,e,n==null?1:n)}function ke(i,t,e,n){this.h=+i,this.s=+t,this.l=+e,this.opacity=+n}Yn(ke,Fm,Zr(Gi,{brighter(i){return i=i==null?Ur:Math.pow(Ur,i),new ke(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Un:Math.pow(Un,i),new ke(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,r=2*e-n;return new Zt(gs(i>=240?i-240:i+120,r,n),gs(i,r,n),gs(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new ke(ca(this.h),Xn(this.s),Xn(this.l),Pr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=Pr(this.opacity);return`${i===1?"hsl(":"hsla("}${ca(this.h)}, ${Xn(this.s)*100}%, ${Xn(this.l)*100}%${i===1?")":`, ${i})`}`}}));function ca(i){return i=(i||0)%360,i<0?i+360:i}function Xn(i){return Math.max(0,Math.min(1,i||0))}function gs(i,t,e){return(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)*255}const Om=Math.PI/180,Nm=180/Math.PI,xr=18,Yc=.96422,Gc=1,qc=.82521,Jc=4/29,ln=6/29,Qc=3*ln*ln,Bm=ln*ln*ln;function Kc(i){if(i instanceof qe)return new qe(i.l,i.a,i.b,i.opacity);if(i instanceof si)return Xc(i);i instanceof Zt||(i=Hc(i));var t=Is(i.r),e=Is(i.g),n=Is(i.b),r=_s((.2225045*t+.7168786*e+.0606169*n)/Gc),s,o;return t===e&&e===n?s=o=r:(s=_s((.4360747*t+.3850649*e+.1430804*n)/Yc),o=_s((.0139322*t+.0971045*e+.7141733*n)/qc)),new qe(116*r-16,500*(s-r),200*(r-o),i.opacity)}function km(i,t,e,n){return arguments.length===1?Kc(i):new qe(i,t,e,n==null?1:n)}function qe(i,t,e,n){this.l=+i,this.a=+t,this.b=+e,this.opacity=+n}Yn(qe,km,Zr(Gi,{brighter(i){return new qe(this.l+xr*(i==null?1:i),this.a,this.b,this.opacity)},darker(i){return new qe(this.l-xr*(i==null?1:i),this.a,this.b,this.opacity)},rgb(){var i=(this.l+16)/116,t=isNaN(this.a)?i:i+this.a/500,e=isNaN(this.b)?i:i-this.b/200;return t=Yc*ws(t),i=Gc*ws(i),e=qc*ws(e),new Zt(vs(3.1338561*t-1.6168667*i-.4906146*e),vs(-.9787684*t+1.9161415*i+.033454*e),vs(.0719453*t-.2289914*i+1.4052427*e),this.opacity)}}));function _s(i){return i>Bm?Math.pow(i,1/3):i/Qc+Jc}function ws(i){return i>ln?i*i*i:Qc*(i-Jc)}function vs(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Is(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Dm(i){if(i instanceof si)return new si(i.h,i.c,i.l,i.opacity);if(i instanceof qe||(i=Kc(i)),i.a===0&&i.b===0)return new si(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var t=Math.atan2(i.b,i.a)*Nm;return new si(t<0?t+360:t,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function Zc(i,t,e,n){return arguments.length===1?Dm(i):new si(i,t,e,n==null?1:n)}function si(i,t,e,n){this.h=+i,this.c=+t,this.l=+e,this.opacity=+n}function Xc(i){if(isNaN(i.h))return new qe(i.l,0,0,i.opacity);var t=i.h*Om;return new qe(i.l,Math.cos(t)*i.c,Math.sin(t)*i.c,i.opacity)}Yn(si,Zc,Zr(Gi,{brighter(i){return new si(this.h,this.c,this.l+xr*(i==null?1:i),this.opacity)},darker(i){return new si(this.h,this.c,this.l-xr*(i==null?1:i),this.opacity)},rgb(){return Xc(this).rgb()}}));function Lm(i,t,e,n,r){var s=i*i,o=s*i;return((1-3*i+3*s-o)*t+(4-6*s+3*o)*e+(1+3*i+3*s-3*o)*n+o*r)/6}function Rm(i){var t=i.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),r=i[n],s=i[n+1],o=n>0?i[n-1]:2*r-s,a=n<t-1?i[n+2]:2*s-r;return Lm((e-n/t)*t,o,r,s,a)}}const Eo=i=>()=>i;function Mm(i,t){return function(e){return i+e*t}}function Um(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(n){return Math.pow(i+n*t,e)}}function Cm(i){return(i=+i)==1?$c:function(t,e){return e-t?Um(t,e,i):Eo(isNaN(t)?e:t)}}function $c(i,t){var e=t-i;return e?Mm(i,e):Eo(isNaN(i)?t:i)}const ua=function i(t){var e=Cm(t);function n(r,s){var o=e((r=Cr(r)).r,(s=Cr(s)).r),a=e(r.g,s.g),l=e(r.b,s.b),c=$c(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=a(h),r.b=l(h),r.opacity=c(h),r+""}}return n.gamma=i,n}(1);function Pm(i){return function(t){var e=t.length,n=new Array(e),r=new Array(e),s=new Array(e),o,a;for(o=0;o<e;++o)a=Cr(t[o]),n[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return n=i(n),r=i(r),s=i(s),a.opacity=1,function(l){return a.r=n(l),a.g=r(l),a.b=s(l),a+""}}}var xm=Pm(Rm);function Vm(i,t){t||(t=[]);var e=i?Math.min(t.length,i.length):0,n=t.slice(),r;return function(s){for(r=0;r<e;++r)n[r]=i[r]*(1-s)+t[r]*s;return n}}function jm(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function zm(i,t){var e=t?t.length:0,n=i?Math.min(e,i.length):0,r=new Array(n),s=new Array(e),o;for(o=0;o<n;++o)r[o]=Ao(i[o],t[o]);for(;o<e;++o)s[o]=t[o];return function(a){for(o=0;o<n;++o)s[o]=r[o](a);return s}}function Hm(i,t){var e=new Date;return i=+i,t=+t,function(n){return e.setTime(i*(1-n)+t*n),e}}function Vr(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function Wm(i,t){var e={},n={},r;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in i?e[r]=Ao(i[r],t[r]):n[r]=t[r];return function(s){for(r in e)n[r]=e[r](s);return n}}var Vs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ss=new RegExp(Vs.source,"g");function Ym(i){return function(){return i}}function Gm(i){return function(t){return i(t)+""}}function qm(i,t){var e=Vs.lastIndex=Ss.lastIndex=0,n,r,s,o=-1,a=[],l=[];for(i=i+"",t=t+"";(n=Vs.exec(i))&&(r=Ss.exec(t));)(s=r.index)>e&&(s=t.slice(e,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Vr(n,r)})),e=Ss.lastIndex;return e<t.length&&(s=t.slice(e),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Gm(l[0].x):Ym(t):(t=l.length,function(c){for(var h=0,u;h<t;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}function Ao(i,t){var e=typeof t,n;return t==null||e==="boolean"?Eo(t):(e==="number"?Vr:e==="string"?(n=Pn(t))?(t=n,ua):qm:t instanceof Pn?ua:t instanceof Date?Hm:jm(t)?Vm:Array.isArray(t)?zm:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wm:Vr)(i,t)}function Jm(i,t){return i=+i,t=+t,function(e){return Math.round(i*(1-e)+t*e)}}function Qm(i){return function(){return i}}function Km(i){return+i}var ha=[0,1];function fi(i){return i}function js(i,t){return(t-=i=+i)?function(e){return(e-i)/t}:Qm(isNaN(t)?NaN:.5)}function Zm(i,t){var e;return i>t&&(e=i,i=t,t=e),function(n){return Math.max(i,Math.min(t,n))}}function Xm(i,t,e){var n=i[0],r=i[1],s=t[0],o=t[1];return r<n?(n=js(r,n),s=e(o,s)):(n=js(n,r),s=e(s,o)),function(a){return s(n(a))}}function $m(i,t,e){var n=Math.min(i.length,t.length)-1,r=new Array(n),s=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++o<n;)r[o]=js(i[o],i[o+1]),s[o]=e(t[o],t[o+1]);return function(a){var l=fm(i,a,1,n)-1;return s[l](r[l](a))}}function t0(i,t){return t.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function e0(){var i=ha,t=ha,e=Ao,n,r,s,o=fi,a,l,c;function h(){var d=Math.min(i.length,t.length);return o!==fi&&(o=Zm(i[0],i[d-1])),a=d>2?$m:Xm,l=c=null,u}function u(d){return d==null||isNaN(d=+d)?s:(l||(l=a(i.map(n),t,e)))(n(o(d)))}return u.invert=function(d){return o(r((c||(c=a(t,i.map(n),Vr)))(d)))},u.domain=function(d){return arguments.length?(i=Array.from(d,Km),h()):i.slice()},u.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},u.rangeRound=function(d){return t=Array.from(d),e=Jm,h()},u.clamp=function(d){return arguments.length?(o=d?!0:fi,h()):o!==fi},u.interpolate=function(d){return arguments.length?(e=d,h()):e},u.unknown=function(d){return arguments.length?(s=d,u):s},function(d,y){return n=d,r=y,h()}}function i0(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function jr(i,t){if((e=(i=t?i.toExponential(t-1):i.toExponential()).indexOf("e"))<0)return null;var e,n=i.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+i.slice(e+1)]}function pn(i){return i=jr(Math.abs(i)),i?i[1]:NaN}function n0(i,t){return function(e,n){for(var r=e.length,s=[],o=0,a=i[0],l=0;r>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(e.substring(r-=a,r+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return s.reverse().join(t)}}function r0(i){return function(t){return t.replace(/[0-9]/g,function(e){return i[+e]})}}var s0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zr(i){if(!(t=s0.exec(i)))throw new Error("invalid format: "+i);var t;return new To({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zr.prototype=To.prototype;function To(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}To.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function o0(i){t:for(var t=i.length,e=1,n=-1,r;e<t;++e)switch(i[e]){case".":n=r=e;break;case"0":n===0&&(n=e),r=e;break;default:if(!+i[e])break t;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(r+1):i}var tu;function a0(i,t){var e=jr(i,t);if(!e)return i+"";var n=e[0],r=e[1],s=r-(tu=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+jr(i,Math.max(0,t+s-1))[0]}function da(i,t){var e=jr(i,t);if(!e)return i+"";var n=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const fa={"%":(i,t)=>(i*100).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:i0,e:(i,t)=>i.toExponential(t),f:(i,t)=>i.toFixed(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>da(i*100,t),r:da,s:a0,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function ma(i){return i}var pa=Array.prototype.map,ya=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l0(i){var t=i.grouping===void 0||i.thousands===void 0?ma:n0(pa.call(i.grouping,Number),i.thousands+""),e=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",r=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?ma:r0(pa.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"\u2212":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(u){u=zr(u);var d=u.fill,y=u.align,S=u.sign,A=u.symbol,M=u.zero,D=u.width,V=u.comma,O=u.precision,b=u.trim,T=u.type;T==="n"?(V=!0,T="g"):fa[T]||(O===void 0&&(O=12),b=!0,T="g"),(M||d==="0"&&y==="=")&&(M=!0,d="0",y="=");var F=A==="$"?e:A==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",H=A==="$"?n:/[%p]/.test(T)?o:"",I=fa[T],R=/[defgprs%]/.test(T);O=O===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function N(k){var B=F,U=H,C,_,E;if(T==="c")U=I(k)+U,k="";else{k=+k;var at=k<0||1/k<0;if(k=isNaN(k)?l:I(Math.abs(k),O),b&&(k=o0(k)),at&&+k==0&&S!=="+"&&(at=!1),B=(at?S==="("?S:a:S==="-"||S==="("?"":S)+B,U=(T==="s"?ya[8+tu/3]:"")+U+(at&&S==="("?")":""),R){for(C=-1,_=k.length;++C<_;)if(E=k.charCodeAt(C),48>E||E>57){U=(E===46?r+k.slice(C+1):k.slice(C))+U,k=k.slice(0,C);break}}}V&&!M&&(k=t(k,1/0));var Ft=B.length+k.length+U.length,Ot=Ft<D?new Array(D-Ft+1).join(d):"";switch(V&&M&&(k=t(Ot+k,Ot.length?D-U.length:1/0),Ot=""),y){case"<":k=B+k+U+Ot;break;case"=":k=B+Ot+k+U;break;case"^":k=Ot.slice(0,Ft=Ot.length>>1)+B+k+U+Ot.slice(Ft);break;default:k=Ot+B+k+U;break}return s(k)}return N.toString=function(){return u+""},N}function h(u,d){var y=c((u=zr(u),u.type="f",u)),S=Math.max(-8,Math.min(8,Math.floor(pn(d)/3)))*3,A=Math.pow(10,-S),M=ya[8+S/3];return function(D){return y(A*D)+M}}return{format:c,formatPrefix:h}}var $n,eu,iu;c0({thousands:",",grouping:[3],currency:["$",""]});function c0(i){return $n=l0(i),eu=$n.format,iu=$n.formatPrefix,$n}function u0(i){return Math.max(0,-pn(Math.abs(i)))}function h0(i,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pn(t)/3)))*3-pn(Math.abs(i)))}function d0(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,pn(t)-pn(i))+1}function f0(i,t,e,n){var r=pm(i,t,e),s;switch(n=zr(n==null?",f":n),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(t));return n.precision==null&&!isNaN(s=h0(r,o))&&(n.precision=s),iu(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=d0(r,Math.max(Math.abs(i),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=u0(r))&&(n.precision=s-(n.type==="%")*2);break}}return eu(n)}function m0(i){var t=i.domain;return i.ticks=function(e){var n=t();return mm(n[0],n[n.length-1],e==null?10:e)},i.tickFormat=function(e,n){var r=t();return f0(r[0],r[r.length-1],e==null?10:e,n)},i.nice=function(e){e==null&&(e=10);var n=t(),r=0,s=n.length-1,o=n[r],a=n[s],l,c,h=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);h-- >0;){if(c=zc(o,a,e),c===l)return n[r]=o,n[s]=a,t(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function ba(i){return function(t){return t<0?-Math.pow(-t,i):Math.pow(t,i)}}function p0(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function y0(i){return i<0?-i*i:i*i}function b0(i){var t=i(fi,fi),e=1;function n(){return e===1?i(fi,fi):e===.5?i(p0,y0):i(ba(e),ba(1/e))}return t.exponent=function(r){return arguments.length?(e=+r,n()):e},m0(t)}function nu(){var i=b0(e0());return i.copy=function(){return t0(i,nu()).exponent(i.exponent())},ym.apply(i,arguments),i}function g0(i){for(var t=i.length/6|0,e=new Array(t),n=0;n<t;)e[n]="#"+i.slice(n*6,++n*6);return e}const _0=i=>xm(i[i.length-1]);var w0=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(g0);const v0=_0(w0);function I0(i,t){const e=i.getBoundingClientRect(),n=t.getBoundingClientRect(),r={};return r.top=e.top<0,r.left=e.left<0,r.bottom=e.bottom+n.height>(window.innerHeight||document.documentElement.clientHeight),r.right=e.right>(window.innerWidth||document.documentElement.clientWidth),r.any=r.top||r.left||r.bottom||r.right,r}function S0(i){let t,e=i[0](i[1],i[2])+"",n;return{c(){t=P("div"),this.h()},l(r){t=x(r,"DIV",{class:!0});var s=L(t);s.forEach(g),this.h()},h(){p(t,"class",n="item "+i[3]+" svelte-ybdqo9")},m(r,s){K(r,t,s),t.innerHTML=e},p(r,[s]){s&7&&e!==(e=r[0](r[1],r[2])+"")&&(t.innerHTML=e),s&8&&n!==(n="item "+r[3]+" svelte-ybdqo9")&&p(t,"class",n)},i:_t,o:_t,d(r){r&&g(t)}}}function E0(i,t,e){let{isActive:n=!1}=t,{isFirst:r=!1}=t,{isHover:s=!1}=t,{isSelectable:o=!1}=t,{getOptionLabel:a=void 0}=t,{item:l=void 0}=t,{filterText:c=""}=t,h="";return i.$$set=u=>{"isActive"in u&&e(4,n=u.isActive),"isFirst"in u&&e(5,r=u.isFirst),"isHover"in u&&e(6,s=u.isHover),"isSelectable"in u&&e(7,o=u.isSelectable),"getOptionLabel"in u&&e(0,a=u.getOptionLabel),"item"in u&&e(1,l=u.item),"filterText"in u&&e(2,c=u.filterText)},i.$$.update=()=>{if(i.$$.dirty&242){const u=[];n&&u.push("active"),r&&u.push("first"),s&&u.push("hover"),l.isGroupHeader&&u.push("groupHeader"),l.isGroupItem&&u.push("groupItem"),o||u.push("notSelectable"),e(3,h=u.join(" "))}},[a,l,c,h,n,r,s,o]}class ru extends wi{constructor(t){super(),vi(this,t,E0,S0,Ii,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function ga(i,t,e){const n=i.slice();return n[41]=t[e],n[42]=e,n}function A0(i){let t,e,n=i[1],r=[];for(let a=0;a<n.length;a+=1)r[a]=va(ga(i,n,a));const s=a=>rt(r[a],1,1,()=>{r[a]=null});let o=null;return n.length||(o=_a(i)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=Et(),o&&o.c()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);t=Et(),o&&o.l(a)},m(a,l){for(let c=0;c<r.length;c+=1)r[c].m(a,l);K(a,t,l),o&&o.m(a,l),e=!0},p(a,l){if(l[0]&114390){n=a[1];let c;for(c=0;c<n.length;c+=1){const h=ga(a,n,c);r[c]?(r[c].p(h,l),tt(r[c],1)):(r[c]=va(h),r[c].c(),tt(r[c],1),r[c].m(t.parentNode,t))}for(Yt(),c=n.length;c<r.length;c+=1)s(c);Gt(),!n.length&&o?o.p(a,l):n.length?o&&(o.d(1),o=null):(o=_a(a),o.c(),o.m(t.parentNode,t))}},i(a){if(!e){for(let l=0;l<n.length;l+=1)tt(r[l]);e=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)rt(r[l]);e=!1},d(a){On(r,a),a&&g(t),o&&o.d(a)}}}function T0(i){let t,e,n;var r=i[3];function s(o){return{props:{items:o[1],itemHeight:o[8],$$slots:{default:[N0,({item:a,i:l})=>({41:a,42:l}),({item:a,i:l})=>[0,(a?1024:0)|(l?2048:0)]]},$$scope:{ctx:o}}}}return r&&(t=new r(s(i))),{c(){t&&qt(t.$$.fragment),e=Et()},l(o){t&&li(t.$$.fragment,o),e=Et()},m(o,a){t&&Jt(t,o,a),K(o,e,a),n=!0},p(o,a){const l={};if(a[0]&2&&(l.items=o[1]),a[0]&256&&(l.itemHeight=o[8]),a[0]&9814|a[1]&11264&&(l.$$scope={dirty:a,ctx:o}),r!==(r=o[3])){if(t){Yt();const c=t;rt(c.$$.fragment,1,0,()=>{Qt(c,1)}),Gt()}r?(t=new r(s(o)),qt(t.$$.fragment),tt(t.$$.fragment,1),Jt(t,e.parentNode,e)):t=null}else r&&t.$set(l)},i(o){n||(t&&tt(t.$$.fragment,o),n=!0)},o(o){t&&rt(t.$$.fragment,o),n=!1},d(o){o&&g(e),t&&Qt(t,o)}}}function _a(i){let t,e=!i[11]&&wa(i);return{c(){e&&e.c(),t=Et()},l(n){e&&e.l(n),t=Et()},m(n,r){e&&e.m(n,r),K(n,t,r)},p(n,r){n[11]?e&&(e.d(1),e=null):e?e.p(n,r):(e=wa(n),e.c(),e.m(t.parentNode,t))},d(n){e&&e.d(n),n&&g(t)}}}function wa(i){let t,e;return{c(){t=P("div"),e=ct(i[12]),this.h()},l(n){t=x(n,"DIV",{class:!0});var r=L(t);e=ut(r,i[12]),r.forEach(g),this.h()},h(){p(t,"class","empty svelte-1mmk1xt")},m(n,r){K(n,t,r),w(t,e)},p(n,r){r[0]&4096&&oi(e,n[12])},d(n){n&&g(t)}}}function F0(i){let t,e,n,r,s,o;var a=i[4];function l(d){return{props:{item:d[41],filterText:d[13],getOptionLabel:d[6],isFirst:zs(d[42]),isActive:Hr(d[41],d[9],d[10]),isHover:Wr(d[2],d[41],d[42],d[1]),isSelectable:Wi(d[41])}}}a&&(e=new a(l(i)));function c(){return i[29](i[42])}function h(){return i[30](i[42])}function u(...d){return i[31](i[41],i[42],...d)}return{c(){t=P("div"),e&&qt(e.$$.fragment),n=Dt(),this.h()},l(d){t=x(d,"DIV",{class:!0,tabindex:!0});var y=L(t);e&&li(e.$$.fragment,y),n=Lt(y),y.forEach(g),this.h()},h(){p(t,"class","listItem"),p(t,"tabindex","-1")},m(d,y){K(d,t,y),e&&Jt(e,t,null),w(t,n),r=!0,s||(o=[At(t,"mouseover",c),At(t,"focus",h),At(t,"click",u)],s=!0)},p(d,y){i=d;const S={};if(y[0]&2&&(S.item=i[41]),y[0]&8192&&(S.filterText=i[13]),y[0]&64&&(S.getOptionLabel=i[6]),y[0]&1538&&(S.isActive=Hr(i[41],i[9],i[10])),y[0]&6&&(S.isHover=Wr(i[2],i[41],i[42],i[1])),y[0]&2&&(S.isSelectable=Wi(i[41])),a!==(a=i[4])){if(e){Yt();const A=e;rt(A.$$.fragment,1,0,()=>{Qt(A,1)}),Gt()}a?(e=new a(l(i)),qt(e.$$.fragment),tt(e.$$.fragment,1),Jt(e,t,n)):e=null}else a&&e.$set(S)},i(d){r||(e&&tt(e.$$.fragment,d),r=!0)},o(d){e&&rt(e.$$.fragment,d),r=!1},d(d){d&&g(t),e&&Qt(e),s=!1,xn(o)}}}function O0(i){let t,e=i[7](i[41])+"",n;return{c(){t=P("div"),n=ct(e),this.h()},l(r){t=x(r,"DIV",{class:!0});var s=L(t);n=ut(s,e),s.forEach(g),this.h()},h(){p(t,"class","listGroupTitle svelte-1mmk1xt")},m(r,s){K(r,t,s),w(t,n)},p(r,s){s[0]&130&&e!==(e=r[7](r[41])+"")&&oi(n,e)},i:_t,o:_t,d(r){r&&g(t)}}}function va(i){let t,e,n,r;const s=[O0,F0],o=[];function a(l,c){return l[41].isGroupHeader&&!l[41].isSelectable?0:1}return t=a(i),e=o[t]=s[t](i),{c(){e.c(),n=Et()},l(l){e.l(l),n=Et()},m(l,c){o[t].m(l,c),K(l,n,c),r=!0},p(l,c){let h=t;t=a(l),t===h?o[t].p(l,c):(Yt(),rt(o[h],1,1,()=>{o[h]=null}),Gt(),e=o[t],e?e.p(l,c):(e=o[t]=s[t](l),e.c()),tt(e,1),e.m(n.parentNode,n))},i(l){r||(tt(e),r=!0)},o(l){rt(e),r=!1},d(l){o[t].d(l),l&&g(n)}}}function N0(i){let t,e,n,r,s;var o=i[4];function a(u){return{props:{item:u[41],filterText:u[13],getOptionLabel:u[6],isFirst:zs(u[42]),isActive:Hr(u[41],u[9],u[10]),isHover:Wr(u[2],u[41],u[42],u[1]),isSelectable:Wi(u[41])}}}o&&(e=new o(a(i)));function l(){return i[26](i[42])}function c(){return i[27](i[42])}function h(...u){return i[28](i[41],i[42],...u)}return{c(){t=P("div"),e&&qt(e.$$.fragment),this.h()},l(u){t=x(u,"DIV",{class:!0});var d=L(t);e&&li(e.$$.fragment,d),d.forEach(g),this.h()},h(){p(t,"class","listItem")},m(u,d){K(u,t,d),e&&Jt(e,t,null),n=!0,r||(s=[At(t,"mouseover",l),At(t,"focus",c),At(t,"click",h)],r=!0)},p(u,d){i=u;const y={};if(d[1]&1024&&(y.item=i[41]),d[0]&8192&&(y.filterText=i[13]),d[0]&64&&(y.getOptionLabel=i[6]),d[1]&2048&&(y.isFirst=zs(i[42])),d[0]&1536|d[1]&1024&&(y.isActive=Hr(i[41],i[9],i[10])),d[0]&6|d[1]&3072&&(y.isHover=Wr(i[2],i[41],i[42],i[1])),d[1]&1024&&(y.isSelectable=Wi(i[41])),o!==(o=i[4])){if(e){Yt();const S=e;rt(S.$$.fragment,1,0,()=>{Qt(S,1)}),Gt()}o?(e=new o(a(i)),qt(e.$$.fragment),tt(e.$$.fragment,1),Jt(e,t,null)):e=null}else o&&e.$set(y)},i(u){n||(e&&tt(e.$$.fragment,u),n=!0)},o(u){e&&rt(e.$$.fragment,u),n=!1},d(u){u&&g(t),e&&Qt(e),r=!1,xn(s)}}}function B0(i){let t,e,n,r,s,o;const a=[T0,A0],l=[];function c(h,u){return h[5]?0:1}return e=c(i),n=l[e]=a[e](i),{c(){t=P("div"),n.c(),this.h()},l(h){t=x(h,"DIV",{class:!0,style:!0});var u=L(t);n.l(u),u.forEach(g),this.h()},h(){p(t,"class","listContainer svelte-1mmk1xt"),p(t,"style",i[14]),_e(t,"virtualList",i[5])},m(h,u){K(h,t,u),l[e].m(t,null),i[32](t),r=!0,s||(o=[At(window,"keydown",i[17]),At(window,"resize",i[18])],s=!0)},p(h,u){let d=e;e=c(h),e===d?l[e].p(h,u):(Yt(),rt(l[d],1,1,()=>{l[d]=null}),Gt(),n=l[e],n?n.p(h,u):(n=l[e]=a[e](h),n.c()),tt(n,1),n.m(t,null)),(!r||u[0]&16384)&&p(t,"style",h[14]),u[0]&32&&_e(t,"virtualList",h[5])},i(h){r||(tt(n),r=!0)},o(h){rt(n),r=!1},d(h){h&&g(t),l[e].d(),i[32](null),s=!1,xn(o)}}}function Hr(i,t,e){return t&&t[e]===i[e]}function zs(i){return i===0}function Wr(i,t,e,n){return Wi(t)&&(i===e||n.length===1)}function Wi(i){return i.isGroupHeader&&i.isSelectable||i.selectable||!i.hasOwnProperty("selectable")}function k0(i,t,e){const n=Hs();let{container:r=void 0}=t,{VirtualList:s=null}=t,{Item:o=ru}=t,{isVirtualList:a=!1}=t,{items:l=[]}=t,{labelIdentifier:c="label"}=t,{getOptionLabel:h=(v,W)=>{if(v)return v.isCreator?`Create "${W}"`:v[c]}}=t,{getGroupHeaderLabel:u=null}=t,{itemHeight:d=40}=t,{hoverItemIndex:y=0}=t,{value:S=void 0}=t,{optionIdentifier:A="value"}=t,{hideEmptyState:M=!1}=t,{noOptionsMessage:D="No options"}=t,{isMulti:V=!1}=t,{activeItemIndex:O=0}=t,{filterText:b=""}=t,{parent:T=null}=t,{listPlacement:F=null}=t,{listAutoWidth:H=null}=t,{listOffset:I=5}=t,R=0,N=!1,k;Yr(()=>{if(l.length>0&&!V&&S){const v=l.findIndex(W=>W[A]===S[A]);v&&e(2,y=v)}Ft("active"),r.addEventListener("scroll",()=>{clearTimeout(R),R=setTimeout(()=>{N=!1},100)},!1)}),Ja(()=>{l||e(1,l=[]),l!==k&&l.length>0&&e(2,y=0),k=l});function B(v){v.isCreator||n("itemSelected",v)}function U(v){N||e(2,y=v)}function C(v){const{item:W,i:yt,event:Ct}=v;if(Ct.stopPropagation(),S&&!V&&S[A]===W[A])return _();W.isCreator?n("itemCreated",b):Wi(W)&&(e(19,O=yt),e(2,y=yt),B(W))}function _(){n("closeList")}async function E(v){if(a)return;let W=!0;for(;W;)v>0&&y===l.length-1?e(2,y=0):v<0&&y===0?e(2,y=l.length-1):e(2,y=y+v),W=!Wi(l[y]);await tr(),Ft("hover")}function at(v){switch(v.key){case"Escape":v.preventDefault(),_();break;case"ArrowDown":v.preventDefault(),l.length&&E(1);break;case"ArrowUp":v.preventDefault(),l.length&&E(-1);break;case"Enter":if(v.preventDefault(),l.length===0)break;const W=l[y];if(S&&!V&&S[A]===W[A]){_();break}W.isCreator?n("itemCreated",b):(e(19,O=y),B(l[y]));break;case"Tab":if(v.preventDefault(),l.length===0||S&&S[A]===l[y][A])return _();e(19,O=y),B(l[y]);break}}function Ft(v){if(a||!r)return;let W;const yt=r.querySelector(`.listItem .${v}`);yt&&(W=r.getBoundingClientRect().bottom-yt.getBoundingClientRect().bottom),e(0,r.scrollTop-=W,r)}let Ot;function zt(){const{height:v,width:W}=T.getBoundingClientRect();e(14,Ot=""),e(14,Ot+=`min-width:${W}px;width:${H?"auto":"100%"};`),F==="top"||F==="auto"&&I0(T,r).bottom?e(14,Ot+=`bottom:${v+I}px;`):e(14,Ot+=`top:${v+I}px;`)}const Ze=v=>U(v),Oe=v=>U(v),Ti=(v,W,yt)=>C({item:v,i:W,event:yt}),Ne=v=>U(v),Xe=v=>U(v),Re=(v,W,yt)=>C({item:v,i:W,event:yt});function ye(v){ji[v?"unshift":"push"](()=>{r=v,e(0,r)})}return i.$$set=v=>{"container"in v&&e(0,r=v.container),"VirtualList"in v&&e(3,s=v.VirtualList),"Item"in v&&e(4,o=v.Item),"isVirtualList"in v&&e(5,a=v.isVirtualList),"items"in v&&e(1,l=v.items),"labelIdentifier"in v&&e(20,c=v.labelIdentifier),"getOptionLabel"in v&&e(6,h=v.getOptionLabel),"getGroupHeaderLabel"in v&&e(7,u=v.getGroupHeaderLabel),"itemHeight"in v&&e(8,d=v.itemHeight),"hoverItemIndex"in v&&e(2,y=v.hoverItemIndex),"value"in v&&e(9,S=v.value),"optionIdentifier"in v&&e(10,A=v.optionIdentifier),"hideEmptyState"in v&&e(11,M=v.hideEmptyState),"noOptionsMessage"in v&&e(12,D=v.noOptionsMessage),"isMulti"in v&&e(21,V=v.isMulti),"activeItemIndex"in v&&e(19,O=v.activeItemIndex),"filterText"in v&&e(13,b=v.filterText),"parent"in v&&e(22,T=v.parent),"listPlacement"in v&&e(23,F=v.listPlacement),"listAutoWidth"in v&&e(24,H=v.listAutoWidth),"listOffset"in v&&e(25,I=v.listOffset)},i.$$.update=()=>{i.$$.dirty[0]&4194305&&T&&r&&zt()},[r,l,y,s,o,a,h,u,d,S,A,M,D,b,Ot,U,C,at,zt,O,c,V,T,F,H,I,Ze,Oe,Ti,Ne,Xe,Re,ye]}class D0 extends wi{constructor(t){super(),vi(this,t,k0,B0,Ii,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function L0(i){let t,e=i[0](i[1])+"";return{c(){t=P("div"),this.h()},l(n){t=x(n,"DIV",{class:!0});var r=L(t);r.forEach(g),this.h()},h(){p(t,"class","selection svelte-1be6cx3")},m(n,r){K(n,t,r),t.innerHTML=e},p(n,[r]){r&3&&e!==(e=n[0](n[1])+"")&&(t.innerHTML=e)},i:_t,o:_t,d(n){n&&g(t)}}}function R0(i,t,e){let{getSelectionLabel:n=void 0}=t,{item:r=void 0}=t;return i.$$set=s=>{"getSelectionLabel"in s&&e(0,n=s.getSelectionLabel),"item"in s&&e(1,r=s.item)},[n,r]}class M0 extends wi{constructor(t){super(),vi(this,t,R0,L0,Ii,{getSelectionLabel:0,item:1})}}function Ia(i,t,e){const n=i.slice();return n[9]=t[e],n[11]=e,n}function Sa(i){let t,e,n,r,s;function o(...a){return i[6](i[11],...a)}return{c(){t=P("div"),e=Rt("svg"),n=Rt("path"),this.h()},l(a){t=x(a,"DIV",{class:!0});var l=L(t);e=Mt(l,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var c=L(e);n=Mt(c,"path",{d:!0}),L(n).forEach(g),c.forEach(g),l.forEach(g),this.h()},h(){p(n,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),p(e,"width","100%"),p(e,"height","100%"),p(e,"viewBox","-2 -2 50 50"),p(e,"focusable","false"),p(e,"aria-hidden","true"),p(e,"role","presentation"),p(e,"class","svelte-j22aje"),p(t,"class","multiSelectItem_clear svelte-j22aje")},m(a,l){K(a,t,l),w(t,e),w(e,n),r||(s=At(t,"click",o),r=!0)},p(a,l){i=a},d(a){a&&g(t),r=!1,s()}}}function Ea(i){let t,e,n=i[4](i[9])+"",r,s,o,a,l,c=!i[2]&&!i[3]&&Sa(i);function h(...u){return i[7](i[11],...u)}return{c(){t=P("div"),e=P("div"),r=Dt(),c&&c.c(),s=Dt(),this.h()},l(u){t=x(u,"DIV",{class:!0});var d=L(t);e=x(d,"DIV",{class:!0});var y=L(e);y.forEach(g),r=Lt(d),c&&c.l(d),s=Lt(d),d.forEach(g),this.h()},h(){p(e,"class","multiSelectItem_label svelte-j22aje"),p(t,"class",o="multiSelectItem "+(i[1]===i[11]?"active":"")+" "+(i[2]?"disabled":"")+" svelte-j22aje")},m(u,d){K(u,t,d),w(t,e),e.innerHTML=n,w(t,r),c&&c.m(t,null),w(t,s),a||(l=At(t,"click",h),a=!0)},p(u,d){i=u,d&17&&n!==(n=i[4](i[9])+"")&&(e.innerHTML=n),!i[2]&&!i[3]?c?c.p(i,d):(c=Sa(i),c.c(),c.m(t,s)):c&&(c.d(1),c=null),d&6&&o!==(o="multiSelectItem "+(i[1]===i[11]?"active":"")+" "+(i[2]?"disabled":"")+" svelte-j22aje")&&p(t,"class",o)},d(u){u&&g(t),c&&c.d(),a=!1,l()}}}function U0(i){let t,e=i[0],n=[];for(let r=0;r<e.length;r+=1)n[r]=Ea(Ia(i,e,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Et()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);t=Et()},m(r,s){for(let o=0;o<n.length;o+=1)n[o].m(r,s);K(r,t,s)},p(r,[s]){if(s&63){e=r[0];let o;for(o=0;o<e.length;o+=1){const a=Ia(r,e,o);n[o]?n[o].p(a,s):(n[o]=Ea(a),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=e.length}},i:_t,o:_t,d(r){On(n,r),r&&g(t)}}}function C0(i,t,e){const n=Hs();let{value:r=[]}=t,{activeValue:s=void 0}=t,{isDisabled:o=!1}=t,{multiFullItemClearable:a=!1}=t,{getSelectionLabel:l=void 0}=t;function c(d,y){y.stopPropagation(),n("multiItemClear",{i:d})}const h=(d,y)=>c(d,y),u=(d,y)=>a?c(d,y):{};return i.$$set=d=>{"value"in d&&e(0,r=d.value),"activeValue"in d&&e(1,s=d.activeValue),"isDisabled"in d&&e(2,o=d.isDisabled),"multiFullItemClearable"in d&&e(3,a=d.multiFullItemClearable),"getSelectionLabel"in d&&e(4,l=d.getSelectionLabel)},[r,s,o,a,l,c,h,u]}class P0 extends wi{constructor(t){super(),vi(this,t,C0,U0,Ii,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function Aa(i,t,e){const n=i.slice();return n[23]=t[e],n}const x0=i=>({item:i&32,i:i&32,hoverItemIndex:i&2}),Ta=i=>({item:i[23].data,i:i[23].index,hoverItemIndex:i[1]});function V0(i){let t;return{c(){t=ct("Missing template")},l(e){t=ut(e,"Missing template")},m(e,n){K(e,t,n)},d(e){e&&g(t)}}}function Fa(i,t){let e,n,r;const s=t[15].default,o=ku(s,t,t[14],Ta),a=o||V0();return{key:i,first:null,c(){e=P("svelte-virtual-list-row"),a&&a.c(),n=Dt(),this.h()},l(l){e=x(l,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var c=L(e);a&&a.l(c),n=Lt(c),c.forEach(g),this.h()},h(){Es(e,"class","svelte-yyenik"),this.first=e},m(l,c){K(l,e,c),a&&a.m(e,null),w(e,n),r=!0},p(l,c){t=l,o&&o.p&&(!r||c&16418)&&Du(o,s,t,t[14],r?Ru(s,t[14],c,x0):Lu(t[14]),Ta)},i(l){r||(tt(a,l),r=!0)},o(l){rt(a,l),r=!1},d(l){l&&g(e),a&&a.d(l)}}}function j0(i){let t,e,n=[],r=new Map,s,o,a,l,c=i[5];const h=u=>u[23].index;for(let u=0;u<c.length;u+=1){let d=Aa(i,c,u),y=h(d);r.set(y,n[u]=Fa(y,d))}return{c(){t=P("svelte-virtual-list-viewport"),e=P("svelte-virtual-list-contents");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){t=x(u,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var d=L(t);e=x(d,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var y=L(e);for(let S=0;S<n.length;S+=1)n[S].l(y);y.forEach(g),d.forEach(g),this.h()},h(){Ie(e,"padding-top",i[6]+"px"),Ie(e,"padding-bottom",i[7]+"px"),Es(e,"class","svelte-yyenik"),Ie(t,"height",i[0]),Es(t,"class","svelte-yyenik"),Qa(()=>i[18].call(t))},m(u,d){K(u,t,d),w(t,e);for(let y=0;y<n.length;y+=1)n[y].m(e,null);i[16](e),i[17](t),s=Nu(t,i[18].bind(t)),o=!0,a||(l=At(t,"scroll",i[8]),a=!0)},p(u,[d]){d&16418&&(c=u[5],Yt(),n=Ka(n,d,h,1,u,c,r,e,Bu,Fa,null,Aa),Gt()),(!o||d&64)&&Ie(e,"padding-top",u[6]+"px"),(!o||d&128)&&Ie(e,"padding-bottom",u[7]+"px"),(!o||d&1)&&Ie(t,"height",u[0])},i(u){if(!o){for(let d=0;d<c.length;d+=1)tt(n[d]);o=!0}},o(u){for(let d=0;d<n.length;d+=1)rt(n[d]);o=!1},d(u){u&&g(t);for(let d=0;d<n.length;d+=1)n[d].d();i[16](null),i[17](null),s(),a=!1,l()}}}function z0(i,t,e){let{$$slots:n={},$$scope:r}=t,{items:s=void 0}=t,{height:o="100%"}=t,{itemHeight:a=40}=t,{hoverItemIndex:l=0}=t,{start:c=0}=t,{end:h=0}=t,u=[],d,y,S,A=0,M,D,V=0,O=0,b;async function T(N,k,B){const{scrollTop:U}=y;await tr();let C=V-U,_=c;for(;C<k&&_<N.length;){let at=d[_-c];at||(e(10,h=_+1),await tr(),at=d[_-c]),C+=u[_]=B||at.offsetHeight,_+=1}e(10,h=_);const E=N.length-h;b=(V+C)/h,e(7,O=E*b),u.length=N.length,y&&e(3,y.scrollTop=0,y)}async function F(){const{scrollTop:N}=y,k=c;for(let _=0;_<d.length;_+=1)u[c+_]=a||d[_].offsetHeight;let B=0,U=0;for(;B<s.length;){const _=u[B]||b;if(U+_>N){e(9,c=B),e(6,V=U);break}U+=_,B+=1}for(;B<s.length&&(U+=u[B]||b,B+=1,!(U>N+A)););e(10,h=B);const C=s.length-h;for(b=U/h;B<s.length;)u[B++]=b;if(e(7,O=C*b),c<k){await tr();let _=0,E=0;for(let Ft=c;Ft<k;Ft+=1)d[Ft-c]&&(_+=u[Ft],E+=a||d[Ft-c].offsetHeight);const at=E-_;y.scrollTo(0,N+at)}}Yr(()=>{d=S.getElementsByTagName("svelte-virtual-list-row"),e(13,D=!0)});function H(N){ji[N?"unshift":"push"](()=>{S=N,e(4,S)})}function I(N){ji[N?"unshift":"push"](()=>{y=N,e(3,y)})}function R(){A=this.offsetHeight,e(2,A)}return i.$$set=N=>{"items"in N&&e(11,s=N.items),"height"in N&&e(0,o=N.height),"itemHeight"in N&&e(12,a=N.itemHeight),"hoverItemIndex"in N&&e(1,l=N.hoverItemIndex),"start"in N&&e(9,c=N.start),"end"in N&&e(10,h=N.end),"$$scope"in N&&e(14,r=N.$$scope)},i.$$.update=()=>{i.$$.dirty&3584&&e(5,M=s.slice(c,h).map((N,k)=>({index:k+c,data:N}))),i.$$.dirty&14340&&D&&T(s,A,a)},[o,l,A,y,S,M,V,O,F,c,h,s,a,D,r,n,H,I,R]}class H0 extends wi{constructor(t){super(),vi(this,t,z0,j0,Ii,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function W0(i){let t,e;return{c(){t=Rt("svg"),e=Rt("path"),this.h()},l(n){t=Mt(n,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var r=L(t);e=Mt(r,"path",{fill:!0,d:!0}),L(e).forEach(g),r.forEach(g),this.h()},h(){p(e,"fill","currentColor"),p(e,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),p(t,"width","100%"),p(t,"height","100%"),p(t,"viewBox","-2 -2 50 50"),p(t,"focusable","false"),p(t,"aria-hidden","true"),p(t,"role","presentation")},m(n,r){K(n,t,r),w(t,e)},p:_t,i:_t,o:_t,d(n){n&&g(t)}}}class Y0 extends wi{constructor(t){super(),vi(this,t,null,W0,Ii,{})}}function G0(i,t,e){let n;return function(){let s=this,o=arguments,a=function(){n=null,e||i.apply(s,o)},l=e&&!n;clearTimeout(n),n=setTimeout(a,t),l&&i.apply(s,o)}}function Oa(i,t,e){const n=i.slice();return n[103]=t[e],n}function Na(i){let t,e,n,r,s;return{c(){t=P("span"),e=ct(i[33]),n=Dt(),r=P("span"),s=ct(i[32]),this.h()},l(o){t=x(o,"SPAN",{id:!0});var a=L(t);e=ut(a,i[33]),a.forEach(g),n=Lt(o),r=x(o,"SPAN",{id:!0});var l=L(r);s=ut(l,i[32]),l.forEach(g),this.h()},h(){p(t,"id","aria-selection"),p(r,"id","aria-context")},m(o,a){K(o,t,a),w(t,e),K(o,n,a),K(o,r,a),w(r,s)},p(o,a){a[1]&4&&oi(e,o[33]),a[1]&2&&oi(s,o[32])},d(o){o&&g(t),o&&g(n),o&&g(r)}}}function Ba(i){let t,e,n;const r=[i[18]];var s=i[17];function o(a){let l={};for(let c=0;c<r.length;c+=1)l=Ws(l,r[c]);return{props:l}}return s&&(t=new s(o())),{c(){t&&qt(t.$$.fragment),e=Et()},l(a){t&&li(t.$$.fragment,a),e=Et()},m(a,l){t&&Jt(t,a,l),K(a,e,l),n=!0},p(a,l){const c=l[0]&262144?Ys(r,[Za(a[18])]):{};if(s!==(s=a[17])){if(t){Yt();const h=t;rt(h.$$.fragment,1,0,()=>{Qt(h,1)}),Gt()}s?(t=new s(o()),qt(t.$$.fragment),tt(t.$$.fragment,1),Jt(t,e.parentNode,e)):t=null}else s&&t.$set(c)},i(a){n||(t&&tt(t.$$.fragment,a),n=!0)},o(a){t&&rt(t.$$.fragment,a),n=!1},d(a){a&&g(e),t&&Qt(t,a)}}}function ka(i){let t,e,n;var r=i[26];function s(o){return{props:{value:o[2],getSelectionLabel:o[12],activeValue:o[30],isDisabled:o[9],multiFullItemClearable:o[8]}}}return r&&(t=new r(s(i)),t.$on("multiItemClear",i[38]),t.$on("focus",i[40])),{c(){t&&qt(t.$$.fragment),e=Et()},l(o){t&&li(t.$$.fragment,o),e=Et()},m(o,a){t&&Jt(t,o,a),K(o,e,a),n=!0},p(o,a){const l={};if(a[0]&4&&(l.value=o[2]),a[0]&4096&&(l.getSelectionLabel=o[12]),a[0]&1073741824&&(l.activeValue=o[30]),a[0]&512&&(l.isDisabled=o[9]),a[0]&256&&(l.multiFullItemClearable=o[8]),r!==(r=o[26])){if(t){Yt();const c=t;rt(c.$$.fragment,1,0,()=>{Qt(c,1)}),Gt()}r?(t=new r(s(o)),t.$on("multiItemClear",o[38]),t.$on("focus",o[40]),qt(t.$$.fragment),tt(t.$$.fragment,1),Jt(t,e.parentNode,e)):t=null}else r&&t.$set(l)},i(o){n||(t&&tt(t.$$.fragment,o),n=!0)},o(o){t&&rt(t.$$.fragment,o),n=!1},d(o){o&&g(e),t&&Qt(t,o)}}}function Da(i){let t,e,n,r,s;var o=i[25];function a(l){return{props:{item:l[2],getSelectionLabel:l[12]}}}return o&&(e=new o(a(i))),{c(){t=P("div"),e&&qt(e.$$.fragment),this.h()},l(l){t=x(l,"DIV",{class:!0});var c=L(t);e&&li(e.$$.fragment,c),c.forEach(g),this.h()},h(){p(t,"class","selectedItem svelte-1c314rr")},m(l,c){K(l,t,c),e&&Jt(e,t,null),n=!0,r||(s=At(t,"focus",i[40]),r=!0)},p(l,c){const h={};if(c[0]&4&&(h.item=l[2]),c[0]&4096&&(h.getSelectionLabel=l[12]),o!==(o=l[25])){if(e){Yt();const u=e;rt(u.$$.fragment,1,0,()=>{Qt(u,1)}),Gt()}o?(e=new o(a(l)),qt(e.$$.fragment),tt(e.$$.fragment,1),Jt(e,t,null)):e=null}else o&&e.$set(h)},i(l){n||(e&&tt(e.$$.fragment,l),n=!0)},o(l){e&&rt(e.$$.fragment,l),n=!1},d(l){l&&g(t),e&&Qt(e),r=!1,s()}}}function La(i){let t,e,n,r,s;var o=i[23];function a(l){return{}}return o&&(e=new o(a())),{c(){t=P("div"),e&&qt(e.$$.fragment),this.h()},l(l){t=x(l,"DIV",{class:!0,"aria-hidden":!0});var c=L(t);e&&li(e.$$.fragment,c),c.forEach(g),this.h()},h(){p(t,"class","clearSelect svelte-1c314rr"),p(t,"aria-hidden","true")},m(l,c){K(l,t,c),e&&Jt(e,t,null),n=!0,r||(s=At(t,"click",Mu(i[27])),r=!0)},p(l,c){if(o!==(o=l[23])){if(e){Yt();const h=e;rt(h.$$.fragment,1,0,()=>{Qt(h,1)}),Gt()}o?(e=new o(a()),qt(e.$$.fragment),tt(e.$$.fragment,1),Jt(e,t,null)):e=null}},i(l){n||(e&&tt(e.$$.fragment,l),n=!0)},o(l){e&&rt(e.$$.fragment,l),n=!1},d(l){l&&g(t),e&&Qt(e),r=!1,s()}}}function Ra(i){let t;function e(s,o){return s[22]?J0:q0}let n=e(i),r=n(i);return{c(){t=P("div"),r.c(),this.h()},l(s){t=x(s,"DIV",{class:!0,"aria-hidden":!0});var o=L(t);r.l(o),o.forEach(g),this.h()},h(){p(t,"class","indicator svelte-1c314rr"),p(t,"aria-hidden","true")},m(s,o){K(s,t,o),r.m(t,null)},p(s,o){n===(n=e(s))&&r?r.p(s,o):(r.d(1),r=n(s),r&&(r.c(),r.m(t,null)))},d(s){s&&g(t),r.d()}}}function q0(i){let t,e;return{c(){t=Rt("svg"),e=Rt("path"),this.h()},l(n){t=Mt(n,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var r=L(t);e=Mt(r,"path",{d:!0}),L(e).forEach(g),r.forEach(g),this.h()},h(){p(e,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),p(t,"width","100%"),p(t,"height","100%"),p(t,"viewBox","0 0 20 20"),p(t,"focusable","false"),p(t,"aria-hidden","true"),p(t,"class","svelte-1c314rr")},m(n,r){K(n,t,r),w(t,e)},p:_t,d(n){n&&g(t)}}}function J0(i){let t,e;return{c(){t=new Cu(!1),e=Et(),this.h()},l(n){t=Pu(n,!1),e=Et(),this.h()},h(){t.a=e},m(n,r){t.m(i[22],n,r),K(n,e,r)},p(n,r){r[0]&4194304&&t.p(n[22])},d(n){n&&g(e),n&&t.d()}}}function Ma(i){let t,e,n;return{c(){t=P("div"),e=Rt("svg"),n=Rt("circle"),this.h()},l(r){t=x(r,"DIV",{class:!0});var s=L(t);e=Mt(s,"svg",{class:!0,viewBox:!0});var o=L(e);n=Mt(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),L(n).forEach(g),o.forEach(g),s.forEach(g),this.h()},h(){p(n,"class","spinner_path svelte-1c314rr"),p(n,"cx","50"),p(n,"cy","50"),p(n,"r","20"),p(n,"fill","none"),p(n,"stroke","currentColor"),p(n,"stroke-width","5"),p(n,"stroke-miterlimit","10"),p(e,"class","spinner_icon svelte-1c314rr"),p(e,"viewBox","25 25 50 50"),p(t,"class","spinner svelte-1c314rr")},m(r,s){K(r,t,s),w(t,e),w(e,n)},d(r){r&&g(t)}}}function Ua(i){let t,e,n,r;const s=[i[34]];function o(c){i[84](c)}var a=i[24];function l(c){let h={};for(let u=0;u<s.length;u+=1)h=Ws(h,s[u]);return c[28]!==void 0&&(h.hoverItemIndex=c[28]),{props:h}}return a&&(t=new a(l(i)),ji.push(()=>Lo(t,"hoverItemIndex",o)),t.$on("itemSelected",i[43]),t.$on("itemCreated",i[44]),t.$on("closeList",i[45])),{c(){t&&qt(t.$$.fragment),n=Et()},l(c){t&&li(t.$$.fragment,c),n=Et()},m(c,h){t&&Jt(t,c,h),K(c,n,h),r=!0},p(c,h){const u=h[1]&8?Ys(s,[Za(c[34])]):{};if(!e&&h[0]&268435456&&(e=!0,u.hoverItemIndex=c[28],Uu(()=>e=!1)),a!==(a=c[24])){if(t){Yt();const d=t;rt(d.$$.fragment,1,0,()=>{Qt(d,1)}),Gt()}a?(t=new a(l(c)),ji.push(()=>Lo(t,"hoverItemIndex",o)),t.$on("itemSelected",c[43]),t.$on("itemCreated",c[44]),t.$on("closeList",c[45]),qt(t.$$.fragment),tt(t.$$.fragment,1),Jt(t,n.parentNode,n)):t=null}else a&&t.$set(u)},i(c){r||(t&&tt(t.$$.fragment,c),r=!0)},o(c){t&&rt(t.$$.fragment,c),r=!1},d(c){c&&g(n),t&&Qt(t,c)}}}function Ca(i){let t,e,n;return{c(){t=P("input"),this.h()},l(r){t=x(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){p(t,"name",e=i[16].name),p(t,"type","hidden"),t.value=n=i[2]?i[12](i[2]):null,p(t,"class","svelte-1c314rr")},m(r,s){K(r,t,s)},p(r,s){s[0]&65536&&e!==(e=r[16].name)&&p(t,"name",e),s[0]&4100&&n!==(n=r[2]?r[12](r[2]):null)&&(t.value=n)},d(r){r&&g(t)}}}function Pa(i){let t,e=i[2],n=[];for(let r=0;r<e.length;r+=1)n[r]=xa(Oa(i,e,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Et()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);t=Et()},m(r,s){for(let o=0;o<n.length;o+=1)n[o].m(r,s);K(r,t,s)},p(r,s){if(s[0]&69636){e=r[2];let o;for(o=0;o<e.length;o+=1){const a=Oa(r,e,o);n[o]?n[o].p(a,s):(n[o]=xa(a),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=e.length}},d(r){On(n,r),r&&g(t)}}}function xa(i){let t,e,n;return{c(){t=P("input"),this.h()},l(r){t=x(r,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){p(t,"name",e=i[16].name),p(t,"type","hidden"),t.value=n=i[103]?i[12](i[103]):null,p(t,"class","svelte-1c314rr")},m(r,s){K(r,t,s)},p(r,s){s[0]&65536&&e!==(e=r[16].name)&&p(t,"name",e),s[0]&4100&&n!==(n=r[103]?r[12](r[103]):null)&&(t.value=n)},d(r){r&&g(t)}}}function Q0(i){let t,e,n,r,s,o,a,l,c,h,u,d,y,S,A,M,D,V,O=i[1]&&Na(i),b=i[17]&&Ba(i),T=i[35]&&ka(i),F=[{readOnly:a=!i[13]},i[31],{placeholder:i[36]},{style:i[14]},{disabled:i[9]}],H={};for(let _=0;_<F.length;_+=1)H=Ws(H,F[_]);let I=!i[7]&&i[29]&&Da(i),R=i[37]&&La(i),N=!i[37]&&(i[20]||i[19]&&!i[2]||!i[13]&&!i[9]&&!i[4]&&(i[29]&&!i[15]||!i[29]))&&Ra(i),k=i[4]&&Ma(),B=i[5]&&Ua(i),U=(!i[7]||i[7]&&!i[35])&&Ca(i),C=i[7]&&i[35]&&Pa(i);return{c(){t=P("div"),e=P("span"),O&&O.c(),n=Dt(),b&&b.c(),r=Dt(),T&&T.c(),s=Dt(),o=P("input"),l=Dt(),I&&I.c(),c=Dt(),R&&R.c(),h=Dt(),N&&N.c(),u=Dt(),k&&k.c(),d=Dt(),B&&B.c(),y=Dt(),U&&U.c(),S=Dt(),C&&C.c(),this.h()},l(_){t=x(_,"DIV",{class:!0,style:!0});var E=L(t);e=x(E,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var at=L(e);O&&O.l(at),at.forEach(g),n=Lt(E),b&&b.l(E),r=Lt(E),T&&T.l(E),s=Lt(E),o=x(E,"INPUT",{placeholder:!0,style:!0}),l=Lt(E),I&&I.l(E),c=Lt(E),R&&R.l(E),h=Lt(E),N&&N.l(E),u=Lt(E),k&&k.l(E),d=Lt(E),B&&B.l(E),y=Lt(E),U&&U.l(E),S=Lt(E),C&&C.l(E),E.forEach(g),this.h()},h(){p(e,"aria-live","polite"),p(e,"aria-atomic","false"),p(e,"aria-relevant","additions text"),p(e,"class","a11yText svelte-1c314rr"),ko(o,H),_e(o,"svelte-1c314rr",!0),p(t,"class",A="selectContainer "+i[21]+" svelte-1c314rr"),p(t,"style",i[11]),_e(t,"hasError",i[10]),_e(t,"multiSelect",i[7]),_e(t,"disabled",i[9]),_e(t,"focused",i[1])},m(_,E){K(_,t,E),w(t,e),O&&O.m(e,null),w(t,n),b&&b.m(t,null),w(t,r),T&&T.m(t,null),w(t,s),w(t,o),o.autofocus&&o.focus(),i[82](o),Do(o,i[3]),w(t,l),I&&I.m(t,null),w(t,c),R&&R.m(t,null),w(t,h),N&&N.m(t,null),w(t,u),k&&k.m(t,null),w(t,d),B&&B.m(t,null),w(t,y),U&&U.m(t,null),w(t,S),C&&C.m(t,null),i[85](t),M=!0,D||(V=[At(window,"click",i[41]),At(window,"focusin",i[41]),At(window,"keydown",i[39]),At(o,"focus",i[40]),At(o,"input",i[83]),At(t,"click",i[42])],D=!0)},p(_,E){_[1]?O?O.p(_,E):(O=Na(_),O.c(),O.m(e,null)):O&&(O.d(1),O=null),_[17]?b?(b.p(_,E),E[0]&131072&&tt(b,1)):(b=Ba(_),b.c(),tt(b,1),b.m(t,r)):b&&(Yt(),rt(b,1,1,()=>{b=null}),Gt()),_[35]?T?(T.p(_,E),E[1]&16&&tt(T,1)):(T=ka(_),T.c(),tt(T,1),T.m(t,s)):T&&(Yt(),rt(T,1,1,()=>{T=null}),Gt()),ko(o,H=Ys(F,[(!M||E[0]&8192&&a!==(a=!_[13]))&&{readOnly:a},E[1]&1&&_[31],(!M||E[1]&32)&&{placeholder:_[36]},(!M||E[0]&16384)&&{style:_[14]},(!M||E[0]&512)&&{disabled:_[9]}])),E[0]&8&&o.value!==_[3]&&Do(o,_[3]),_e(o,"svelte-1c314rr",!0),!_[7]&&_[29]?I?(I.p(_,E),E[0]&536871040&&tt(I,1)):(I=Da(_),I.c(),tt(I,1),I.m(t,c)):I&&(Yt(),rt(I,1,1,()=>{I=null}),Gt()),_[37]?R?(R.p(_,E),E[1]&64&&tt(R,1)):(R=La(_),R.c(),tt(R,1),R.m(t,h)):R&&(Yt(),rt(R,1,1,()=>{R=null}),Gt()),!_[37]&&(_[20]||_[19]&&!_[2]||!_[13]&&!_[9]&&!_[4]&&(_[29]&&!_[15]||!_[29]))?N?N.p(_,E):(N=Ra(_),N.c(),N.m(t,u)):N&&(N.d(1),N=null),_[4]?k||(k=Ma(),k.c(),k.m(t,d)):k&&(k.d(1),k=null),_[5]?B?(B.p(_,E),E[0]&32&&tt(B,1)):(B=Ua(_),B.c(),tt(B,1),B.m(t,y)):B&&(Yt(),rt(B,1,1,()=>{B=null}),Gt()),!_[7]||_[7]&&!_[35]?U?U.p(_,E):(U=Ca(_),U.c(),U.m(t,S)):U&&(U.d(1),U=null),_[7]&&_[35]?C?C.p(_,E):(C=Pa(_),C.c(),C.m(t,null)):C&&(C.d(1),C=null),(!M||E[0]&2097152&&A!==(A="selectContainer "+_[21]+" svelte-1c314rr"))&&p(t,"class",A),(!M||E[0]&2048)&&p(t,"style",_[11]),E[0]&2098176&&_e(t,"hasError",_[10]),E[0]&2097280&&_e(t,"multiSelect",_[7]),E[0]&2097664&&_e(t,"disabled",_[9]),E[0]&2097154&&_e(t,"focused",_[1])},i(_){M||(tt(b),tt(T),tt(I),tt(R),tt(B),M=!0)},o(_){rt(b),rt(T),rt(I),rt(R),rt(B),M=!1},d(_){_&&g(t),O&&O.d(),b&&b.d(),T&&T.d(),i[82](null),I&&I.d(),R&&R.d(),N&&N.d(),k&&k.d(),B&&B.d(),U&&U.d(),C&&C.d(),i[85](null),D=!1,xn(V)}}}function Va(i){return i.map((t,e)=>({index:e,value:t,label:`${t}`}))}function K0(i,t,e){let n,r,s,o,a,l,c,h;const u=Hs();let{id:d=null}=t,{container:y=void 0}=t,{input:S=void 0}=t,{isMulti:A=!1}=t,{multiFullItemClearable:M=!1}=t,{isDisabled:D=!1}=t,{isCreatable:V=!1}=t,{isFocused:O=!1}=t,{value:b=null}=t,{filterText:T=""}=t,{placeholder:F="Select..."}=t,{placeholderAlwaysShow:H=!1}=t,{items:I=null}=t,{itemFilter:R=(f,j,gt)=>`${f}`.toLowerCase().includes(j.toLowerCase())}=t,{groupBy:N=void 0}=t,{groupFilter:k=f=>f}=t,{isGroupHeaderSelectable:B=!1}=t,{getGroupHeaderLabel:U=f=>f[C]||f.id}=t,{labelIdentifier:C="label"}=t,{getOptionLabel:_=(f,j)=>f.isCreator?`Create "${j}"`:f[C]}=t,{optionIdentifier:E="value"}=t,{loadOptions:at=void 0}=t,{hasError:Ft=!1}=t,{containerStyles:Ot=""}=t,{getSelectionLabel:zt=f=>f?f[C]:null}=t,{createGroupHeaderItem:Ze=f=>({value:f,label:f})}=t,{createItem:Oe=f=>({value:f,label:f})}=t;const Ti=()=>n;let{isSearchable:Ne=!0}=t,{inputStyles:Xe=""}=t,{isClearable:Re=!0}=t,{isWaiting:ye=!1}=t,{listPlacement:v="auto"}=t,{listOpen:W=!1}=t,{isVirtualList:yt=!1}=t,{loadOptionsInterval:Ct=300}=t,{noOptionsMessage:ue="No options"}=t,{hideEmptyState:Wt=!1}=t,{inputAttributes:Xt={}}=t,{listAutoWidth:qi=!0}=t,{itemHeight:Fi=40}=t,{Icon:gn=void 0}=t,{iconProps:Oi={}}=t,{showChevron:$t=!1}=t,{showIndicator:_n=!1}=t,{containerClasses:wn=""}=t,{indicatorSvg:vn=void 0}=t,{listOffset:Ji=5}=t,{ClearIcon:In=Y0}=t,{Item:be=ru}=t,{List:Sn=D0}=t,{Selection:En=M0}=t,{MultiSelection:An=P0}=t,{VirtualList:Xr=H0}=t;function su(f){if(f.loadOptions&&f.filterText.length>0)return;if(!f.items)return[];f.items&&f.items.length>0&&typeof f.items[0]!="object"&&(f.items=Va(f.items));let j=f.items.filter(gt=>{let ge=R(_(gt,f.filterText),f.filterText,gt);return ge&&f.isMulti&&f.value&&Array.isArray(f.value)&&(ge=!f.value.some(Ni=>Ni[f.optionIdentifier]===gt[f.optionIdentifier])),ge});return f.groupBy&&(j=cu(j)),f.isCreatable&&(j=Fo(j,f.filterText)),j}function Fo(f,j){if(j.length===0)return f;const gt=Oe(j);return f[0]&&j===f[0][C]?f:(gt.isCreator=!0,[...f,gt])}let{selectedValue:$r=null}=t,Nt,Qi,ts,es,is,Gn;const ou=G0(async()=>{e(4,ye=!0);let f=await at(T).catch(j=>{console.warn("svelte-select loadOptions error :>> ",j),u("error",{type:"loadOptions",details:j})});f&&!f.cancelled&&(f?(f&&f.length>0&&typeof f[0]!="object"&&(f=Va(f)),e(81,n=[...f]),u("loaded",{items:n})):e(81,n=[]),V&&e(81,n=Fo(n,T)),e(4,ye=!1),e(1,O=!0),e(5,W=!0))},Ct);function au(){typeof b=="string"?e(2,b={[E]:b,label:b}):A&&Array.isArray(b)&&b.length>0&&e(2,b=b.map(f=>typeof f=="string"?{value:f,label:f}:f))}let Ki;function lu(){e(31,Ki=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},Xt)),d&&e(31,Ki.id=d,Ki),Ne||e(31,Ki.readonly=!0,Ki)}function cu(f){const j=[],gt={};f.forEach(Ni=>{const $e=N(Ni);j.includes($e)||(j.push($e),gt[$e]=[],$e&&gt[$e].push(Object.assign(Ze($e,Ni),{id:$e,isGroupHeader:!0,isSelectable:B}))),gt[$e].push(Object.assign({isGroupItem:!!$e},Ni))});const ge=[];return k(j).forEach(Ni=>{ge.push(...gt[Ni])}),ge}function uu(){if(A){JSON.stringify(b)!==JSON.stringify(Qi)&&Oo()&&u("select",b);return}(!Qi||JSON.stringify(b[E])!==JSON.stringify(Qi[E]))&&u("select",b)}function hu(){O||W?ns():S&&S.blur()}function du(){b&&(Array.isArray(b)?e(2,b=[...b]):e(2,b=[b]))}function fu(){b&&e(2,b=null)}function mu(){T.length!==0&&(e(1,O=!0),e(5,W=!0),at?ou():(e(5,W=!0),A&&e(30,Nt=void 0)))}Ja(async()=>{e(77,Qi=b),e(78,ts=T),e(79,es=O),e(80,is=A)});function Oo(){let f=!0;if(b){const j=[],gt=[];b.forEach(ge=>{j.includes(ge[E])?f=!1:(j.push(ge[E]),gt.push(ge))}),f||e(2,b=gt)}return f}function No(f){let j=f?f[E]:b[E];return I.find(gt=>gt[E]===j)}function pu(f){!f||f.length===0||f.some(j=>typeof j!="object")||!b||(A?b.some(j=>!j||!j[E]):!b[E])||(Array.isArray(b)?e(2,b=b.map(j=>No(j)||j)):e(2,b=No()||b))}function Bo(f){const{detail:j}=f,gt=b[j?j.i:b.length-1];b.length===1?e(2,b=void 0):e(2,b=b.filter(ge=>ge!==gt)),u("clear",gt)}function yu(f){if(!!O)switch(f.key){case"ArrowDown":f.preventDefault(),e(5,W=!0),e(30,Nt=void 0);break;case"ArrowUp":f.preventDefault(),e(5,W=!0),e(30,Nt=void 0);break;case"Tab":W||e(1,O=!1);break;case"Backspace":if(!A||T.length>0)return;if(A&&b&&b.length>0){if(Bo(Nt!==void 0?Nt:b.length-1),Nt===0||Nt===void 0)break;e(30,Nt=b.length>Nt?Nt-1:void 0)}break;case"ArrowLeft":if(!A||T.length>0)return;Nt===void 0?e(30,Nt=b.length-1):b.length>Nt&&Nt!==0&&e(30,Nt-=1);break;case"ArrowRight":if(!A||T.length>0||Nt===void 0)return;Nt===b.length-1?e(30,Nt=void 0):Nt<b.length-1&&e(30,Nt+=1);break}}function ns(){e(1,O=!0),S&&S.focus()}function bu(f){if(!y)return;const j=f.path&&f.path.length>0?f.path[0]:f.target;y.contains(j)||y.contains(f.relatedTarget)||(e(1,O=!1),e(5,W=!1),e(30,Nt=void 0),S&&S.blur())}function gu(){D||(e(1,O=!0),e(5,W=!W))}function _u(){e(2,b=void 0),e(5,W=!1),u("clear",b),ns()}Yr(()=>{O&&S&&S.focus()});function wu(f){const{detail:j}=f;if(j){e(3,T="");const gt=Object.assign({},j);(!gt.isGroupHeader||gt.isSelectable)&&(A?e(2,b=b?b.concat([gt]):[gt]):e(2,b=gt),e(2,b),setTimeout(()=>{e(5,W=!1),e(30,Nt=void 0)}))}}function vu(f){const{detail:j}=f;A?(e(2,b=b||[]),e(2,b=[...b,Oe(j)])):e(2,b=Oe(j)),u("itemCreated",j),e(3,T=""),e(5,W=!1),e(30,Nt=void 0)}function Iu(){e(3,T=""),e(5,W=!1)}let{ariaValues:rs=f=>`Option ${f}, selected.`}=t,{ariaListOpen:ss=(f,j)=>`You are currently focused on option ${f}. There are ${j} results available.`}=t,{ariaFocused:os=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function Su(){let f;return A&&b.length>0?f=b.map(j=>zt(j)).join(", "):f=zt(b),rs(f)}function Eu(){if(!O||!n||n.length===0)return"";let f=n[Gn];if(W&&f){let j=zt(f),gt=n?n.length:0;return ss(j,gt)}else return os()}function Au(f){ji[f?"unshift":"push"](()=>{S=f,e(6,S)})}function Tu(){T=this.value,e(3,T)}function Fu(f){Gn=f,e(28,Gn)}function Ou(f){ji[f?"unshift":"push"](()=>{y=f,e(0,y)})}return i.$$set=f=>{"id"in f&&e(46,d=f.id),"container"in f&&e(0,y=f.container),"input"in f&&e(6,S=f.input),"isMulti"in f&&e(7,A=f.isMulti),"multiFullItemClearable"in f&&e(8,M=f.multiFullItemClearable),"isDisabled"in f&&e(9,D=f.isDisabled),"isCreatable"in f&&e(47,V=f.isCreatable),"isFocused"in f&&e(1,O=f.isFocused),"value"in f&&e(2,b=f.value),"filterText"in f&&e(3,T=f.filterText),"placeholder"in f&&e(48,F=f.placeholder),"placeholderAlwaysShow"in f&&e(49,H=f.placeholderAlwaysShow),"items"in f&&e(50,I=f.items),"itemFilter"in f&&e(51,R=f.itemFilter),"groupBy"in f&&e(52,N=f.groupBy),"groupFilter"in f&&e(53,k=f.groupFilter),"isGroupHeaderSelectable"in f&&e(54,B=f.isGroupHeaderSelectable),"getGroupHeaderLabel"in f&&e(55,U=f.getGroupHeaderLabel),"labelIdentifier"in f&&e(56,C=f.labelIdentifier),"getOptionLabel"in f&&e(57,_=f.getOptionLabel),"optionIdentifier"in f&&e(58,E=f.optionIdentifier),"loadOptions"in f&&e(59,at=f.loadOptions),"hasError"in f&&e(10,Ft=f.hasError),"containerStyles"in f&&e(11,Ot=f.containerStyles),"getSelectionLabel"in f&&e(12,zt=f.getSelectionLabel),"createGroupHeaderItem"in f&&e(60,Ze=f.createGroupHeaderItem),"createItem"in f&&e(61,Oe=f.createItem),"isSearchable"in f&&e(13,Ne=f.isSearchable),"inputStyles"in f&&e(14,Xe=f.inputStyles),"isClearable"in f&&e(15,Re=f.isClearable),"isWaiting"in f&&e(4,ye=f.isWaiting),"listPlacement"in f&&e(63,v=f.listPlacement),"listOpen"in f&&e(5,W=f.listOpen),"isVirtualList"in f&&e(64,yt=f.isVirtualList),"loadOptionsInterval"in f&&e(65,Ct=f.loadOptionsInterval),"noOptionsMessage"in f&&e(66,ue=f.noOptionsMessage),"hideEmptyState"in f&&e(67,Wt=f.hideEmptyState),"inputAttributes"in f&&e(16,Xt=f.inputAttributes),"listAutoWidth"in f&&e(68,qi=f.listAutoWidth),"itemHeight"in f&&e(69,Fi=f.itemHeight),"Icon"in f&&e(17,gn=f.Icon),"iconProps"in f&&e(18,Oi=f.iconProps),"showChevron"in f&&e(19,$t=f.showChevron),"showIndicator"in f&&e(20,_n=f.showIndicator),"containerClasses"in f&&e(21,wn=f.containerClasses),"indicatorSvg"in f&&e(22,vn=f.indicatorSvg),"listOffset"in f&&e(70,Ji=f.listOffset),"ClearIcon"in f&&e(23,In=f.ClearIcon),"Item"in f&&e(71,be=f.Item),"List"in f&&e(24,Sn=f.List),"Selection"in f&&e(25,En=f.Selection),"MultiSelection"in f&&e(26,An=f.MultiSelection),"VirtualList"in f&&e(72,Xr=f.VirtualList),"selectedValue"in f&&e(73,$r=f.selectedValue),"ariaValues"in f&&e(74,rs=f.ariaValues),"ariaListOpen"in f&&e(75,ss=f.ariaListOpen),"ariaFocused"in f&&e(76,os=f.ariaFocused)},i.$$.update=()=>{i.$$.dirty[0]&140|i.$$.dirty[1]&405340160&&e(81,n=su({loadOptions:at,filterText:T,items:I,value:b,isMulti:A,optionIdentifier:E,groupBy:N,isCreatable:V})),i.$$.dirty[2]&2048&&$r&&console.warn("selectedValue is no longer used. Please use value instead."),i.$$.dirty[1]&524288&&pu(I),i.$$.dirty[0]&4&&b&&au(),i.$$.dirty[0]&73728&&(Xt||!Ne)&&lu(),i.$$.dirty[0]&128|i.$$.dirty[2]&262144&&(A&&du(),is&&!A&&fu()),i.$$.dirty[0]&132&&A&&b&&b.length>1&&Oo(),i.$$.dirty[0]&4&&b&&uu(),i.$$.dirty[0]&132|i.$$.dirty[2]&32768&&!b&&A&&Qi&&u("select",b),i.$$.dirty[0]&2|i.$$.dirty[2]&131072&&O!==es&&hu(),i.$$.dirty[0]&8|i.$$.dirty[2]&65536&&T!==ts&&mu(),i.$$.dirty[0]&12&&e(29,r=b&&T.length===0),i.$$.dirty[0]&536904208&&e(37,s=r&&Re&&!D&&!ye),i.$$.dirty[0]&132|i.$$.dirty[1]&393216&&e(36,o=H&&A?F:b?"":F),i.$$.dirty[0]&132&&e(35,a=A&&b&&b.length>0),i.$$.dirty[0]&141|i.$$.dirty[1]&218103808|i.$$.dirty[2]&526326&&e(34,l={Item:be,filterText:T,optionIdentifier:E,noOptionsMessage:ue,hideEmptyState:Wt,isVirtualList:yt,VirtualList:Xr,value:b,isMulti:A,getGroupHeaderLabel:U,items:n,itemHeight:Fi,getOptionLabel:_,listPlacement:v,parent:y,listAutoWidth:qi,listOffset:Ji}),i.$$.dirty[0]&132&&e(33,c=b?Su():""),i.$$.dirty[0]&268435490|i.$$.dirty[2]&524288&&e(32,h=Eu())},[y,O,b,T,ye,W,S,A,M,D,Ft,Ot,zt,Ne,Xe,Re,Xt,gn,Oi,$t,_n,wn,vn,In,Sn,En,An,_u,Gn,r,Nt,Ki,h,c,l,a,o,s,Bo,yu,ns,bu,gu,wu,vu,Iu,d,V,F,H,I,R,N,k,B,U,C,_,E,at,Ze,Oe,Ti,v,yt,Ct,ue,Wt,qi,Fi,Ji,be,Xr,$r,rs,ss,os,Qi,ts,es,is,n,Au,Tu,Fu,Ou]}class Z0 extends wi{constructor(t){super(),vi(this,t,K0,Q0,Ii,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function ja(i,t,e){const n=i.slice();return n[22]=t[e],n}function za(i,t,e){const n=i.slice();return n[25]=t[e],n}function Ha(i,t,e){const n=i.slice();return n[28]=t[e],n}function X0(i){return{c:_t,l:_t,m:_t,p:_t,i:_t,o:_t,d:_t}}function $0(i){let t,e,n,r,s,o,a,l,c,h,u,d,y,S,A;return n=new Z0({props:{placeholder:"Search TV Series title (regular expressions allowed)",loadOptions:i[10]}}),n.$on("select",i[11]),n.$on("clear",i[14]),{c(){t=P("div"),e=P("div"),qt(n.$$.fragment),r=Dt(),s=P("div"),o=P("label"),a=P("input"),l=Dt(),c=P("div"),h=Dt(),u=P("span"),d=ct("Flip"),this.h()},l(M){t=x(M,"DIV",{class:!0});var D=L(t);e=x(D,"DIV",{class:!0});var V=L(e);li(n.$$.fragment,V),V.forEach(g),r=Lt(D),s=x(D,"DIV",{class:!0});var O=L(s);o=x(O,"LABEL",{for:!0,class:!0});var b=L(o);a=x(b,"INPUT",{type:!0,id:!0,class:!0}),l=Lt(b),c=x(b,"DIV",{class:!0}),L(c).forEach(g),h=Lt(b),u=x(b,"SPAN",{class:!0});var T=L(u);d=ut(T,"Flip"),T.forEach(g),b.forEach(g),O.forEach(g),D.forEach(g),this.h()},h(){p(e,"class","basis-10/12 shrink"),p(a,"type","checkbox"),p(a,"id","flip-toggle"),p(a,"class","peer sr-only"),p(c,"class","peer h-6 w-11 rounded-full bg-gray-300 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white"),p(u,"class","ml-3 text-base font-semibold text-gray-900 dark:text-gray-300"),p(o,"for","flip-toggle"),p(o,"class","relative inline-flex cursor-pointer items-center"),p(s,"class","flex-none"),p(t,"class","mx-auto flex max-w-2xl w-full flex-row justify-between items-center gap-2")},m(M,D){K(M,t,D),w(t,e),Jt(n,e,null),w(t,r),w(t,s),w(s,o),w(o,a),a.checked=i[3],w(o,l),w(o,c),w(o,h),w(o,u),w(u,d),y=!0,S||(A=At(a,"change",i[15]),S=!0)},p(M,D){D&8&&(a.checked=M[3])},i(M){y||(tt(n.$$.fragment,M),y=!0)},o(M){rt(n.$$.fragment,M),y=!1},d(M){M&&g(t),Qt(n),S=!1,A()}}}function tp(i){let t,e,n;return{c(){t=P("div"),e=P("span"),n=ct(`
				Loading database...`),this.h()},l(r){t=x(r,"DIV",{class:!0});var s=L(t);e=x(s,"SPAN",{class:!0}),L(e).forEach(g),n=ut(s,`
				Loading database...`),s.forEach(g),this.h()},h(){p(e,"class","mr-2 block h-7 w-7 animate-spin rounded-full border-4 border-t-green-500"),p(t,"class","mx-auto flex items-center gap-2 p-5 pt-10 text-gray-500")},m(r,s){K(r,t,s),w(t,e),w(t,n)},p:_t,i:_t,o:_t,d(r){r&&g(t)}}}function ep(i){return{c:_t,l:_t,m:_t,p:_t,d:_t}}function ip(i){let t,e=i[8]&&i[0]&&Wa(i);return{c(){e&&e.c(),t=Et()},l(n){e&&e.l(n),t=Et()},m(n,r){e&&e.m(n,r),K(n,t,r)},p(n,r){n[8]&&n[0]?e?e.p(n,r):(e=Wa(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(n){e&&e.d(n),n&&g(t)}}}function Wa(i){let t,e,n,r,s=i[3]?"Episode":"Season",o,a,l=i[3]?"Season":"Episode",c,h,u,d=[],y=new Map,S,A,M=i[0].rangeSeason,D=[];for(let F=0;F<M.length;F+=1)D[F]=Ya(Ha(i,M,F));let V=i[0].rangeEpisode,O=[];for(let F=0;F<V.length;F+=1)O[F]=Ga(za(i,V,F));let b=i[8];const T=F=>F[22].episodeID;for(let F=0;F<b.length;F+=1){let H=ja(i,b,F),I=T(H);y.set(I,d[F]=qa(I,H))}return{c(){t=P("div"),e=Rt("svg"),n=Rt("g"),r=Rt("text"),o=ct(s),a=Rt("text"),c=ct(l);for(let F=0;F<D.length;F+=1)D[F].c();h=Et();for(let F=0;F<O.length;F+=1)O[F].c();u=Et();for(let F=0;F<d.length;F+=1)d[F].c();this.h()},l(F){t=x(F,"DIV",{class:!0});var H=L(t);e=Mt(H,"svg",{width:!0,height:!0,viewBox:!0});var I=L(e);n=Mt(I,"g",{transform:!0});var R=L(n);r=Mt(R,"text",{class:!0});var N=L(r);o=ut(N,s),N.forEach(g),a=Mt(R,"text",{class:!0});var k=L(a);c=ut(k,l),k.forEach(g);for(let B=0;B<D.length;B+=1)D[B].l(R);h=Et();for(let B=0;B<O.length;B+=1)O[B].l(R);u=Et();for(let B=0;B<d.length;B+=1)d[B].l(R);R.forEach(g),I.forEach(g),H.forEach(g),this.h()},h(){p(r,"class","translate-x-1/2 -translate-y-3 text-xl font-semibold svelte-ulwntr"),p(a,"class","translate-y-1/2 -translate-x-3 -rotate-90 text-xl font-semibold svelte-ulwntr"),p(n,"transform","translate(20, 20)"),p(e,"width",S=i[3]?Math.min(i[6],i[4]*.75):Math.min(i[5],i[4]*.75)),p(e,"height","100%"),p(e,"viewBox",A=i[3]?`0 0 ${i[6]} ${i[5]}`:`0 0 ${i[5]} ${i[6]}`),p(t,"class","mx-auto p-8")},m(F,H){K(F,t,H),w(t,e),w(e,n),w(n,r),w(r,o),w(n,a),w(a,c);for(let I=0;I<D.length;I+=1)D[I].m(n,null);w(n,h);for(let I=0;I<O.length;I+=1)O[I].m(n,null);w(n,u);for(let I=0;I<d.length;I+=1)d[I].m(n,null)},p(F,H){if(H&8&&s!==(s=F[3]?"Episode":"Season")&&oi(o,s),H&8&&l!==(l=F[3]?"Season":"Episode")&&oi(c,l),H&11){M=F[0].rangeSeason;let I;for(I=0;I<M.length;I+=1){const R=Ha(F,M,I);D[I]?D[I].p(R,H):(D[I]=Ya(R),D[I].c(),D[I].m(n,h))}for(;I<D.length;I+=1)D[I].d(1);D.length=M.length}if(H&13){V=F[0].rangeEpisode;let I;for(I=0;I<V.length;I+=1){const R=za(F,V,I);O[I]?O[I].p(R,H):(O[I]=Ga(R),O[I].c(),O[I].m(n,u))}for(;I<O.length;I+=1)O[I].d(1);O.length=V.length}H&4879&&(b=F[8],d=Ka(d,H,T,1,F,b,y,n,xu,qa,null,ja)),H&120&&S!==(S=F[3]?Math.min(F[6],F[4]*.75):Math.min(F[5],F[4]*.75))&&p(e,"width",S),H&104&&A!==(A=F[3]?`0 0 ${F[6]} ${F[5]}`:`0 0 ${F[5]} ${F[6]}`)&&p(e,"viewBox",A)},d(F){F&&g(t),On(D,F),On(O,F);for(let H=0;H<d.length;H+=1)d[H].d()}}}function Ya(i){let t,e,n=i[28]+"",r,s;return{c(){t=Rt("g"),e=Rt("text"),r=ct(n),this.h()},l(o){t=Mt(o,"g",{transform:!0});var a=L(t);e=Mt(a,"text",{x:!0,y:!0,class:!0});var l=L(e);r=ut(l,n),l.forEach(g),a.forEach(g),this.h()},h(){p(e,"x",(St-1)/2),p(e,"y",(St-1)/2),p(e,"class","svelte-ulwntr"),Ie(e,"font-weight",i[1]==i[28]?700:400,!1),p(t,"transform",s=i[3]?`translate(0, ${St*i[28]})`:`translate(${St*i[28]}, 0)`)},m(o,a){K(o,t,a),w(t,e),w(e,r)},p(o,a){a&1&&n!==(n=o[28]+"")&&oi(r,n),a&3&&Ie(e,"font-weight",o[1]==o[28]?700:400,!1),a&9&&s!==(s=o[3]?`translate(0, ${St*o[28]})`:`translate(${St*o[28]}, 0)`)&&p(t,"transform",s)},d(o){o&&g(t)}}}function Ga(i){let t,e,n=i[25]+"",r,s;return{c(){t=Rt("g"),e=Rt("text"),r=ct(n),this.h()},l(o){t=Mt(o,"g",{transform:!0});var a=L(t);e=Mt(a,"text",{x:!0,y:!0,class:!0});var l=L(e);r=ut(l,n),l.forEach(g),a.forEach(g),this.h()},h(){p(e,"x",(St-1)/2),p(e,"y",(St-1)/2),p(e,"class","svelte-ulwntr"),Ie(e,"font-weight",i[2]==i[25]?700:400,!1),p(t,"transform",s=i[3]?`translate(${St*(i[25]+i[0].episodePad)}, 0)`:`translate(0, ${St*(i[25]+i[0].episodePad)})`)},m(o,a){K(o,t,a),w(t,e),w(e,r)},p(o,a){a&1&&n!==(n=o[25]+"")&&oi(r,n),a&5&&Ie(e,"font-weight",o[2]==o[25]?700:400,!1),a&9&&s!==(s=o[3]?`translate(${St*(o[25]+o[0].episodePad)}, 0)`:`translate(0, ${St*(o[25]+o[0].episodePad)})`)&&p(t,"transform",s)},d(o){o&&g(t)}}}function qa(i,t){let e,n,r,s,o,a=(t[22].averageRating==null?"-":t[22].averageRating.toFixed(1))+"",l,c,h,u,d,y;function S(){return t[16](t[22])}function A(){return t[17](t[22])}return{key:i,first:null,c(){e=Rt("a"),n=Rt("g"),r=Rt("rect"),o=Rt("text"),l=ct(a),this.h()},l(M){e=Mt(M,"a",{title:!0,href:!0,target:!0,rel:!0});var D=L(e);n=Mt(D,"g",{transform:!0});var V=L(n);r=Mt(V,"rect",{width:!0,height:!0,fill:!0}),L(r).forEach(g),o=Mt(V,"text",{x:!0,y:!0,class:!0,fill:!0});var O=L(o);l=ut(O,a),O.forEach(g),V.forEach(g),D.forEach(g),this.h()},h(){p(r,"width",St-1),p(r,"height",St-1),p(r,"fill",s=t[9]=t[12](t[22].averageRating)),p(o,"x",(St-1)/2),p(o,"y",(St-1)/2),p(o,"class","text-base tabular-nums svelte-ulwntr"),p(o,"fill",Zc(t[9]).l>70?"black":"white"),p(n,"transform",c=t[3]?`translate(${St*(t[22].episodeNumber+t[0].episodePad)}, ${St*t[22].seasonNumber})`:`translate(${St*t[22].seasonNumber}, ${St*(t[22].episodeNumber+t[0].episodePad)})`),Ie(n,"cursor","pointer",!1),p(e,"title",h=t[22].episodeTitle),p(e,"href",u="https://www.imdb.com/title/"+t[22].episodeID),p(e,"target","_blank"),p(e,"rel","noreferrer"),this.first=e},m(M,D){K(M,e,D),w(e,n),w(n,r),w(n,o),w(o,l),d||(y=[At(n,"mousemove",S),At(n,"mousemove",A),At(n,"mouseleave",t[18]),At(n,"mouseleave",t[19])],d=!0)},p(M,D){t=M,D&256&&s!==(s=t[9]=t[12](t[22].averageRating))&&p(r,"fill",s),D&256&&a!==(a=(t[22].averageRating==null?"-":t[22].averageRating.toFixed(1))+"")&&oi(l,a),D&265&&c!==(c=t[3]?`translate(${St*(t[22].episodeNumber+t[0].episodePad)}, ${St*t[22].seasonNumber})`:`translate(${St*t[22].seasonNumber}, ${St*(t[22].episodeNumber+t[0].episodePad)})`)&&p(n,"transform",c),D&256&&h!==(h=t[22].episodeTitle)&&p(e,"title",h),D&256&&u!==(u="https://www.imdb.com/title/"+t[22].episodeID)&&p(e,"href",u)},d(M){M&&g(e),d=!1,xn(y)}}}function np(i){let t,e,n;return{c(){t=P("div"),e=P("span"),n=ct(`
				Loading...`),this.h()},l(r){t=x(r,"DIV",{class:!0});var s=L(t);e=x(s,"SPAN",{class:!0}),L(e).forEach(g),n=ut(s,`
				Loading...`),s.forEach(g),this.h()},h(){p(e,"class","mr-2 block h-7 w-7 animate-spin rounded-full border-4 border-t-green-500"),p(t,"class","mx-auto flex items-center gap-2 pt-10 text-gray-500")},m(r,s){K(r,t,s),w(t,e),w(t,n)},p:_t,d(r){r&&g(t)}}}function rp(i){let t,e,n,r,s,o,a,l,c,h,u,d,y,S,A,M,D,V,O,b,T,F,H,I,R,N,k,B,U,C,_,E,at,Ft,Ot,zt,Ze,Oe,Ti,Ne,Xe,Re,ye,v,W;Qa(i[13]);let yt={ctx:i,current:null,token:null,hasCatch:!1,pending:tp,then:$0,catch:X0,value:7,blocks:[,,,]};qn(Ne=i[7],yt);let Ct={ctx:i,current:null,token:null,hasCatch:!1,pending:np,then:ip,catch:ep,value:8};return qn(Re=i[8],Ct),{c(){t=P("div"),e=P("div"),n=P("div"),r=P("h1"),s=P("abbr"),o=ct("SeriesHeat"),a=ct(" with DuckDB-Wasm"),l=Dt(),c=P("div"),h=P("p"),u=ct(`This project is a replica of
				`),d=P("a"),y=ct("SeriesHeat"),S=ct(`
				by
				`),A=P("a"),M=ct("Jim Vallandingham"),D=ct(`, that uses
				`),V=P("a"),O=ct("DuckDB-Wasm"),b=ct(`
				instead of
				`),T=P("a"),F=ct("phiresky"),H=ct(`'s
				`),I=P("a"),R=ct("sql.js-httpvfs"),N=ct("."),k=Dt(),B=P("p"),U=ct("Data comes from "),C=P("a"),_=ct("IMDb Datasets"),E=ct(`
				filtered and preprocessed to Parquet files so they can be directly queried.
				Code for building said files can be found in
				`),at=P("a"),Ft=ct("@myagues/datasets/imdb"),Ot=ct(`, and code for the project is available
				`),zt=P("a"),Ze=ct(`@myagues/seriesheat-duckdb-wasm
				`),Oe=ct("."),Ti=Dt(),yt.block.c(),Xe=Dt(),Ct.block.c(),this.h()},l(ue){t=x(ue,"DIV",{class:!0});var Wt=L(t);e=x(Wt,"DIV",{class:!0});var Xt=L(e);n=x(Xt,"DIV",{class:!0});var qi=L(n);r=x(qi,"H1",{class:!0});var Fi=L(r);s=x(Fi,"ABBR",{title:!0});var gn=L(s);o=ut(gn,"SeriesHeat"),gn.forEach(g),a=ut(Fi," with DuckDB-Wasm"),Fi.forEach(g),qi.forEach(g),l=Lt(Xt),c=x(Xt,"DIV",{class:!0});var Oi=L(c);h=x(Oi,"P",{});var $t=L(h);u=ut($t,`This project is a replica of
				`),d=x($t,"A",{class:!0,title:!0,href:!0,target:!0,rel:!0});var _n=L(d);y=ut(_n,"SeriesHeat"),_n.forEach(g),S=ut($t,`
				by
				`),A=x($t,"A",{class:!0,title:!0,href:!0,target:!0,rel:!0});var wn=L(A);M=ut(wn,"Jim Vallandingham"),wn.forEach(g),D=ut($t,`, that uses
				`),V=x($t,"A",{class:!0,title:!0,href:!0,target:!0,rel:!0});var vn=L(V);O=ut(vn,"DuckDB-Wasm"),vn.forEach(g),b=ut($t,`
				instead of
				`),T=x($t,"A",{class:!0,title:!0,href:!0,target:!0,rel:!0});var Ji=L(T);F=ut(Ji,"phiresky"),Ji.forEach(g),H=ut($t,`'s
				`),I=x($t,"A",{class:!0,title:!0,href:!0,target:!0,rel:!0});var In=L(I);R=ut(In,"sql.js-httpvfs"),In.forEach(g),N=ut($t,"."),$t.forEach(g),k=Lt(Oi),B=x(Oi,"P",{class:!0});var be=L(B);U=ut(be,"Data comes from "),C=x(be,"A",{class:!0,title:!0,href:!0,target:!0,rel:!0});var Sn=L(C);_=ut(Sn,"IMDb Datasets"),Sn.forEach(g),E=ut(be,`
				filtered and preprocessed to Parquet files so they can be directly queried.
				Code for building said files can be found in
				`),at=x(be,"A",{class:!0,href:!0,target:!0,rel:!0});var En=L(at);Ft=ut(En,"@myagues/datasets/imdb"),En.forEach(g),Ot=ut(be,`, and code for the project is available
				`),zt=x(be,"A",{class:!0,href:!0,target:!0,rel:!0});var An=L(zt);Ze=ut(An,`@myagues/seriesheat-duckdb-wasm
				`),An.forEach(g),Oe=ut(be,"."),be.forEach(g),Oi.forEach(g),Ti=Lt(Xt),yt.block.l(Xt),Xe=Lt(Xt),Ct.block.l(Xt),Xt.forEach(g),Wt.forEach(g),this.h()},h(){p(s,"title","Original name and project by Jim Vallandingham"),Ie(s,"cursor","context-menu",!1),p(r,"class","text-3xl font-semibold"),p(n,"class","mx-auto mt-10 mb-5 max-w-2xl"),p(d,"class","desc-link svelte-ulwntr"),p(d,"title","SeriesHeat by Jim Vallandingham"),p(d,"href","https://vallandingham.me/seriesheat"),p(d,"target","_blank"),p(d,"rel","noreferrer"),p(A,"class","desc-link svelte-ulwntr"),p(A,"title","Jim Vallandingham homepage"),p(A,"href","https://vallandingham.me"),p(A,"target","_blank"),p(A,"rel","noreferrer"),p(V,"class","desc-link svelte-ulwntr"),p(V,"title","DuckDB-Wasm blog post"),p(V,"href","https://duckdb.org/2021/10/29/duckdb-wasm.html"),p(V,"target","_blank"),p(V,"rel","noreferrer"),p(T,"class","desc-link svelte-ulwntr"),p(T,"title","phiresky's blog"),p(T,"href","https://phiresky.github.io/blog"),p(T,"target","_blank"),p(T,"rel","noreferrer"),p(I,"class","desc-link svelte-ulwntr"),p(I,"title","sql.js-httpvfs"),p(I,"href","https://github.com/phiresky/sql.js-httpvfs"),p(I,"target","_blank"),p(I,"rel","noreferrer"),p(C,"class","desc-link svelte-ulwntr"),p(C,"title","IMDb Datasets"),p(C,"href","https://www.imdb.com/interfaces"),p(C,"target","_blank"),p(C,"rel","noreferrer"),p(at,"class","desc-link svelte-ulwntr"),p(at,"href","https://github.com/myagues/datasets/tree/main/imdb"),p(at,"target","_blank"),p(at,"rel","noreferrer"),p(zt,"class","desc-link svelte-ulwntr"),p(zt,"href","https://github.com/myagues/seriesheat-duckdb-wasm"),p(zt,"target","_blank"),p(zt,"rel","noreferrer"),p(B,"class","my-5"),p(c,"class","mx-auto my-5 max-w-prose"),p(e,"class","flex flex-col"),p(t,"class","px-4 font-sans sm:px-6 md:px-8")},m(ue,Wt){K(ue,t,Wt),w(t,e),w(e,n),w(n,r),w(r,s),w(s,o),w(r,a),w(e,l),w(e,c),w(c,h),w(h,u),w(h,d),w(d,y),w(h,S),w(h,A),w(A,M),w(h,D),w(h,V),w(V,O),w(h,b),w(h,T),w(T,F),w(h,H),w(h,I),w(I,R),w(h,N),w(c,k),w(c,B),w(B,U),w(B,C),w(C,_),w(B,E),w(B,at),w(at,Ft),w(B,Ot),w(B,zt),w(zt,Ze),w(B,Oe),w(e,Ti),yt.block.m(e,yt.anchor=null),yt.mount=()=>e,yt.anchor=Xe,w(e,Xe),Ct.block.m(e,Ct.anchor=null),Ct.mount=()=>e,Ct.anchor=null,ye=!0,v||(W=At(window,"resize",i[13]),v=!0)},p(ue,[Wt]){i=ue,yt.ctx=i,Wt&128&&Ne!==(Ne=i[7])&&qn(Ne,yt)||Ro(yt,i,Wt),Ct.ctx=i,Wt&256&&Re!==(Re=i[8])&&qn(Re,Ct)||Ro(Ct,i,Wt)},i(ue){ye||(tt(yt.block),ye=!0)},o(ue){for(let Wt=0;Wt<3;Wt+=1){const Xt=yt.blocks[Wt];rt(Xt)}ye=!1},d(ue){ue&&g(t),yt.block.d(),yt.token=null,yt=null,Ct.block.d(),Ct.token=null,Ct=null,v=!1,W()}}}const St=40;function sp(i,t,e){let n,r,s=new Promise(()=>{}),o,a={rangeSeason:[0],rangeEpisode:[0],episodePad:0},l,c,h,u=!1,d;const y=nu().exponent(1.5).domain([0,10]),S=(R,N,k=1)=>Array.from({length:(N-R)/k+1},(B,U)=>R+U*k);Yr(async()=>{const R=await am();e(7,s=R.connect()),await s.then(N=>N.query(`
			create temp table if not exists 'series_map' as (
				select
					seriesID,
					seriesTitle,
					min(startYear) as 'beginYear',
					coalesce(sum(numVotes), 0) as totalVotes
				from parquet_scan('imdb.parquet')
				where startYear is not null
				group by seriesID, seriesTitle
				order by totalVotes desc
			)
		`))});async function A(R){const N=await s.then(k=>k.query(`
			select
				seriesID as 'value',
				concat(seriesTitle, ' (', beginYear, ')') as 'label'
			from 'series_map'
			where regexp_matches(seriesTitle, '${R.replace("'","''")}', 'i')
			limit 30
		`));return JSON.parse(JSON.stringify(N.toArray()))}async function M(R){var _,E,at,Ft;e(8,o=new Promise(()=>{}));const N=await s.then(Ot=>Ot.query(`
			select
				seasonNumber,
				episodeNumber,
				episodeTitle,
				episodeID,
				averageRating
			from parquet_scan('imdb.parquet')
			where seriesID = '${R.detail.value}' and seasonNumber > 0
			order by seasonNumber, episodeNumber
		`)),k=Math.min(...(_=N.getChild("seasonNumber"))==null?void 0:_.toArray()),B=Math.max(...(E=N.getChild("seasonNumber"))==null?void 0:E.toArray()),U=Math.min(...(at=N.getChild("episodeNumber"))==null?void 0:at.toArray()),C=Math.max(...(Ft=N.getChild("episodeNumber"))==null?void 0:Ft.toArray());e(0,a={rangeSeason:S(k,B),rangeEpisode:S(U,C),episodePad:U==0?1:0}),e(8,o=JSON.parse(JSON.stringify(N.toArray())))}function D(R){return R==null?"#ddd":v0(y(R))}function V(){e(4,d=window.innerWidth)}const O=()=>e(8,o=void 0);function b(){u=this.checked,e(3,u)}const T=R=>e(1,l=R.seasonNumber),F=R=>e(2,c=R.episodeNumber),H=()=>e(1,l=void 0),I=()=>e(2,c=void 0);return i.$$.update=()=>{i.$$.dirty&1&&e(6,n=St*(2+a.rangeEpisode.length)),i.$$.dirty&1&&e(5,r=St*(2+a.rangeSeason.length))},[a,l,c,u,d,r,n,s,o,h,A,M,D,V,O,b,T,F,H,I]}class up extends wi{constructor(t){super(),vi(this,t,sp,rp,Ii,{})}}export{up as default};
